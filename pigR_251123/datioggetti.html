<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Dati, oggetti, funzioni (e tutto il resto) | pigR: R, per pigri</title>
  <meta name="description" content="Un’introduzione all’uso di R per studenti pigri o frettolosi." />
  <meta name="generator" content="bookdown 0.36 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Dati, oggetti, funzioni (e tutto il resto) | pigR: R, per pigri" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Un’introduzione all’uso di R per studenti pigri o frettolosi." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Dati, oggetti, funzioni (e tutto il resto) | pigR: R, per pigri" />
  
  <meta name="twitter:description" content="Un’introduzione all’uso di R per studenti pigri o frettolosi." />
  

<meta name="author" content="E. Parente, Scuola SAFE, Università degli Studi della Basilicata" />


<meta name="date" content="2023-11-25" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="aiuto.html"/>
<link rel="next" href="dentroefuoriR.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Cos’è pigR?</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#di-cosa-hai-bisogno-per-leggere-e-capire-questo-libro."><i class="fa fa-check"></i>Di cosa hai bisogno per leggere (e capire) questo libro.</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#chi-siamo-noi-noi-noi"><i class="fa fa-check"></i>Chi siamo noi (noi, noi)?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#se-ti-piace"><i class="fa fa-check"></i>Se ti piace…</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#caveat"><i class="fa fa-check"></i>Caveat</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#cookies"><i class="fa fa-check"></i>Cookies</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#la-foto-di-copertina."><i class="fa fa-check"></i>La foto di copertina.</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduzione</a>
<ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#cosa-cè-da-imparare-in-questo-capitolo."><i class="fa fa-check"></i><b>1.1</b> Cosa c’è da imparare in questo capitolo.</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#convenzioni-e-guida-alla-lettura-e-alluso-del-codice."><i class="fa fa-check"></i><b>1.2</b> Convenzioni e guida alla lettura e all’uso del codice.</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#tutti-vogliono-imparare-a-usare-r."><i class="fa fa-check"></i><b>1.3</b> Tutti vogliono imparare a usare R.</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="intro.html"><a href="intro.html#provare-per-credere-app-gui-ide-e-altre-diavolerie."><i class="fa fa-check"></i><b>1.3.1</b> Provare per credere: App, GUI, IDE e altre diavolerie.</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#laltra-faccia-della-medaglia-troppa-fatica."><i class="fa fa-check"></i><b>1.4</b> L’altra faccia della medaglia: troppa fatica.</a></li>
<li class="chapter" data-level="1.5" data-path="intro.html"><a href="intro.html#r-per-pigri."><i class="fa fa-check"></i><b>1.5</b> R, per pigri.</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="inter.html"><a href="inter.html"><i class="fa fa-check"></i><b>2</b> Interfacce e ambienti</a>
<ul>
<li class="chapter" data-level="2.1" data-path="inter.html"><a href="inter.html#cosa-cè-da-imparare-in-questo-capitolo.-1"><i class="fa fa-check"></i><b>2.1</b> Cosa c’è da imparare in questo capitolo.</a></li>
<li class="chapter" data-level="2.2" data-path="inter.html"><a href="inter.html#rstudio."><i class="fa fa-check"></i><b>2.2</b> RStudio.</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="inter.html"><a href="inter.html#linterfaccia-principale-di-rstudio."><i class="fa fa-check"></i><b>2.2.1</b> L’interfaccia principale di RStudio.</a></li>
<li class="chapter" data-level="2.2.2" data-path="inter.html"><a href="inter.html#il-pannello-source."><i class="fa fa-check"></i><b>2.2.2</b> Il pannello Source.</a></li>
<li class="chapter" data-level="2.2.3" data-path="inter.html"><a href="inter.html#il-pannello-console."><i class="fa fa-check"></i><b>2.2.3</b> Il pannello Console.</a></li>
<li class="chapter" data-level="2.2.4" data-path="inter.html"><a href="inter.html#il-pannello-environment."><i class="fa fa-check"></i><b>2.2.4</b> Il pannello Environment.</a></li>
<li class="chapter" data-level="2.2.5" data-path="inter.html"><a href="inter.html#il-tab-environment."><i class="fa fa-check"></i><b>2.2.5</b> Il tab Environment.</a></li>
<li class="chapter" data-level="2.2.6" data-path="inter.html"><a href="inter.html#il-tab-history."><i class="fa fa-check"></i><b>2.2.6</b> Il tab History.</a></li>
<li class="chapter" data-level="2.2.7" data-path="inter.html"><a href="inter.html#il-pannello-plots."><i class="fa fa-check"></i><b>2.2.7</b> Il pannello Plots.</a></li>
<li class="chapter" data-level="2.2.8" data-path="inter.html"><a href="inter.html#il-tab-plots."><i class="fa fa-check"></i><b>2.2.8</b> Il tab Plots.</a></li>
<li class="chapter" data-level="2.2.9" data-path="inter.html"><a href="inter.html#il-tab-files."><i class="fa fa-check"></i><b>2.2.9</b> Il tab Files.</a></li>
<li class="chapter" data-level="2.2.10" data-path="inter.html"><a href="inter.html#tabpackages"><i class="fa fa-check"></i><b>2.2.10</b> Il tab Packages.</a></li>
<li class="chapter" data-level="2.2.11" data-path="inter.html"><a href="inter.html#il-tab-help."><i class="fa fa-check"></i><b>2.2.11</b> Il tab Help.</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="inter.html"><a href="inter.html#esercizi."><i class="fa fa-check"></i><b>2.3</b> Esercizi.</a></li>
<li class="chapter" data-level="2.4" data-path="inter.html"><a href="inter.html#altrerisinter"><i class="fa fa-check"></i><b>2.4</b> Altre risorse.</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="inter.html"><a href="inter.html#risorse-in-italiano."><i class="fa fa-check"></i><b>2.4.1</b> Risorse in italiano.</a></li>
<li class="chapter" data-level="2.4.2" data-path="inter.html"><a href="inter.html#risorse-in-inglese."><i class="fa fa-check"></i><b>2.4.2</b> Risorse in inglese.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="aiuto.html"><a href="aiuto.html"><i class="fa fa-check"></i><b>3</b> Chiedere aiuto</a>
<ul>
<li class="chapter" data-level="3.1" data-path="aiuto.html"><a href="aiuto.html#cosa-cè-da-imparare-in-questo-capitolo.-2"><i class="fa fa-check"></i><b>3.1</b> Cosa c’è da imparare in questo capitolo.</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="aiuto.html"><a href="aiuto.html#premessa-1-nessuno-legge-i-manuali-figuriamoci-i-pigri"><i class="fa fa-check"></i><b>3.1.1</b> Premessa 1: nessuno legge i manuali (figuriamoci i pigRi)!</a></li>
<li class="chapter" data-level="3.1.2" data-path="aiuto.html"><a href="aiuto.html#gatti"><i class="fa fa-check"></i><b>3.1.2</b> Premessa 2: ci sono molti modi di pelare un gatto (e documentarlo).</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="aiuto.html"><a href="aiuto.html#laiuto-di-r."><i class="fa fa-check"></i><b>3.2</b> L’aiuto di R.</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="aiuto.html"><a href="aiuto.html#tabhelp"><i class="fa fa-check"></i><b>3.2.1</b> Il tab Help di RStudio.</a></li>
<li class="chapter" data-level="3.2.2" data-path="aiuto.html"><a href="aiuto.html#funzioni-per-chiedere-aiuto."><i class="fa fa-check"></i><b>3.2.2</b> <em>Funzioni per chiedere aiuto.</em></a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="aiuto.html"><a href="aiuto.html#strategieaiuto"><i class="fa fa-check"></i><b>3.3</b> Strategie per cercare aiuto (anche senza parere).</a></li>
<li class="chapter" data-level="3.4" data-path="aiuto.html"><a href="aiuto.html#esercizi.-1"><i class="fa fa-check"></i><b>3.4</b> Esercizi.</a></li>
<li class="chapter" data-level="3.5" data-path="aiuto.html"><a href="aiuto.html#altrerisaiuto"><i class="fa fa-check"></i><b>3.5</b> Altre risorse.</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="aiuto.html"><a href="aiuto.html#risorse-in-italiano.-1"><i class="fa fa-check"></i><b>3.5.1</b> Risorse in italiano.</a></li>
<li class="chapter" data-level="3.5.2" data-path="aiuto.html"><a href="aiuto.html#risorse-in-inglese.-1"><i class="fa fa-check"></i><b>3.5.2</b> Risorse in inglese.</a></li>
<li class="chapter" data-level="3.5.3" data-path="aiuto.html"><a href="aiuto.html#niente-video"><i class="fa fa-check"></i><b>3.5.3</b> Niente video?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="datioggetti.html"><a href="datioggetti.html"><i class="fa fa-check"></i><b>4</b> Dati, oggetti, funzioni (e tutto il resto)</a>
<ul>
<li class="chapter" data-level="4.1" data-path="datioggetti.html"><a href="datioggetti.html#cosa-cè-da-imparare-in-questo-capitolo.-3"><i class="fa fa-check"></i><b>4.1</b> Cosa c’è da imparare in questo capitolo.</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="datioggetti.html"><a href="datioggetti.html#premessa-1-esperimenti-e-osservazioni."><i class="fa fa-check"></i><b>4.1.1</b> Premessa 1: esperimenti e osservazioni.</a></li>
<li class="chapter" data-level="4.1.2" data-path="datioggetti.html"><a href="datioggetti.html#premessa2"><i class="fa fa-check"></i><b>4.1.2</b> Premessa 2. Misure e dati, osservazioni e variabili, tabelle.</a></li>
<li class="chapter" data-level="4.1.3" data-path="datioggetti.html"><a href="datioggetti.html#anatab"><i class="fa fa-check"></i><b>4.1.3</b> Anatomia di una tabella.</a></li>
<li class="chapter" data-level="4.1.4" data-path="datioggetti.html"><a href="datioggetti.html#un-piccolo-esercizio."><i class="fa fa-check"></i><b>4.1.4</b> Un piccolo esercizio.</a></li>
<li class="chapter" data-level="4.1.5" data-path="datioggetti.html"><a href="datioggetti.html#tidyuntidydefinizione"><i class="fa fa-check"></i><b>4.1.5</b> Tidy vs. untidy (tabelle ordinate e disordinate).</a></li>
<li class="chapter" data-level="4.1.6" data-path="datioggetti.html"><a href="datioggetti.html#missingdata"><i class="fa fa-check"></i><b>4.1.6</b> Dati mancanti (missing data).</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="datioggetti.html"><a href="datioggetti.html#r-è-un-linguaggio-funzionale-che-supporta-la-programmazione-orientata-a-oggetti"><i class="fa fa-check"></i><b>4.2</b> R è un linguaggio funzionale che supporta la programmazione orientata a oggetti…</a></li>
<li class="chapter" data-level="4.3" data-path="datioggetti.html"><a href="datioggetti.html#ilnomedellecose"><i class="fa fa-check"></i><b>4.3</b> Il nome delle cose.</a></li>
<li class="chapter" data-level="4.4" data-path="datioggetti.html"><a href="datioggetti.html#strutturedati"><i class="fa fa-check"></i><b>4.4</b> Strutture di dati.</a></li>
<li class="chapter" data-level="4.5" data-path="datioggetti.html"><a href="datioggetti.html#vettoriatomici"><i class="fa fa-check"></i><b>4.5</b> Vettori atomici.</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="datioggetti.html"><a href="datioggetti.html#vettori1D"><i class="fa fa-check"></i><b>4.5.1</b> Vettori ad una dimensione.</a></li>
<li class="chapter" data-level="4.5.2" data-path="datioggetti.html"><a href="datioggetti.html#vettori-atomici-a-2-o-più-dimensioni-matrici-e-array."><i class="fa fa-check"></i><b>4.5.2</b> Vettori atomici a 2 o più dimensioni: matrici e array.</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="datioggetti.html"><a href="datioggetti.html#i-data-frame-e-le-liste."><i class="fa fa-check"></i><b>4.6</b> I data frame e le liste.</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="datioggetti.html"><a href="datioggetti.html#dataframebenemale"><i class="fa fa-check"></i><b>4.6.1</b> I data frame, nel bene e nel male.</a></li>
<li class="chapter" data-level="4.6.2" data-path="datioggetti.html"><a href="datioggetti.html#le-liste."><i class="fa fa-check"></i><b>4.6.2</b> Le liste.</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="datioggetti.html"><a href="datioggetti.html#altre-cose-strane-tabelle-di-conte-serie-temporali-date-e-ore."><i class="fa fa-check"></i><b>4.7</b> <em>Altre cose strane: tabelle di conte, serie temporali, date e ore.</em></a></li>
<li class="chapter" data-level="4.8" data-path="datioggetti.html"><a href="datioggetti.html#indsel"><i class="fa fa-check"></i><b>4.8</b> Indirizzare, selezionare.</a>
<ul>
<li class="chapter" data-level="4.8.1" data-path="datioggetti.html"><a href="datioggetti.html#indirizzare-per-posizione."><i class="fa fa-check"></i><b>4.8.1</b> Indirizzare per posizione.</a></li>
<li class="chapter" data-level="4.8.2" data-path="datioggetti.html"><a href="datioggetti.html#usare-i-nomi."><i class="fa fa-check"></i><b>4.8.2</b> Usare i nomi.</a></li>
<li class="chapter" data-level="4.8.3" data-path="datioggetti.html"><a href="datioggetti.html#usare-valori-logici."><i class="fa fa-check"></i><b>4.8.3</b> Usare valori logici.</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="datioggetti.html"><a href="datioggetti.html#attach-with-within."><i class="fa fa-check"></i><b>4.9</b> <code>attach()</code>, <code>with()</code>, <code>within()</code>.</a></li>
<li class="chapter" data-level="4.10" data-path="datioggetti.html"><a href="datioggetti.html#funzioni-built-in-e-funzioni-definite-dallutente."><i class="fa fa-check"></i><b>4.10</b> <em>Funzioni “built-in” e funzioni definite dall’utente.</em></a>
<ul>
<li class="chapter" data-level="4.10.1" data-path="datioggetti.html"><a href="datioggetti.html#operatorisemplici"><i class="fa fa-check"></i><b>4.10.1</b> Semplici funzioni matematiche, trigonometriche, statistiche, logiche, etc.</a></li>
<li class="chapter" data-level="4.10.2" data-path="datioggetti.html"><a href="datioggetti.html#operatori."><i class="fa fa-check"></i><b>4.10.2</b> Operatori.</a></li>
<li class="chapter" data-level="4.10.3" data-path="datioggetti.html"><a href="datioggetti.html#funzioni-built-in."><i class="fa fa-check"></i><b>4.10.3</b> Funzioni built-in.</a></li>
<li class="chapter" data-level="4.10.4" data-path="datioggetti.html"><a href="datioggetti.html#userdeffunc"><i class="fa fa-check"></i><b>4.10.4</b> Funzioni definite dall’utente.</a></li>
</ul></li>
<li class="chapter" data-level="4.11" data-path="datioggetti.html"><a href="datioggetti.html#programmare-con-stile."><i class="fa fa-check"></i><b>4.11</b> Programmare, con stile.</a></li>
<li class="chapter" data-level="4.12" data-path="datioggetti.html"><a href="datioggetti.html#un-ambiente-affollato."><i class="fa fa-check"></i><b>4.12</b> Un ambiente affollato.</a></li>
<li class="chapter" data-level="4.13" data-path="datioggetti.html"><a href="datioggetti.html#altrerisorsedati"><i class="fa fa-check"></i><b>4.13</b> Altre risorse.</a>
<ul>
<li class="chapter" data-level="4.13.1" data-path="datioggetti.html"><a href="datioggetti.html#risorse-in-italiano.-2"><i class="fa fa-check"></i><b>4.13.1</b> Risorse in italiano.</a></li>
<li class="chapter" data-level="4.13.2" data-path="datioggetti.html"><a href="datioggetti.html#risorse-in-inglese.-2"><i class="fa fa-check"></i><b>4.13.2</b> Risorse in inglese.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="dentroefuoriR.html"><a href="dentroefuoriR.html"><i class="fa fa-check"></i><b>5</b> Dentro e fuori R</a>
<ul>
<li class="chapter" data-level="5.1" data-path="dentroefuoriR.html"><a href="dentroefuoriR.html#cosa-cè-da-imparare-in-questo-capitolo.-4"><i class="fa fa-check"></i><b>5.1</b> Cosa c’è da imparare in questo capitolo.</a></li>
<li class="chapter" data-level="5.2" data-path="dentroefuoriR.html"><a href="dentroefuoriR.html#ognicosaalsuoposto"><i class="fa fa-check"></i><b>5.2</b> Ogni cosa al suo posto: working directory, progetti, etc.</a></li>
<li class="chapter" data-level="5.3" data-path="dentroefuoriR.html"><a href="dentroefuoriR.html#facciamolasemplice"><i class="fa fa-check"></i><b>5.3</b> Facciamola semplice: il menu <code>Import Dataset</code>.</a></li>
<li class="chapter" data-level="5.4" data-path="dentroefuoriR.html"><a href="dentroefuoriR.html#usareadr"><i class="fa fa-check"></i><b>5.4</b> Gestire file di testo con <code>readr.</code></a></li>
<li class="chapter" data-level="5.5" data-path="dentroefuoriR.html"><a href="dentroefuoriR.html#tutti-i-comandi-o-quasi-per-importare-file-di-testo"><i class="fa fa-check"></i><b>5.5</b> Tutti i comandi (o quasi) per importare file di testo…</a></li>
<li class="chapter" data-level="5.6" data-path="dentroefuoriR.html"><a href="dentroefuoriR.html#altri-formati-di-dati."><i class="fa fa-check"></i><b>5.6</b> Altri formati di dati.</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="dentroefuoriR.html"><a href="dentroefuoriR.html#da-e-per-excel."><i class="fa fa-check"></i><b>5.6.1</b> Da e per Excel.</a></li>
<li class="chapter" data-level="5.6.2" data-path="dentroefuoriR.html"><a href="dentroefuoriR.html#altri-formati-foreign-e-hmisc-e-haven."><i class="fa fa-check"></i><b>5.6.2</b> Altri formati: <code>foreign</code> e <code>Hmisc</code> e <code>haven</code>.</a></li>
<li class="chapter" data-level="5.6.3" data-path="dentroefuoriR.html"><a href="dentroefuoriR.html#un-richiamo-file-.rdata-e-.rds"><i class="fa fa-check"></i><b>5.6.3</b> Un richiamo: file <code>.Rdata</code> e <code>.rds</code></a></li>
<li class="chapter" data-level="5.6.4" data-path="dentroefuoriR.html"><a href="dentroefuoriR.html#e-andato-tutto-bene"><i class="fa fa-check"></i><b>5.6.4</b> E’ andato tutto bene?</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="dentroefuoriR.html"><a href="dentroefuoriR.html#lavorare-con-i-nomi-dei-file-e-le-directory."><i class="fa fa-check"></i><b>5.7</b> Lavorare con i nomi dei file e le directory.</a></li>
<li class="chapter" data-level="5.8" data-path="dentroefuoriR.html"><a href="dentroefuoriR.html#app1sintassi"><i class="fa fa-check"></i><b>5.8</b> <strong>Appendice 1</strong>. <em>Un piccolo dettaglio sulla sintassi.</em></a></li>
<li class="chapter" data-level="5.9" data-path="dentroefuoriR.html"><a href="dentroefuoriR.html#app2finqui"><i class="fa fa-check"></i><b>5.9</b> <strong>Appendice 2</strong>. <em>Se sei arrivat* fin qui…</em></a></li>
<li class="chapter" data-level="5.10" data-path="dentroefuoriR.html"><a href="dentroefuoriR.html#altrerisdentrofuori"><i class="fa fa-check"></i><b>5.10</b> Altre risorse.</a>
<ul>
<li class="chapter" data-level="5.10.1" data-path="dentroefuoriR.html"><a href="dentroefuoriR.html#risorse-in-inglese.-3"><i class="fa fa-check"></i><b>5.10.1</b> Risorse in inglese.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="grafica.html"><a href="grafica.html"><i class="fa fa-check"></i><b>6</b> Introduzione alla grafica scientifica con R</a>
<ul>
<li class="chapter" data-level="6.1" data-path="grafica.html"><a href="grafica.html#cosa-cè-da-imparare-in-questo-capitolo.-5"><i class="fa fa-check"></i><b>6.1</b> Cosa c’è da imparare in questo capitolo.</a></li>
<li class="chapter" data-level="6.2" data-path="grafica.html"><a href="grafica.html#igraficifattibene"><i class="fa fa-check"></i><b>6.2</b> I grafici, fatti bene.</a></li>
<li class="chapter" data-level="6.3" data-path="grafica.html"><a href="grafica.html#sistemigrafici"><i class="fa fa-check"></i><b>6.3</b> I sistemi grafici in R.</a></li>
<li class="chapter" data-level="6.4" data-path="grafica.html"><a href="grafica.html#visualizzare-o-salvare-i-grafici-i-device."><i class="fa fa-check"></i><b>6.4</b> Visualizzare o salvare i grafici: i device.</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="grafica.html"><a href="grafica.html#devicegrafici"><i class="fa fa-check"></i><b>6.4.1</b> Salvare i grafici: i file come device grafici.</a></li>
<li class="chapter" data-level="6.4.2" data-path="grafica.html"><a href="grafica.html#ggsave"><i class="fa fa-check"></i><b>6.4.2</b> Salvare i grafici di <code>ggplot2</code> con <code>ggsave</code>.</a></li>
<li class="chapter" data-level="6.4.3" data-path="grafica.html"><a href="grafica.html#le-dimensioni-del-device-e-le-opzioni-grafiche."><i class="fa fa-check"></i><b>6.4.3</b> <em>Le dimensioni del device e le opzioni grafiche.</em></a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="grafica.html"><a href="grafica.html#r-a-colori."><i class="fa fa-check"></i><b>6.5</b> R, a colori.</a></li>
<li class="chapter" data-level="6.6" data-path="grafica.html"><a href="grafica.html#graficaggplot2"><i class="fa fa-check"></i><b>6.6</b> La grammatica della grafica con ggplot2.</a></li>
<li class="chapter" data-level="6.7" data-path="grafica.html"><a href="grafica.html#grafqual"><i class="fa fa-check"></i><b>6.7</b> Grafici per variabili qualitative.</a>
<ul>
<li class="chapter" data-level="6.7.1" data-path="grafica.html"><a href="grafica.html#diagrammi-a-barre."><i class="fa fa-check"></i><b>6.7.1</b> Diagrammi a barre.</a></li>
<li class="chapter" data-level="6.7.2" data-path="grafica.html"><a href="grafica.html#fare-di-più-con-i-grafici-per-variabili-qualitative."><i class="fa fa-check"></i><b>6.7.2</b> <em>Fare di più con i grafici per variabili qualitative.</em></a></li>
</ul></li>
<li class="chapter" data-level="6.8" data-path="grafica.html"><a href="grafica.html#grafquant"><i class="fa fa-check"></i><b>6.8</b> Grafici per variabili quantitative.</a>
<ul>
<li class="chapter" data-level="6.8.1" data-path="grafica.html"><a href="grafica.html#istogrammi-e-altre-rappresentazioni-della-densità."><i class="fa fa-check"></i><b>6.8.1</b> Istogrammi e altre rappresentazioni della densità.</a></li>
<li class="chapter" data-level="6.8.2" data-path="grafica.html"><a href="grafica.html#boxplot"><i class="fa fa-check"></i><b>6.8.2</b> Boxplot.</a></li>
<li class="chapter" data-level="6.8.3" data-path="grafica.html"><a href="grafica.html#rappresentazioni-di-indicatori-di-tendenza-centrale-e-di-variabilità."><i class="fa fa-check"></i><b>6.8.3</b> Rappresentazioni di indicatori di tendenza centrale e di variabilità.</a></li>
<li class="chapter" data-level="6.8.4" data-path="grafica.html"><a href="grafica.html#scatterplots"><i class="fa fa-check"></i><b>6.8.4</b> Grafici a dispersione.</a></li>
<li class="chapter" data-level="6.8.5" data-path="grafica.html"><a href="grafica.html#personalizzare-i-grafici-con-ggplot2."><i class="fa fa-check"></i><b>6.8.5</b> <em>Personalizzare i grafici con ggplot2.</em></a></li>
<li class="chapter" data-level="6.8.6" data-path="grafica.html"><a href="grafica.html#estensionigg"><i class="fa fa-check"></i><b>6.8.6</b> <em>Estensioni per ggplot2.</em></a></li>
<li class="chapter" data-level="6.8.7" data-path="grafica.html"><a href="grafica.html#qplot"><i class="fa fa-check"></i><b>6.8.7</b> <em>Veloce veloce: qplot()</em></a></li>
</ul></li>
<li class="chapter" data-level="6.9" data-path="grafica.html"><a href="grafica.html#graficabase"><i class="fa fa-check"></i><b>6.9</b> <em>La grafica di base in R: un salvagente?</em></a></li>
<li class="chapter" data-level="6.10" data-path="grafica.html"><a href="grafica.html#altrerisgraf"><i class="fa fa-check"></i><b>6.10</b> Altre risorse.</a>
<ul>
<li class="chapter" data-level="6.10.1" data-path="grafica.html"><a href="grafica.html#risorse-in-inglese.-4"><i class="fa fa-check"></i><b>6.10.1</b> Risorse in inglese.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="statdesc.html"><a href="statdesc.html"><i class="fa fa-check"></i><b>7</b> Esplorare con i numeri</a>
<ul>
<li class="chapter" data-level="7.1" data-path="statdesc.html"><a href="statdesc.html#cosa-cè-da-imparare-in-questo-capitolo.-6"><i class="fa fa-check"></i><b>7.1</b> Cosa c’è da imparare in questo capitolo.</a></li>
<li class="chapter" data-level="7.2" data-path="statdesc.html"><a href="statdesc.html#una-piccola-premessa-gruppi-livelli-sottoinsiemi."><i class="fa fa-check"></i><b>7.2</b> Una piccola premessa: gruppi, livelli, sottoinsiemi.</a></li>
<li class="chapter" data-level="7.3" data-path="statdesc.html"><a href="statdesc.html#statcontinui"><i class="fa fa-check"></i><b>7.3</b> Statistiche riassuntive per dati continui.</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="statdesc.html"><a href="statdesc.html#misuretendcentrale"><i class="fa fa-check"></i><b>7.3.1</b> Misure di tendenza centrale e di variabilità.</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="statdesc.html"><a href="statdesc.html#altre-funzioni-utili."><i class="fa fa-check"></i><b>7.4</b> <em>Altre funzioni utili.</em></a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="statdesc.html"><a href="statdesc.html#lavorare-sui-vettori."><i class="fa fa-check"></i><b>7.4.1</b> <em>Lavorare sui vettori.</em></a></li>
<li class="chapter" data-level="7.4.2" data-path="statdesc.html"><a href="statdesc.html#funzioni-che-producono-statistiche-riassuntive."><i class="fa fa-check"></i><b>7.4.2</b> <em>Funzioni che producono statistiche riassuntive.</em></a></li>
<li class="chapter" data-level="7.4.3" data-path="statdesc.html"><a href="statdesc.html#statsummarise"><i class="fa fa-check"></i><b>7.4.3</b> Statistiche, ordinate.</a></li>
<li class="chapter" data-level="7.4.4" data-path="statdesc.html"><a href="statdesc.html#statgruppi"><i class="fa fa-check"></i><b>7.4.4</b> Statistiche riassuntive per gruppi.</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="statdesc.html"><a href="statdesc.html#enormale"><i class="fa fa-check"></i><b>7.5</b> Ma è normale?</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="statdesc.html"><a href="statdesc.html#normal-probability-plot."><i class="fa fa-check"></i><b>7.5.1</b> Normal probability plot.</a></li>
<li class="chapter" data-level="7.5.2" data-path="statdesc.html"><a href="statdesc.html#testnorm"><i class="fa fa-check"></i><b>7.5.2</b> Test statistici per la normalità.</a></li>
<li class="chapter" data-level="7.5.3" data-path="statdesc.html"><a href="statdesc.html#comefaremeglio"><i class="fa fa-check"></i><b>7.5.3</b> <em>Come fare di meglio con i risultati dei test</em>.</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="statdesc.html"><a href="statdesc.html#intervalli-di-confidenza."><i class="fa fa-check"></i><b>7.6</b> Intervalli di confidenza.</a></li>
<li class="chapter" data-level="7.7" data-path="statdesc.html"><a href="statdesc.html#statdesccat"><i class="fa fa-check"></i><b>7.7</b> Riassumere i dati per le variabili categoriche.</a>
<ul>
<li class="chapter" data-level="7.7.1" data-path="statdesc.html"><a href="statdesc.html#tabelle-di-frequenza-e-contingenza."><i class="fa fa-check"></i><b>7.7.1</b> Tabelle di frequenza e contingenza.</a></li>
<li class="chapter" data-level="7.7.2" data-path="statdesc.html"><a href="statdesc.html#gmosaico"><i class="fa fa-check"></i><b>7.7.2</b> <em>Grafici a mosaico</em>.</a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="statdesc.html"><a href="statdesc.html#veloceveloce"><i class="fa fa-check"></i><b>7.8</b> <em>Veloce veloce</em></a></li>
<li class="chapter" data-level="7.9" data-path="statdesc.html"><a href="statdesc.html#altrerisstatdesc"><i class="fa fa-check"></i><b>7.9</b> Altre risorse.</a>
<ul>
<li class="chapter" data-level="7.9.1" data-path="statdesc.html"><a href="statdesc.html#risorse-in-italiano.-3"><i class="fa fa-check"></i><b>7.9.1</b> Risorse in italiano.</a></li>
<li class="chapter" data-level="7.9.2" data-path="statdesc.html"><a href="statdesc.html#risorse-in-inglese.-5"><i class="fa fa-check"></i><b>7.9.2</b> Risorse in inglese.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="reportR.html"><a href="reportR.html"><i class="fa fa-check"></i><b>8</b> Creare report e notebook con R.</a>
<ul>
<li class="chapter" data-level="8.1" data-path="reportR.html"><a href="reportR.html#cosa-cè-da-imparare-in-questo-capitolo.-7"><i class="fa fa-check"></i><b>8.1</b> Cosa c’è da imparare in questo capitolo.</a></li>
<li class="chapter" data-level="8.2" data-path="reportR.html"><a href="reportR.html#reportminimo"><i class="fa fa-check"></i><b>8.2</b> Il minimo indispensabile.</a></li>
<li class="chapter" data-level="8.3" data-path="reportR.html"><a href="reportR.html#gli-elementi-di-un-report-in-r-markdown."><i class="fa fa-check"></i><b>8.3</b> <em>Gli elementi di un report in R Markdown.</em></a></li>
<li class="chapter" data-level="8.4" data-path="reportR.html"><a href="reportR.html#altri-formati-di-documento-con-r-markdown."><i class="fa fa-check"></i><b>8.4</b> <em>Altri formati di documento con R Markdown.</em></a></li>
<li class="chapter" data-level="8.5" data-path="reportR.html"><a href="reportR.html#quarto."><i class="fa fa-check"></i><b>8.5</b> <em>Quarto.</em></a></li>
<li class="chapter" data-level="8.6" data-path="reportR.html"><a href="reportR.html#altrerisreport"><i class="fa fa-check"></i><b>8.6</b> Altre risorse.</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="reportR.html"><a href="reportR.html#risorse-in-italiano.-4"><i class="fa fa-check"></i><b>8.6.1</b> Risorse in italiano.</a></li>
<li class="chapter" data-level="8.6.2" data-path="reportR.html"><a href="reportR.html#risorse-in-inglese.-6"><i class="fa fa-check"></i><b>8.6.2</b> Risorse in inglese.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="wrangling.html"><a href="wrangling.html"><i class="fa fa-check"></i><b>9</b> Lottare con i dati.</a>
<ul>
<li class="chapter" data-level="9.1" data-path="wrangling.html"><a href="wrangling.html#cosa-cè-da-imparare-in-questo-capitolo.-8"><i class="fa fa-check"></i><b>9.1</b> Cosa c’è da imparare in questo capitolo.</a></li>
<li class="chapter" data-level="9.2" data-path="wrangling.html"><a href="wrangling.html#rendere-tidy-i-dati."><i class="fa fa-check"></i><b>9.2</b> Rendere tidy i dati.</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="wrangling.html"><a href="wrangling.html#tidyresh"><i class="fa fa-check"></i><b>9.2.1</b> Riordinare con <code>tidyr</code> e <code>dplyr</code>: esempio minimo.</a></li>
<li class="chapter" data-level="9.2.2" data-path="wrangling.html"><a href="wrangling.html#funzioni-avanzate-con-tidyr."><i class="fa fa-check"></i><b>9.2.2</b> <em>Funzioni avanzate con <code>tidyr</code>.</em></a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="wrangling.html"><a href="wrangling.html#dplyr"><i class="fa fa-check"></i><b>9.3</b> il cavallo di battaglia del <code>data wrangling</code>: <code>dplyr</code>.</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="wrangling.html"><a href="wrangling.html#filterselect"><i class="fa fa-check"></i><b>9.3.1</b> Estrarre gruppi di righe o colonne.</a></li>
<li class="chapter" data-level="9.3.2" data-path="wrangling.html"><a href="wrangling.html#riordinare-i-dati."><i class="fa fa-check"></i><b>9.3.2</b> Riordinare i dati.</a></li>
<li class="chapter" data-level="9.3.3" data-path="wrangling.html"><a href="wrangling.html#muta"><i class="fa fa-check"></i><b>9.3.3</b> Trasformare con <code>mutate()</code>.</a></li>
<li class="chapter" data-level="9.3.4" data-path="wrangling.html"><a href="wrangling.html#summarise"><i class="fa fa-check"></i><b>9.3.4</b> Riassumere i dati con <code>summarise()</code>.</a></li>
<li class="chapter" data-level="9.3.5" data-path="wrangling.html"><a href="wrangling.html#join"><i class="fa fa-check"></i><b>9.3.5</b> Database e tabelle relazionali: unire tabelle con _join.</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="wrangling.html"><a href="wrangling.html#strutturecontrollo"><i class="fa fa-check"></i><b>9.4</b> Strutture di controllo.</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="wrangling.html"><a href="wrangling.html#loop"><i class="fa fa-check"></i><b>9.4.1</b> <em>Loop (o cicli) e cose simili.</em></a></li>
<li class="chapter" data-level="9.4.2" data-path="wrangling.html"><a href="wrangling.html#functional"><i class="fa fa-check"></i><b>9.4.2</b> <em>Un’alternativa (veloce e ordinata) ai loop: i “functional”.</em></a></li>
<li class="chapter" data-level="9.4.3" data-path="wrangling.html"><a href="wrangling.html#ifelsestat"><i class="fa fa-check"></i><b>9.4.3</b> <em>Esecuzione condizionale.</em></a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="wrangling.html"><a href="wrangling.html#Soluzione"><i class="fa fa-check"></i><b>9.5</b> La soluzione dell’esercizio.</a></li>
<li class="chapter" data-level="9.6" data-path="wrangling.html"><a href="wrangling.html#altreriswrangling"><i class="fa fa-check"></i><b>9.6</b> Altre risorse.</a>
<ul>
<li class="chapter" data-level="9.6.1" data-path="wrangling.html"><a href="wrangling.html#risorse-in-italiano.-5"><i class="fa fa-check"></i><b>9.6.1</b> Risorse in italiano.</a></li>
<li class="chapter" data-level="9.6.2" data-path="wrangling.html"><a href="wrangling.html#risorse-in-inglese.-7"><i class="fa fa-check"></i><b>9.6.2</b> Risorse in inglese.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="citazioni-crediti-copyright-ringraziamenti..html"><a href="citazioni-crediti-copyright-ringraziamenti..html"><i class="fa fa-check"></i><b>10</b> Citazioni, crediti, copyright, ringraziamenti.</a>
<ul>
<li class="chapter" data-level="10.1" data-path="citazioni-crediti-copyright-ringraziamenti..html"><a href="citazioni-crediti-copyright-ringraziamenti..html#citazioni."><i class="fa fa-check"></i><b>10.1</b> Citazioni.</a></li>
<li class="chapter" data-level="" data-path="citazioni-crediti-copyright-ringraziamenti..html"><a href="citazioni-crediti-copyright-ringraziamenti..html#credits-e-copyright."><i class="fa fa-check"></i>Credits e copyright.</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">pigR: R, per pigri</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="datioggetti" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">4</span> Dati, oggetti, funzioni (e tutto il resto)<a href="datioggetti.html#datioggetti" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>v1.3.4 30/10/2023</p>
<div id="cosa-cè-da-imparare-in-questo-capitolo.-3" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Cosa c’è da imparare in questo capitolo.<a href="datioggetti.html#cosa-cè-da-imparare-in-questo-capitolo.-3" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Che ti piaccia o no, R è un linguaggio e, se vuoi imparare ad usarlo bene, devi impararne almeno i rudimenti. Molti testi introduttivi recentissimi, inclusi <a href="https://it.r4ds.hadley.nz">R for data science</a>, <a href="https://benwhalley.github.io/just-enough-r/">Just enough R</a>, <a href="https://moderndive.netlify.app">ModernDive</a>, o anche cose più eterodosse come <a href="https://bookdown.org/ndphillips/YaRrr/">YaRrr!</a> tendono a confinare gli elementi di base sulla struttura del linguaggio e la sua sintassi in pochi paragrafi, introducendo poi le funzioni più importanti man mano che se ne presenta la necessità. In effetti, soprattutto se si decide di usare quel particolare dialetto di R creato dal <a href="https://www.tidyverse.org">tidyverse</a>, un insieme di pacchetti per la scienza dei dati, molto utilizzati, una volta compresi alcuni concetti di base sulle tabelle (data frame in R) e altre strutture di dati si possono certamente affrontare in maniera efficace aspetti come la visualizzazione grafica, le analisi statistiche di base, etc. senza troppe complicazioni.<br />
Come sempre, nella serena consapevolezza che i miei potenziali lettori sono fondamentalmente pigRi ho deciso di fare qualche piccolo compromesso e di strutturare il capitolo in modo che possa essere fruito per parti, e anche in momenti differenti.
Quindi:</p>
<ul>
<li><p>se proprio hai fretta o, semplicemente, se hai voglia di lavorare il meno possibile:</p>
<ul>
<li><p>leggi (rapidamente, per carità!) la premessa <a href="datioggetti.html#premessa2">4.1.2</a>, con qualche richiamo sulla terminologia relativa a dati, variabili, etc.</p></li>
<li><p>leggi attentamente almeno la sezione <a href="datioggetti.html#strutturedati">4.4</a> sulle strutture di dati: puoi saltare alcuni paagrafi se vuoi; saranno chiaramente indicati</p></li>
<li><p>leggi, almeno superficialmente, la sezione <a href="datioggetti.html#indsel">4.8</a> su indirizzamento e selezione di sottoinsiemi di dati (sono concetti che verranno richiamati più e più volte nei capitoli successivi)</p></li>
</ul></li>
<li><p>se hai tempo e voglia, e, soprattutto, se sei veramente interessat* a programmare in R, leggi con attenzione tutto il resto e sentiti liber* di ritornare a questo capitolo mano a mano che prosegui nella lettura.</p></li>
</ul>
<div id="premessa-1-esperimenti-e-osservazioni." class="section level3 hasAnchor" number="4.1.1">
<h3><span class="header-section-number">4.1.1</span> Premessa 1: esperimenti e osservazioni.<a href="datioggetti.html#premessa-1-esperimenti-e-osservazioni." class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Questo materiale è destinato soprattutto a chi si occupa di scienze sperimentali e in particolare in campi legati alla biologia, biotecnologia, scienze naturali e scienze agrarie. Se sei quindi un* student* di magistrale (improbabile), un* dottorand* di ricerca, un assegnista o un* borsista di ricerca, un* ricercat* i tuoi dati saranno il risultato di esperimenti più o meno complessi. Lo stesso processo che porta alla raccolta dei dati e alla loro analisi è, o dovrebbe essere, ben strutturato e relativamente complesso (figura <a href="datioggetti.html#fig:espdati">4.1</a>).</p>
<hr />
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:espdati"></span>
<img src="images/da_ipotesi_a_dati.jpg" alt="Dall'ipotesi sperimentale alle conclusioni." width="90%" />
<p class="caption">
Figura 4.1: Dall’ipotesi sperimentale alle conclusioni.
</p>
</div>
<hr />
<p>Il risultato dell’esperimento sono in genere una o più tabelle di dati, più o meno grandi. Se ti occupi di bioinformatica o chemiometria è abbastanza probabile che le tabelle di dati siano <strong>veramente</strong> grandi o che, addirittura, tu ti trovi a condurre, in una prima fase, delle analisi sperimentali su flussi di dati, magari generati da complessi di sensori, che hanno le caratteristiche dei big data (volume, varietà, velocità, ma anche valore e veracità). Per, esempio, se ti stai occupando di sviluppare un metodo per identificare i determinanti della qualità dei formaggi<a href="#fn66" class="footnote-ref" id="fnref66"><sup>66</sup></a> potresti trovarti a disporre di tabelle contenenti dati di composizione bruta (grasso, proteine, etc., in genere da poche a poche decine di variabili), dati sulla composizione in composti volatili (centinaia di variabili), dati spettroscopici (NIR, FTIR, etc., centinaia o migliaia di potenziali variabili), dati sulla composizione del microbiota (potenzialmente centinaia di variabili) su un numero di osservazioni (i formaggi che analizzi) molto inferiore a quello delle variabili. Ammesso che tu abbia progettato ed eseguito correttamente l’esperimento (o, semplicemente, stia utilizzando un approccio più o meno descrittivo e quasi-sperimentale) i tuoi dati saranno invariabilmente affetti da bias (magari legati a strumenti mal calibrati), incertezza (magari dovuta a scarsa sensibilità degli strumenti o degli approcci sperimentali) e variabilità (i dati chimico-biologici sono, per loro natura variabili). Vorrai quindi rappresentare adeguatamente questi dati, riassumendoli, ed estrarne l’informazione rilevante relativamente all’ipotesi scientifica che hai formulato. Se stai usando approcci multivariati complessi, oltre a bias, incertezza e variabilità, le informazioni scientificamente e tecnologicamente irrilevanti potrebbero essere nascosti in mezzo ad una marea di informazioni irrilevanti o non interpretabili: il segnale che ti interessa potrebbe essere il classico ago nel pagliaio (figura <a href="datioggetti.html#fig:bigdata">4.2</a>).</p>
<hr />
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:bigdata"></span>
<img src="images/big_data.jpg" alt=" Big data e scienze sperimentali: l'ago nel pagliaio. La figura è modificata da Szymańska, E., 2018." width="90%" />
<p class="caption">
Figura 4.2:  Big data e scienze sperimentali: l’ago nel pagliaio. La figura è modificata da Szymańska, E., 2018.
</p>
</div>
<hr />
<p>Mentre l’analisi statistica e grafica possono aiutarti a rappresentare correttamente e onestamente i dati e a estrarne un senso, ricorda sempre che sono le ipotesi scientifiche (basate su una robusta conoscenza del campo d’indagine) a guidare la raccolta dei dati e la loro interpretazione e che non c’è analisi che possa migliorare dei dati di cattiva qualità o del tutto irrilevanti per l’ipotesi sperimentale.</p>
</div>
<div id="premessa2" class="section level3 hasAnchor" number="4.1.2">
<h3><span class="header-section-number">4.1.2</span> Premessa 2. Misure e dati, osservazioni e variabili, tabelle.<a href="datioggetti.html#premessa2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Credo di aver già detto che questo non è, e non aspira ad essere, un libro di statistica. Ma se ti trovi nella condizione di non aver mai letto un libro di statistica è bene definire alcuni termini senza i quali è difficile parlare di calcolo statistico con R.
In questo libro cercherò di usare prevalentemente set di dati disponibili con la versione base di R o inclusi nei pacchetti più importanti. Per forza di cose, alcuni di essi non saranno dati legati alla biologia o alle biotecnologie, ma spero che un effetto secondario della lettura di questo libro possa essere quello di rendere un po’ più flessibile il tuo atteggiamento verso i dati in generale.<br />
Per iniziare cominciamo ad esplorare qualche semplice set di dati.<br />
<code>iris</code> è un dataset classico della statistica multivariata. Mostra alcune misure della lunghezza e larghezza di petali e sepali in tre specie del genere <em>Iris</em>.<br />
Il chunk di codice successivo mostra come aprire e visualizzare (nell’interno di questo documento) questo set di dati.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="datioggetti.html#cb45-1" tabindex="-1"></a><span class="co"># apre il dataset, che è incluso nell&#39;installazione di base</span></span>
<span id="cb45-2"><a href="datioggetti.html#cb45-2" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;iris&quot;</span>)</span>
<span id="cb45-3"><a href="datioggetti.html#cb45-3" tabindex="-1"></a><span class="co"># mostra il dataset nel tab View del pannello Source in RStudio. Rimuovi il segno </span></span>
<span id="cb45-4"><a href="datioggetti.html#cb45-4" tabindex="-1"></a><span class="co"># del commento per eseguire il comando</span></span>
<span id="cb45-5"><a href="datioggetti.html#cb45-5" tabindex="-1"></a><span class="co"># View(iris)</span></span>
<span id="cb45-6"><a href="datioggetti.html#cb45-6" tabindex="-1"></a><span class="co"># mostra l&#39;aiuto del data set, in alternativa ?iris</span></span>
<span id="cb45-7"><a href="datioggetti.html#cb45-7" tabindex="-1"></a><span class="co"># help(iris)</span></span>
<span id="cb45-8"><a href="datioggetti.html#cb45-8" tabindex="-1"></a><span class="co"># stampa le prime 20 righe del data set nella Console o, in questo caso, nell&#39;interno del documento</span></span>
<span id="cb45-9"><a href="datioggetti.html#cb45-9" tabindex="-1"></a><span class="fu">head</span>(iris,<span class="dv">20</span>)</span></code></pre></div>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1           5.1         3.5          1.4         0.2  setosa
## 2           4.9         3.0          1.4         0.2  setosa
## 3           4.7         3.2          1.3         0.2  setosa
## 4           4.6         3.1          1.5         0.2  setosa
## 5           5.0         3.6          1.4         0.2  setosa
## 6           5.4         3.9          1.7         0.4  setosa
## 7           4.6         3.4          1.4         0.3  setosa
## 8           5.0         3.4          1.5         0.2  setosa
## 9           4.4         2.9          1.4         0.2  setosa
## 10          4.9         3.1          1.5         0.1  setosa
## 11          5.4         3.7          1.5         0.2  setosa
## 12          4.8         3.4          1.6         0.2  setosa
## 13          4.8         3.0          1.4         0.1  setosa
## 14          4.3         3.0          1.1         0.1  setosa
## 15          5.8         4.0          1.2         0.2  setosa
## 16          5.7         4.4          1.5         0.4  setosa
## 17          5.4         3.9          1.3         0.4  setosa
## 18          5.1         3.5          1.4         0.3  setosa
## 19          5.7         3.8          1.7         0.3  setosa
## 20          5.1         3.8          1.5         0.3  setosa</code></pre>
<p>Useremo spesso il comando <code>head()</code>, che è un modo rapido per dare uno sguardo ad un data set senza riempire la console; se vuoi inviare alla console le ultime 20 righe puoi usare</p>
<pre><code>&gt;tail(iris, 20)</code></pre>
<p>nota che l’alternativa è <code>print(iris)</code>; il comando print ha varie opzioni utili, fra cui alcune che regolano giustificazione e numero di cifre significative. Prova, per esempio:</p>
<pre><code>&gt; print(iris, digits = 2)</code></pre>
<p>Se vuoi visualizzare il set di dati in RStudio, vedere l’aiuto e “stampare” il data set nella console scrivi i seguenti comandi nella Console (ricordati che non devi scrivere <code>&gt;</code>, perché il prompt appare automaticamente nella Console ogni volta che premi invio e completi un comando).</p>
<pre><code>&gt;data(iris)
&gt;View(iris)
&gt;?iris
&gt;iris</code></pre>
</div>
<div id="anatab" class="section level3 hasAnchor" number="4.1.3">
<h3><span class="header-section-number">4.1.3</span> Anatomia di una tabella.<a href="datioggetti.html#anatab" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Anche se magari queste cose sono scontate, è bene scendere un pochino più in dettaglio nella struttura di questa tabella.</p>
<hr />
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:figiris"></span>
<img src="images/tabella_iris.jpg" alt="Anatomia di una tabella: alcune caratteristiche morfologiche dei fiori di tre specie di iris." width="90%" />
<p class="caption">
Figura 4.3: Anatomia di una tabella: alcune caratteristiche morfologiche dei fiori di tre specie di iris.
</p>
</div>
<hr />
<p>Iris è un dataset storico, utilizzato, fra le altre cose per dimostrare alcune tecniche di analisi multivariata, come l’analisi discriminante lineare. E’ una semplice tabella che contiene 5 variabili<a href="#fn67" class="footnote-ref" id="fnref67"><sup>67</sup></a>:</p>
<ul>
<li><p>quattro <strong>variabili quantitative continue</strong><a href="#fn68" class="footnote-ref" id="fnref68"><sup>68</sup></a>, per <strong>scala di rapporti</strong><a href="#fn69" class="footnote-ref" id="fnref69"><sup>69</sup></a>: lunghezza e larghezza dei petali, lunghezza e larghezza dei sepali;</p></li>
<li><p>una <strong>variabile qualitativa nominale</strong>: il nome delle tre specie del genere <em>Iris</em> messe a confronto. Questa variabile può assumere un numero finito di valori o categorie che non hanno nessun ordine ovvio. In R questo tipo di variabile è chiamata <strong>“fattore”</strong>.</p></li>
</ul>
<p>Le variabili, quindi, corrispondono alle colonne della tabella e le singole osservazioni (eseguite in questo caso ciascuna su una singola unità campionaria) alle righe<a href="#fn70" class="footnote-ref" id="fnref70"><sup>70</sup></a>. Una singola misura è identificata, in questo caso, dal numero di riga e di colonna o dal numero di riga e dal nome della variabile. Analogamente, ci possiamo riferire a sottoinsiemi di dati usando vettori di numeri di righe e colonne (vedi sezione <a href="datioggetti.html#indsel">4.8</a>.</p>
<p>I dataset di R e delle sue librerie forniscono una messe enorme di esempi. Un dataset che utiizzeremo molto è <code>Arthritis</code><a href="#fn71" class="footnote-ref" id="fnref71"><sup>71</sup></a>. <code>Arthritis</code> appartiene alla libreria <code>vcd</code>: per renderlo disponibile è necessario installare e caricare prima questa libreria.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="datioggetti.html#cb50-1" tabindex="-1"></a><span class="co"># carica la libreria (in realtà questo avviene in maniera automatica nel setup </span></span>
<span id="cb50-2"><a href="datioggetti.html#cb50-2" tabindex="-1"></a><span class="co"># dello script usato per generare questo capitolo)</span></span>
<span id="cb50-3"><a href="datioggetti.html#cb50-3" tabindex="-1"></a><span class="fu">library</span>(vcd)</span>
<span id="cb50-4"><a href="datioggetti.html#cb50-4" tabindex="-1"></a><span class="co"># carica il dataset</span></span>
<span id="cb50-5"><a href="datioggetti.html#cb50-5" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;Arthritis&quot;</span>)</span>
<span id="cb50-6"><a href="datioggetti.html#cb50-6" tabindex="-1"></a><span class="co"># stampa il data set nella Console o, in questo caso, nell&#39;interno del documento</span></span>
<span id="cb50-7"><a href="datioggetti.html#cb50-7" tabindex="-1"></a><span class="fu">head</span>(Arthritis,<span class="dv">20</span>)</span></code></pre></div>
<pre><code>##    ID Treatment    Sex Age Improved
## 1  57   Treated   Male  27     Some
## 2  46   Treated   Male  29     None
## 3  77   Treated   Male  30     None
## 4  17   Treated   Male  32   Marked
## 5  36   Treated   Male  46   Marked
## 6  23   Treated   Male  58   Marked
## 7  75   Treated   Male  59     None
## 8  39   Treated   Male  59   Marked
## 9  33   Treated   Male  63     None
## 10 55   Treated   Male  63     None
## 11 30   Treated   Male  64     None
## 12  5   Treated   Male  64     Some
## 13 63   Treated   Male  69     None
## 14 83   Treated   Male  70   Marked
## 15 66   Treated Female  23     None
## 16 40   Treated Female  32     None
## 17  6   Treated Female  37     Some
## 18  7   Treated Female  41     None
## 19 72   Treated Female  41   Marked
## 20 37   Treated Female  48     None</code></pre>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="datioggetti.html#cb52-1" tabindex="-1"></a><span class="co"># più avanti vedremo delle funzioni che permettono di personalizzare l&#39;aspetto</span></span>
<span id="cb52-2"><a href="datioggetti.html#cb52-2" tabindex="-1"></a><span class="co"># di una tabella in un documento, in un report o una presentazione</span></span></code></pre></div>
<p>Ricorda che se avessi voluto mostrare il data set nel pannello Source avresti potuto usare <code>View(Arthritis)</code> e se avessi voluto sapere di più su questo data set apresti potuto usare il comando <code>?Arthritis</code>.
In questo caso si tratta di un dataset che riporta i dati di un test clinico. La prima variabile, <code>ID</code>, nonostante sia in apparenza numerica (in questo caso si tratta di interi) non è altro che un numero che individua univocamente un singolo paziente; è quindi anch’essa una <strong>variabile qualitativa nominale</strong> (un fattore non ordinato), ma in questo caso i valori sono unici, e non ha senso usare un fattore (che ha un numero limitato di livelli che possono comparire più di una volta). La variabile <code>Treatment</code> è uno dei fattori del disegno sperimentale: è una variabile nominale che ha solo due valori. Lo stesso vale per la variabile <code>Sex</code>. La variabile <code>Age</code> è una <strong>variabile quantitativa</strong>; tecnicamente può assumere valori continui, ma qui è solo riportata l’età in anni e non, per esempio, in nanosecondi. Quando più avanti parleremo di disegni sperimentali, vedrai che questo è un esperimento sbilanciato (non c’è un uguale numero di pazienti per trattamento) e possiamo immaginare che pazienti, di diverso sesso e età siano stati assegnati in maniera casuale<a href="#fn72" class="footnote-ref" id="fnref72"><sup>72</sup></a> a due gruppi (<code>Treated</code>, che hanno ricevuto un trattamento per l’artrite che si immagina debba migliorare il quadro clinico del paziente e <code>Placebo</code>, che hanno ricevuto una sostanza innocua). L’ultima variabile, <code>Improved</code>, è una <strong>variabile qualitativa ordinale</strong> (un fattore ordinato) con tre livelli<a href="#fn73" class="footnote-ref" id="fnref73"><sup>73</sup></a>.</p>
</div>
<div id="un-piccolo-esercizio." class="section level3 hasAnchor" number="4.1.4">
<h3><span class="header-section-number">4.1.4</span> Un piccolo esercizio.<a href="datioggetti.html#un-piccolo-esercizio." class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Usando lo stesso tipo di comandi prova ad aprire (e a stampare a console) i seguenti dataset e a leggerne l’aiuto:</p>
<ul>
<li><p><code>mtcars</code> o, se preferisci, <code>ggplot2::mpg</code><a href="#fn74" class="footnote-ref" id="fnref74"><sup>74</sup></a></p></li>
<li><p><code>DNase</code></p></li>
<li><p><code>Orange</code></p></li>
<li><p><code>InsectSprays</code></p></li>
<li><p><code>CO2</code></p></li>
</ul>
<p>Che tipi di variabili contengono? Ti sembra che siano dati ricavati da semplici osservazioni o risultati di un esperimento realizzato secondo un preciso disegno sperimentale?
Più avanti vedremo anche strutture di dati più complesse, divise in varie tabelle o in oggetti a più di due dimensioni<a href="#fn75" class="footnote-ref" id="fnref75"><sup>75</sup></a></p>
<ul>
<li><p>prova ad esplorare le tabelle contenute nel pacchetto <code>nycflights13</code>, un esempio di dati organizzati come un database relazionale<a href="#fn76" class="footnote-ref" id="fnref76"><sup>76</sup></a></p></li>
<li><p>dai uno sguardo al dataset <code>Titanic</code>, un esempio di tabella a più dimensioni, e <code>airquality</code>, che può essere organizzato come un array usando la variabile indice <code>Month</code><a href="#fn77" class="footnote-ref" id="fnref77"><sup>77</sup></a></p></li>
</ul>
</div>
<div id="tidyuntidydefinizione" class="section level3 hasAnchor" number="4.1.5">
<h3><span class="header-section-number">4.1.5</span> Tidy vs. untidy (tabelle ordinate e disordinate).<a href="datioggetti.html#tidyuntidydefinizione" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Chiunque, come docente, abbia visto una tabella prodotta da uno studente durante lo svolgimento di una tesi di laurea sperimentale sa cosa voglia dire “dati disordinati” (“untidy”). I dati disordinati sono difficili da visualizzare e analizzare e molti dei comandi che userò in questo libro si “aspettano” dati ordinati (“tidy”). Il concetto di “tidy data” è stato <a href="https://vita.had.co.nz/papers/tidy-data.pdf">descritto in maniera eccellente da Hadley Wickham</a>, una sorta di semidio del mondo di R. Per metterla in modo semplice, in un set di dati tidy:</p>
<ul>
<li><p>ogni colonna è una variabile</p></li>
<li><p>ogni riga è un’osservazione</p></li>
<li><p>ogni cella è una misura</p></li>
</ul>
<p>Molto spesso, in un set di dati “tidy” è facile individuare sottotabelle di dati “tidy”, identificate da combinazioni di valori di variabili qualitative. Pensate per esempio ai due dataset <code>iris</code> e <code>Arthritis</code>. Osservate le seguenti tabelle, riordinate per mettere in evidenza la struttura “tidy”.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="datioggetti.html#cb53-1" tabindex="-1"></a><span class="co"># non badate ai comandi, tutti del pacchetto dplyr appartenente al tidyverse, </span></span>
<span id="cb53-2"><a href="datioggetti.html#cb53-2" tabindex="-1"></a><span class="co"># imparerete come usarli nei capitoli successivi</span></span>
<span id="cb53-3"><a href="datioggetti.html#cb53-3" tabindex="-1"></a><span class="co"># se non lo avete già fatto prima caricate il pacchetto dplyr con</span></span>
<span id="cb53-4"><a href="datioggetti.html#cb53-4" tabindex="-1"></a><span class="co"># require(dplyr)</span></span>
<span id="cb53-5"><a href="datioggetti.html#cb53-5" tabindex="-1"></a><span class="co"># qui head() è usato per stampare alcune righe</span></span>
<span id="cb53-6"><a href="datioggetti.html#cb53-6" tabindex="-1"></a></span>
<span id="cb53-7"><a href="datioggetti.html#cb53-7" tabindex="-1"></a>Arthr <span class="ot">&lt;-</span> Arthritis <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(Treatment, Sex, Improved)</span>
<span id="cb53-8"><a href="datioggetti.html#cb53-8" tabindex="-1"></a><span class="fu">head</span>(Arthr,<span class="dv">20</span>)</span></code></pre></div>
<pre><code>##    ID Treatment    Sex Age Improved
## 53 80   Placebo Female  23     None
## 54 12   Placebo Female  30     None
## 55 29   Placebo Female  30     None
## 57 38   Placebo Female  32     None
## 59 51   Placebo Female  37     None
## 60 54   Placebo Female  44     None
## 61 76   Placebo Female  45     None
## 62 16   Placebo Female  46     None
## 63 69   Placebo Female  48     None
## 64 31   Placebo Female  49     None
## 65 20   Placebo Female  51     None
## 66 68   Placebo Female  53     None
## 67 81   Placebo Female  54     None
## 68  4   Placebo Female  54     None
## 71 49   Placebo Female  57     None
## 76 48   Placebo Female  61     None
## 78  3   Placebo Female  64     None
## 80 32   Placebo Female  66     None
## 81 42   Placebo Female  66     None
## 56 50   Placebo Female  31     Some</code></pre>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="datioggetti.html#cb55-1" tabindex="-1"></a>ir <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="dv">5</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)</span>
<span id="cb55-2"><a href="datioggetti.html#cb55-2" tabindex="-1"></a><span class="fu">head</span>(ir,<span class="dv">20</span>)</span></code></pre></div>
<pre><code>##    Species Sepal.Length Sepal.Width Petal.Length Petal.Width
## 1   setosa          5.1         3.5          1.4         0.2
## 2   setosa          4.9         3.0          1.4         0.2
## 3   setosa          4.7         3.2          1.3         0.2
## 4   setosa          4.6         3.1          1.5         0.2
## 5   setosa          5.0         3.6          1.4         0.2
## 6   setosa          5.4         3.9          1.7         0.4
## 7   setosa          4.6         3.4          1.4         0.3
## 8   setosa          5.0         3.4          1.5         0.2
## 9   setosa          4.4         2.9          1.4         0.2
## 10  setosa          4.9         3.1          1.5         0.1
## 11  setosa          5.4         3.7          1.5         0.2
## 12  setosa          4.8         3.4          1.6         0.2
## 13  setosa          4.8         3.0          1.4         0.1
## 14  setosa          4.3         3.0          1.1         0.1
## 15  setosa          5.8         4.0          1.2         0.2
## 16  setosa          5.7         4.4          1.5         0.4
## 17  setosa          5.4         3.9          1.3         0.4
## 18  setosa          5.1         3.5          1.4         0.3
## 19  setosa          5.7         3.8          1.7         0.3
## 20  setosa          5.1         3.8          1.5         0.3</code></pre>
<p>Notate come, scorrendo le tabelle, è possibile individuare facilmente le sottotabelle: in <code>iris</code> ogni valore della variabile <code>Species</code> definisce una sottotabella. In <code>Arthritis</code> ogni combinazione di una o più delle variabili <code>Treated</code>, <code>Sex</code> e <code>Improved</code> definisce una o più sottotabelle.<br />
Sfortunatamente, non tutti i dati sono “tidy”. Osservate il dataset <code>billboard</code> del pacchetto <code>tidyr</code>.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="datioggetti.html#cb57-1" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb57-2"><a href="datioggetti.html#cb57-2" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;billboard&quot;</span>)</span>
<span id="cb57-3"><a href="datioggetti.html#cb57-3" tabindex="-1"></a><span class="fu">head</span>(billboard,<span class="dv">25</span>)</span></code></pre></div>
<pre><code>## # A tibble: 25 × 79
##    artist     track date.entered   wk1   wk2   wk3   wk4   wk5   wk6   wk7   wk8
##    &lt;chr&gt;      &lt;chr&gt; &lt;date&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 2 Pac      Baby… 2000-02-26      87    82    72    77    87    94    99    NA
##  2 2Ge+her    The … 2000-09-02      91    87    92    NA    NA    NA    NA    NA
##  3 3 Doors D… Kryp… 2000-04-08      81    70    68    67    66    57    54    53
##  4 3 Doors D… Loser 2000-10-21      76    76    72    69    67    65    55    59
##  5 504 Boyz   Wobb… 2000-04-15      57    34    25    17    17    31    36    49
##  6 98^0       Give… 2000-08-19      51    39    34    26    26    19     2     2
##  7 A*Teens    Danc… 2000-07-08      97    97    96    95   100    NA    NA    NA
##  8 Aaliyah    I Do… 2000-01-29      84    62    51    41    38    35    35    38
##  9 Aaliyah    Try … 2000-03-18      59    53    38    28    21    18    16    14
## 10 Adams, Yo… Open… 2000-08-26      76    76    74    69    68    67    61    58
## # ℹ 15 more rows
## # ℹ 68 more variables: wk9 &lt;dbl&gt;, wk10 &lt;dbl&gt;, wk11 &lt;dbl&gt;, wk12 &lt;dbl&gt;,
## #   wk13 &lt;dbl&gt;, wk14 &lt;dbl&gt;, wk15 &lt;dbl&gt;, wk16 &lt;dbl&gt;, wk17 &lt;dbl&gt;, wk18 &lt;dbl&gt;,
## #   wk19 &lt;dbl&gt;, wk20 &lt;dbl&gt;, wk21 &lt;dbl&gt;, wk22 &lt;dbl&gt;, wk23 &lt;dbl&gt;, wk24 &lt;dbl&gt;,
## #   wk25 &lt;dbl&gt;, wk26 &lt;dbl&gt;, wk27 &lt;dbl&gt;, wk28 &lt;dbl&gt;, wk29 &lt;dbl&gt;, wk30 &lt;dbl&gt;,
## #   wk31 &lt;dbl&gt;, wk32 &lt;dbl&gt;, wk33 &lt;dbl&gt;, wk34 &lt;dbl&gt;, wk35 &lt;dbl&gt;, wk36 &lt;dbl&gt;,
## #   wk37 &lt;dbl&gt;, wk38 &lt;dbl&gt;, wk39 &lt;dbl&gt;, wk40 &lt;dbl&gt;, wk41 &lt;dbl&gt;, wk42 &lt;dbl&gt;, …</code></pre>
<p>Il database contiene i dati della posizione in classifica di diverse canzoni in diverse settimane a partire dal rilascio. E’ abbastanza ovvio che la variabile “tempo” non esiste e questo rende difficile, per esempio, rappresentare graficamente l’andamento della posizione della canzone nel tempo. <code>tidyr</code> contiene molti altri esempi illustrativi di altre situazioni di dati untidy. Talvolta, trasformare i dati da “untidy” a “tidy” è una vera e propria lotta (“data wrangling”) o meglio, una vera e propria arte<a href="#fn78" class="footnote-ref" id="fnref78"><sup>78</sup></a>, e ce ne occuperemo nel capitolo <a href="wrangling.html#wrangling">9</a>.</p>
</div>
<div id="missingdata" class="section level3 hasAnchor" number="4.1.6">
<h3><span class="header-section-number">4.1.6</span> Dati mancanti (missing data).<a href="datioggetti.html#missingdata" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In <code>billboard</code>, e in molti altri set di dati, ci sono dati mancanti (missing values). Nel dialetto di R i dati mancanti<a href="#fn79" class="footnote-ref" id="fnref79"><sup>79</sup></a> si indicano come <code>NA</code>, not available, e la loro presenza può impedire il calcolo di statistiche o l’analisi di modelli, se non sono opportunamente trattati o eliminati.<br />
Nelle scienze sperimentali i dati possono essere mancanti per diverse ragioni:</p>
<ul>
<li><p>in un esperimento, i dati per alcune ripetizioni di un trattamento possono andare perduti perché va perduto un campione, per il malfunzionamento di uno strumento, l’imperizia di un operatore: questo può rendere sbilanciati<a href="#fn80" class="footnote-ref" id="fnref80"><sup>80</sup></a> esperimenti che erano bilanciati o, nei casi peggiori, portare alla perdita di tutti i dati di un trattamento;</p></li>
<li><p>in un’analisi descrittiva o in un set di dati quasi sperimentale possono mancare (perché non disponibili nel campione che è stato raccolto) i dati corrispondenti a determinate combinazioni di variabili esplicative, o, anche in questo caso, i dati possono andare perduti per il malfunzionamento di sensori e strumenti;</p></li>
<li><p>in un sondaggio o in un esperimento di analisi sensoriale i partecipanti potrebbero non fornire alcune delle risposte attese;</p></li>
</ul>
<p>Inoltre, i dati possono essere mancanti in modo <strong>esplicito</strong> (sappiamo che ci sono dei dati mancanti e lo indichiamo esplicitamente nella nostra tabella, usando, appunto <code>NA</code>) o <strong>implicito</strong> (sappiamo che dei valori dovrebbero essere presenti, per esempio dai valori di altre osservazioni o variabili ma non ci sono, pur non essendo esplicitamente assenti)<a href="#fn81" class="footnote-ref" id="fnref81"><sup>81</sup></a>.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="datioggetti.html#cb59-1" tabindex="-1"></a>(espliciti <span class="ot">&lt;-</span><span class="fu">data.frame</span>(<span class="at">anno =</span> <span class="fu">c</span>(<span class="dv">1999</span>,<span class="dv">2000</span>,<span class="dv">2001</span>,<span class="dv">2002</span>), <span class="at">vendite=</span><span class="fu">c</span>(<span class="dv">100</span>, <span class="cn">NA</span>, <span class="dv">101</span>,<span class="dv">102</span>)))</span></code></pre></div>
<pre><code>##   anno vendite
## 1 1999     100
## 2 2000      NA
## 3 2001     101
## 4 2002     102</code></pre>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="datioggetti.html#cb61-1" tabindex="-1"></a>(impliciti<span class="ot">&lt;-</span><span class="fu">data.frame</span>(<span class="at">anno =</span> <span class="fu">c</span>(<span class="dv">1999</span>, <span class="dv">2001</span>,<span class="dv">2002</span>), <span class="at">vendite=</span><span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">101</span>,<span class="dv">102</span>))) </span></code></pre></div>
<pre><code>##   anno vendite
## 1 1999     100
## 2 2001     101
## 3 2002     102</code></pre>
<p>Come vedi, nel secondo data frama manca l’anno 2000: questo è chiaro nel primo data frame, perché il valore NA compare nella colonna vendite, ma non qui.<br />
Proprio per l’importanza dei dati mancanti nelle analisi statistiche esistono varie tecniche per individuarli<a href="#fn82" class="footnote-ref" id="fnref82"><sup>82</sup></a>, di studiarne la distribuzione (sono mancanti “a caso” o esiste un pattern?), di “tradurne” l’esistenza (diversi tipi di tabelle possono indicare i dati mancanti in modo diverso, per esempio come celle vuote, spazi, punti, etc.) durante l’importazione di file o addirittura di tentare un’imputazione. Come sempre, in R esistono funzioni e addirittura pacchetti dedicati<a href="#fn83" class="footnote-ref" id="fnref83"><sup>83</sup></a> a questo scopo. Ti consiglio almeno di leggere la voce dell’aiuto di R sui dati mancanti. Nota che <code>NA</code> non è la stessa cosa di <code>NaN</code><a href="#fn84" class="footnote-ref" id="fnref84"><sup>84</sup></a> e <code>NULL</code>. Prova con questo codice nella console:</p>
<pre><code>?NA
sqrt(-2)
?NULL</code></pre>
<p>Si tratta di tre valori molto fastidiosi (generano warning o addirittura errori, che possono arrestare l’esecuzione di uno script) ma anche sorprendentemente utili nella programmazione.</p>
</div>
</div>
<div id="r-è-un-linguaggio-funzionale-che-supporta-la-programmazione-orientata-a-oggetti" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> R è un linguaggio funzionale che supporta la programmazione orientata a oggetti…<a href="datioggetti.html#r-è-un-linguaggio-funzionale-che-supporta-la-programmazione-orientata-a-oggetti" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Appunto, qualsiasi cosa questo voglia dire…<a href="#fn85" class="footnote-ref" id="fnref85"><sup>85</sup></a>. Come me, probabilmente non sei un programmatore esperto, ma, per usare R, occorre imparare un po’ di terminologia sulle funzioni e sugli oggetti. In R, tutto quello che esiste (e cui può essere attribuito un valore) è un <strong>oggetto</strong> (e gli oggetti hanno classi e attributi che li descrivono), mentre tutto quello che accade, accade perché hai invocato una una <strong>funzione</strong><a href="#fn86" class="footnote-ref" id="fnref86"><sup>86</sup></a>.<br />
Fondamentalmente, per poter lavorare è importante capire (bene) alcune cose:</p>
<ul>
<li><p>per poter “trovare” un oggetto nell’ambiente di lavoro è necessario usare un nome (è l’oggetto che viene attribuito ad un nome e non viceversa, vedi l’esempio successivo)</p></li>
<li><p>gli oggetti vengono assegnati ai nomi con l’operazione di assegnazione (usando le funzioni</p>
<ul>
<li><p><code>&lt;-</code></p></li>
<li><p><code>-&gt;</code></p></li>
<li><p><code>=</code></p></li>
</ul></li>
<li><p>esistono diverse classi di oggetti, incluse le strutture di dati (che sono quelle su cui operiamo nelle analisi); la <strong>classe</strong> è uno degli <strong>attributi</strong> degli oggetti, e gli attributi sono una sorta di metadati che aiutano a definirne proprietà e comportamenti di un oggetto</p></li>
<li><p>la classe di un oggetto (che si può “interrogare” con la funzione <code>class()</code>) definisce il comportamento dell’oggetto quando quest’ultimo viene usato da diverse funzioni generiche (come per esempio <code>print()</code> o <code>plot()</code>, che si comportano in modo diverso quando hanno come argomento oggetti di classi diverse)</p></li>
<li><p>oltre alla classe gli oggetti hanno altri <strong>attributi</strong>, come nomi, dimensioni, etc. che possono essere “interrogati” o definiti usando le funzioni appropriate</p></li>
</ul>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="datioggetti.html#cb64-1" tabindex="-1"></a><span class="co"># un oggetto di tipo numerico, intero</span></span>
<span id="cb64-2"><a href="datioggetti.html#cb64-2" tabindex="-1"></a><span class="co"># verrà solo stampato a console ma non assegnato</span></span>
<span id="cb64-3"><a href="datioggetti.html#cb64-3" tabindex="-1"></a>1L </span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="datioggetti.html#cb66-1" tabindex="-1"></a><span class="co"># 1L è un vettore intero di lunghezza 1</span></span>
<span id="cb66-2"><a href="datioggetti.html#cb66-2" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>) <span class="co"># un altro oggetto, un vettore numerico a precisione doppia di lunghezza 3</span></span></code></pre></div>
<pre><code>## [1] 1 2 3</code></pre>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="datioggetti.html#cb68-1" tabindex="-1"></a><span class="co"># l&#39;assegnazione dell&#39;oggetto al nome a, l&#39;istruzione assegna ma non stampa a console</span></span>
<span id="cb68-2"><a href="datioggetti.html#cb68-2" tabindex="-1"></a>a <span class="ot">&lt;-</span> 1L </span>
<span id="cb68-3"><a href="datioggetti.html#cb68-3" tabindex="-1"></a><span class="co"># stampa a console il valore di a</span></span>
<span id="cb68-4"><a href="datioggetti.html#cb68-4" tabindex="-1"></a>a </span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="datioggetti.html#cb70-1" tabindex="-1"></a><span class="co"># assegnare e stampare contemporaneamente</span></span>
<span id="cb70-2"><a href="datioggetti.html#cb70-2" tabindex="-1"></a>(a <span class="ot">&lt;-</span> 1L)</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="datioggetti.html#cb72-1" tabindex="-1"></a><span class="fu">class</span>(a) <span class="co"># la classe di a</span></span></code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="datioggetti.html#cb74-1" tabindex="-1"></a><span class="fu">typeof</span>(a) <span class="co"># il tipo o modo di a</span></span></code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="datioggetti.html#cb76-1" tabindex="-1"></a><span class="co"># tre modi validi, per assegnare, ma il primo è preferibile perché meno ambiguo</span></span>
<span id="cb76-2"><a href="datioggetti.html#cb76-2" tabindex="-1"></a><span class="co"># il metodo migliore</span></span>
<span id="cb76-3"><a href="datioggetti.html#cb76-3" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb76-4"><a href="datioggetti.html#cb76-4" tabindex="-1"></a><span class="co"># funziona anche questo ma si confonde con l&#39;assegnazione di valori a parametri di funzioni</span></span>
<span id="cb76-5"><a href="datioggetti.html#cb76-5" tabindex="-1"></a>b <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb76-6"><a href="datioggetti.html#cb76-6" tabindex="-1"></a><span class="co"># funziona ma è difficile da leggere </span></span>
<span id="cb76-7"><a href="datioggetti.html#cb76-7" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>) <span class="ot">-&gt;</span> b</span>
<span id="cb76-8"><a href="datioggetti.html#cb76-8" tabindex="-1"></a>b</span></code></pre></div>
<pre><code>## [1] 1 2 3</code></pre>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="datioggetti.html#cb78-1" tabindex="-1"></a><span class="co"># un po&#39; di magia (a prima è una cosa, poi diventa un&#39;altra)</span></span>
<span id="cb78-2"><a href="datioggetti.html#cb78-2" tabindex="-1"></a>a</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="datioggetti.html#cb80-1" tabindex="-1"></a>a <span class="ot">&lt;-</span> b</span>
<span id="cb80-2"><a href="datioggetti.html#cb80-2" tabindex="-1"></a>a</span></code></pre></div>
<pre><code>## [1] 1 2 3</code></pre>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="datioggetti.html#cb82-1" tabindex="-1"></a><span class="co"># attributi importantissimi sono la classe e il tipo</span></span>
<span id="cb82-2"><a href="datioggetti.html#cb82-2" tabindex="-1"></a><span class="fu">class</span>(b) <span class="co"># la classe di a</span></span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="datioggetti.html#cb84-1" tabindex="-1"></a><span class="fu">typeof</span>(b) <span class="co"># il tipo o modo di a</span></span></code></pre></div>
<pre><code>## [1] &quot;double&quot;</code></pre>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="datioggetti.html#cb86-1" tabindex="-1"></a><span class="co"># altri attributi importanti sono la dimensione </span></span>
<span id="cb86-2"><a href="datioggetti.html#cb86-2" tabindex="-1"></a><span class="co"># che (ha senso per gli oggetti a 2 o più dimensioni)</span></span>
<span id="cb86-3"><a href="datioggetti.html#cb86-3" tabindex="-1"></a><span class="fu">dim</span>(Arthritis)</span></code></pre></div>
<pre><code>## [1] 84  5</code></pre>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="datioggetti.html#cb88-1" tabindex="-1"></a><span class="co"># e la lunghezza (ha senso per oggetti a una dimensione)</span></span>
<span id="cb88-2"><a href="datioggetti.html#cb88-2" tabindex="-1"></a><span class="fu">length</span>(b)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="datioggetti.html#cb90-1" tabindex="-1"></a><span class="co"># alcuni oggetti hanno nomi per i singoli elementi o per le diverse dimensioni</span></span>
<span id="cb90-2"><a href="datioggetti.html#cb90-2" tabindex="-1"></a>vettore_con_nomi <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">a =</span> <span class="dv">1</span>, <span class="at">b =</span> <span class="dv">2</span>, <span class="at">c =</span> <span class="dv">3</span>)</span>
<span id="cb90-3"><a href="datioggetti.html#cb90-3" tabindex="-1"></a><span class="fu">names</span>(vettore_con_nomi)</span></code></pre></div>
<pre><code>## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;</code></pre>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="datioggetti.html#cb92-1" tabindex="-1"></a><span class="fu">colnames</span>(Arthritis)</span></code></pre></div>
<pre><code>## [1] &quot;ID&quot;        &quot;Treatment&quot; &quot;Sex&quot;       &quot;Age&quot;       &quot;Improved&quot;</code></pre>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="datioggetti.html#cb94-1" tabindex="-1"></a><span class="fu">rownames</span>(Arthritis)</span></code></pre></div>
<pre><code>##  [1] &quot;1&quot;  &quot;2&quot;  &quot;3&quot;  &quot;4&quot;  &quot;5&quot;  &quot;6&quot;  &quot;7&quot;  &quot;8&quot;  &quot;9&quot;  &quot;10&quot; &quot;11&quot; &quot;12&quot; &quot;13&quot; &quot;14&quot; &quot;15&quot;
## [16] &quot;16&quot; &quot;17&quot; &quot;18&quot; &quot;19&quot; &quot;20&quot; &quot;21&quot; &quot;22&quot; &quot;23&quot; &quot;24&quot; &quot;25&quot; &quot;26&quot; &quot;27&quot; &quot;28&quot; &quot;29&quot; &quot;30&quot;
## [31] &quot;31&quot; &quot;32&quot; &quot;33&quot; &quot;34&quot; &quot;35&quot; &quot;36&quot; &quot;37&quot; &quot;38&quot; &quot;39&quot; &quot;40&quot; &quot;41&quot; &quot;42&quot; &quot;43&quot; &quot;44&quot; &quot;45&quot;
## [46] &quot;46&quot; &quot;47&quot; &quot;48&quot; &quot;49&quot; &quot;50&quot; &quot;51&quot; &quot;52&quot; &quot;53&quot; &quot;54&quot; &quot;55&quot; &quot;56&quot; &quot;57&quot; &quot;58&quot; &quot;59&quot; &quot;60&quot;
## [61] &quot;61&quot; &quot;62&quot; &quot;63&quot; &quot;64&quot; &quot;65&quot; &quot;66&quot; &quot;67&quot; &quot;68&quot; &quot;69&quot; &quot;70&quot; &quot;71&quot; &quot;72&quot; &quot;73&quot; &quot;74&quot; &quot;75&quot;
## [76] &quot;76&quot; &quot;77&quot; &quot;78&quot; &quot;79&quot; &quot;80&quot; &quot;81&quot; &quot;82&quot; &quot;83&quot; &quot;84&quot;</code></pre>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="datioggetti.html#cb96-1" tabindex="-1"></a><span class="co"># queste funzioni possono essere usate per leggere o assegnare i nomi:</span></span>
<span id="cb96-2"><a href="datioggetti.html#cb96-2" tabindex="-1"></a><span class="fu">names</span>(vettore_con_nomi)</span></code></pre></div>
<pre><code>## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;</code></pre>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="datioggetti.html#cb98-1" tabindex="-1"></a>vettore_con_nomi</span></code></pre></div>
<pre><code>## a b c 
## 1 2 3</code></pre>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="datioggetti.html#cb100-1" tabindex="-1"></a><span class="fu">names</span>(vettore_con_nomi) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;d&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;f&quot;</span>)</span>
<span id="cb100-2"><a href="datioggetti.html#cb100-2" tabindex="-1"></a>vettore_con_nomi</span></code></pre></div>
<pre><code>## d e f 
## 1 2 3</code></pre>
</div>
<div id="ilnomedellecose" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> Il nome delle cose.<a href="datioggetti.html#ilnomedellecose" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In R ci sono poche limitazioni sui nomi degli oggetti<a href="#fn87" class="footnote-ref" id="fnref87"><sup>87</sup></a>:</p>
<ul>
<li><p>possono contenere lettere, numeri, “_” e “-” in qualsiasi combinazione</p></li>
<li><p>non possono contenere spazi</p></li>
<li><p>non devono iniziare con un numero, “_” o “-”</p></li>
<li><p>non devono corrispondere a un nome “riservato”, cioé a uno dei nomi utilizzati dal linguaggio</p></li>
</ul>
<p>R è un linguaggio case-sensitive (maiuscole e minuscole non sono la stessa cosa, quindi <code>a</code> e <code>A</code> o <code>anova()</code> e <code>Anova()</code> non sono la stessa cosa). In sostanza, puoi fare un po’ quello che ti pare anche se, ovviamente esistono delle guide di stile alle quali sarebbe bene uniformarsi, se non altro per coerenza e per aumentare la leggibilità del codice che scrivi (per gli altri e per il tuo io futuro). Due esempi sono la guida di <a href="https://google.github.io/styleguide/Rguide.html">Google</a> e quella del <a href="https://style.tidyverse.org/index.html">tidyverse</a>. Io, per ragioni religiose, cercherò di seguire quella del <code>tidyverse</code> (un universo ordinato di pacchetti molto utili), ma, siccome sono smemorato e incoerente potrei dimenticarmene di quando in quando.<br />
Quelli che seguono sono alcuni esempi di convenzioni sull’assegnazione di oggetti a nomi:</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="datioggetti.html#cb102-1" tabindex="-1"></a><span class="co"># un nome valido: è bene che i nomi siano descrittivi e che dal nome si possa capire</span></span>
<span id="cb102-2"><a href="datioggetti.html#cb102-2" tabindex="-1"></a><span class="co"># per quanto possibile, che cos&#39;é l&#39;oggetto: questo aiuta molto nella lettura del codice</span></span>
<span id="cb102-3"><a href="datioggetti.html#cb102-3" tabindex="-1"></a>il_mio_nome <span class="ot">&lt;-</span> <span class="st">&quot;Maurizio&quot;</span></span>
<span id="cb102-4"><a href="datioggetti.html#cb102-4" tabindex="-1"></a><span class="co"># ma va bene anche</span></span>
<span id="cb102-5"><a href="datioggetti.html#cb102-5" tabindex="-1"></a>il_mio_nome <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb102-6"><a href="datioggetti.html#cb102-6" tabindex="-1"></a><span class="co"># in fondo, R che ne sa?</span></span>
<span id="cb102-7"><a href="datioggetti.html#cb102-7" tabindex="-1"></a><span class="co"># lo stesso oggetto con 2 nomi</span></span>
<span id="cb102-8"><a href="datioggetti.html#cb102-8" tabindex="-1"></a>c <span class="ot">&lt;-</span> d <span class="ot">&lt;-</span> 3L</span>
<span id="cb102-9"><a href="datioggetti.html#cb102-9" tabindex="-1"></a><span class="co"># maiuscole e minuscole non sono la stessa cosa</span></span>
<span id="cb102-10"><a href="datioggetti.html#cb102-10" tabindex="-1"></a>C <span class="ot">&lt;-</span> 4L</span>
<span id="cb102-11"><a href="datioggetti.html#cb102-11" tabindex="-1"></a><span class="co"># cat() è una funzione molto utile per documentare ciò che va in console</span></span>
<span id="cb102-12"><a href="datioggetti.html#cb102-12" tabindex="-1"></a><span class="co"># \n permette di inserire un daccapo; </span></span>
<span id="cb102-13"><a href="datioggetti.html#cb102-13" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;</span><span class="sc">\n</span><span class="st">il valore di c piccolo è</span><span class="sc">\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<pre><code>## 
## il valore di c piccolo è</code></pre>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="datioggetti.html#cb104-1" tabindex="-1"></a>c</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="datioggetti.html#cb106-1" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;</span><span class="sc">\n</span><span class="st">il valore di C grande è</span><span class="sc">\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<pre><code>## 
## il valore di C grande è</code></pre>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="datioggetti.html#cb108-1" tabindex="-1"></a>C</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="datioggetti.html#cb110-1" tabindex="-1"></a><span class="co"># è bene dare nomi descrittivi agli oggetti</span></span>
<span id="cb110-2"><a href="datioggetti.html#cb110-2" tabindex="-1"></a>il_mio_nome <span class="ot">&lt;-</span> <span class="st">&quot;Maurizio&quot;</span></span>
<span id="cb110-3"><a href="datioggetti.html#cb110-3" tabindex="-1"></a><span class="co"># questo va bene e l&#39;uso di _ per separare parole di chiama &quot;snake case&quot;</span></span>
<span id="cb110-4"><a href="datioggetti.html#cb110-4" tabindex="-1"></a><span class="co"># questi funzionano ma vanno meno bene</span></span>
<span id="cb110-5"><a href="datioggetti.html#cb110-5" tabindex="-1"></a>ilmionome <span class="ot">&lt;-</span> <span class="st">&quot;Silvio&quot;</span></span>
<span id="cb110-6"><a href="datioggetti.html#cb110-6" tabindex="-1"></a>ILMIONOME <span class="ot">&lt;-</span> <span class="st">&quot;Giorgia&quot;</span></span>
<span id="cb110-7"><a href="datioggetti.html#cb110-7" tabindex="-1"></a>IlMioNome <span class="ot">&lt;-</span> <span class="st">&quot;Matteo&quot;</span></span>
<span id="cb110-8"><a href="datioggetti.html#cb110-8" tabindex="-1"></a><span class="co"># questo si chiama &quot;camel case&quot; perché le maiuscole assomigliano </span></span>
<span id="cb110-9"><a href="datioggetti.html#cb110-9" tabindex="-1"></a><span class="co"># alle gobbe di un cammello</span></span>
<span id="cb110-10"><a href="datioggetti.html#cb110-10" tabindex="-1"></a></span>
<span id="cb110-11"><a href="datioggetti.html#cb110-11" tabindex="-1"></a><span class="co"># per le funzioni è meglio usare verbi</span></span>
<span id="cb110-12"><a href="datioggetti.html#cb110-12" tabindex="-1"></a>fai_la_somma <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">a=</span><span class="dv">1</span>, <span class="at">b=</span><span class="dv">2</span>, <span class="at">c=</span><span class="dv">3</span>) a<span class="sc">+</span>b<span class="sc">+</span>c</span>
<span id="cb110-13"><a href="datioggetti.html#cb110-13" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;</span><span class="sc">\n</span><span class="st">la somma di 5, 6 e 7 è</span><span class="sc">\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<pre><code>## 
## la somma di 5, 6 e 7 è</code></pre>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="datioggetti.html#cb112-1" tabindex="-1"></a><span class="fu">fai_la_somma</span>(<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>)</span></code></pre></div>
<pre><code>## [1] 18</code></pre>
<p>Come vedrai più avanti <code>\</code> è il segno di escape e si può usare per individuare caratteri speciali; <code>\t</code>, per esempio, è una tabulazione.<br />
Per sperimentare con i nomi non sintattici prova a scrivere ed eseguire questo script:</p>
<pre><code># un nome sbagliato, non sintattico
1schifodinome &lt;- 1
# restituisce un errore
`1schifodinome` &lt;- 1
`1schifodinome`
# questo funziona, ma è uno schifo
# questo piccolo trucco può venire comodo nell&#39;importazione di dati da altri
# software che non hanno questo tipo di limitazioni</code></pre>
<p>Pensa a quante tabelle, fatte male, hanno intestazioni di colonna (e quindi nomi di variabili) non sintattici, e ai dolori di pancia per importarle…
In questo libro, per coerenza, farò il possibile per usare nomi in italiano. E’ abbastanza ovvio che se vuoi che il tuo codice sia letto e compreso da altri, devi assegnare nomi che abbiano senso in inglese.<br />
Descrivere il modo in cui R cerca i valori associati ad un determinato nome (sia esso il nome di una funzione o il nome di una struttura di dati) è troppo complesso per un libro introduttivo come questo. Probabilmente, quando imparerai a programmare meglio dovrai approfondire questo argomento. Come al solito, un ottimo punto di partenza è <a href="https://adv-r.hadley.nz/functions.html?q=scoping#lexical-scoping">Advanced R</a>. Qui ti basti ricordare che, per quanto in generale non sia necessario essere molto specifici, quando esiste un’ambiguità (è possibile per esempio che diversi pacchetti abbiano funzioni con lo stesso nome, o è possibile che una variabile con lo stesso nome sia presente in tabelle diverse) bisogna stare attenti ad indicare con precisione dove cercare. Vedremo alcuni esempi in seguito.</p>
</div>
<div id="strutturedati" class="section level2 hasAnchor" number="4.4">
<h2><span class="header-section-number">4.4</span> Strutture di dati.<a href="datioggetti.html#strutturedati" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Le strutture di dati sono quelle che importerai, aprirai, userai per le analisi, salverai, etc. e, che, per l’appunto contengono dati. Possiamo distinguerle in</p>
<ul>
<li><p><strong>vettori atomici</strong> (<strong>atomic vectors</strong>): contengono dati di un solo tipo (vedi dopo)</p>
<ul>
<li><p>a una dimensione: <strong>vettori</strong> (<strong>vectors</strong>)</p></li>
<li><p>a due dimensioni: <strong>matrici</strong> (<strong>matrices</strong>)</p></li>
<li><p>a <em>n</em> dimensioni: <strong>array</strong></p></li>
</ul></li>
<li><p><strong>vettori generici</strong> (generic vectors): possono contenere più tipi di dati</p>
<ul>
<li><p><strong>data frames</strong>: possono contenere vettori di diverso tipo, con il vincolo che tutti siano della stessa lunghezza. I data frames sono, in realtà, liste con alcuni vincoli (tutti gli elementi devono avere la stessa lunghezza). Vedremo più avanti che è anche possibile avere data frame annidati, con colonne che contengono altri data frame. Come hai già visto i data frame sono il tipo di tabella che userai più frequentemente, per la loro versatilità. Esiste una versione “aggiornata” dei data frame, fornita dal pacchetto <code>tibble</code>, che a sua volta fa parte del <code>tidyverse</code>, chiamata appunto <code>tibble.</code></p></li>
<li><p><strong>liste</strong> (<strong>lists</strong>): sono gli oggetti più flessibili di tutti, perché possono contenere oggetti di qualsiasi tipo e lunghezza, incluse altre liste; come vedrai, oltre a contenere dati, possono contenere risultati di analisi e persino grafici.</p></li>
</ul></li>
</ul>
</div>
<div id="vettoriatomici" class="section level2 hasAnchor" number="4.5">
<h2><span class="header-section-number">4.5</span> Vettori atomici.<a href="datioggetti.html#vettoriatomici" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>La struttura di base per i dati in R è <strong>il vettore, un insieme ordinato di dati</strong>, che, nei vettori atomici, sono necessariamente dello stesso tipo. In R non esistono scalari: gli scalari sono vettori di lunghezza 1.</p>
<div id="vettori1D" class="section level3 hasAnchor" number="4.5.1">
<h3><span class="header-section-number">4.5.1</span> Vettori ad una dimensione.<a href="datioggetti.html#vettori1D" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Gli elementi di un vettore ad una dimensione sono messi insieme dalla funzione <code>c()</code>, che, appunto, concatena elementi.
Ogni vettore atomico contiene elementi dello stesso <strong>tipo</strong> (<strong>type</strong>) o <strong>modo</strong> (<strong>mode</strong>). I tipi più frequentemente utilizzati sono:</p>
<ul>
<li><p><strong>numerici</strong>: interi, p.es. <code>c(1L, 2L, 3L)</code>; doppi, p. es. <code>c(1.25, -3.14, 999)</code><a href="#fn88" class="footnote-ref" id="fnref88"><sup>88</sup></a></p></li>
<li><p><strong>logici</strong>: con elementi che possono assumere solo i valori <code>TRUE</code> (o <code>T</code>) o <code>FALSE</code> (o <code>F</code>)<a href="#fn89" class="footnote-ref" id="fnref89"><sup>89</sup></a></p></li>
<li><p><strong>carattere</strong>: contengono per l’appunto, simboli che sono interpretati come caratteri, e che devono essere inseriti fra virgolette, singole o doppie: <code>c("a", "Apple", "1", "TRUE")</code>; nota come il terzo elemento di questo vettore è un numero, ma è interpretato come carattere; il quarto è un valore logico ma, essendo fra virgolette, viene interpretato come carattere.</p></li>
</ul>
<p>Una classe particolare di vettori sono i <strong>fattori</strong> (factors). I fattori sono particolarmente utili per le variabili <strong>nominali</strong> o <strong>ordinali</strong> con un numero limitato di valori diversi (vedi il paragrafo <a href="datioggetti.html#anatab">4.1.3</a>). I fattori sono in realtà conservati in memoria come vettori di interi, cui sono associati dei nomi dei livelli e, eventualmente, il loro ordine.</p>
<p>Esistono comandi specifici per creare i diversi tipi di vettori, e li vedrai negli esempi successivi.<a href="#fn90" class="footnote-ref" id="fnref90"><sup>90</sup></a></p>
<p>E’ possibile “interrogare” un oggetto usando diverse funzioni, come nell’esempio successivo. E’ anche possibile usare alcune funzioni per “costringere” un oggetto a cambiare tipo (si chiama coercizione e, qualche volta, R la fa in automatico).<br />
Interrogare oggetti e cambiarne il tipo possono sembrare operazioni futili se ci si immagina di lavorare con R solo in modo interattivo: in fondo, se siamo lì a guardare dovremmo sapere benissimo quello che sta succendendo, no? Tuttavia, la potenza di R si scatena veramente solo quando lo usiamo per creare programmi e script e per automatizzare operazioni: in questo caso, potrebbe essere necessario che R chieda per conto nostro ad un’oggetto di che tipo è e lo converta se necessario in un altro tipo. Infatti, alcune funzioni accettano solo oggetti di un certo tipo e non è sempre ovvio o noto con che tipo di oggetto abbiamo a che fare<a href="#fn91" class="footnote-ref" id="fnref91"><sup>91</sup></a>.</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="datioggetti.html#cb115-1" tabindex="-1"></a><span class="co"># riprendiamo alcuni dei vettori creati precedentemente e &quot;interroghiamoli&quot;</span></span>
<span id="cb115-2"><a href="datioggetti.html#cb115-2" tabindex="-1"></a>a</span></code></pre></div>
<pre><code>## [1] 1 2 3</code></pre>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="datioggetti.html#cb117-1" tabindex="-1"></a><span class="co"># la classe</span></span>
<span id="cb117-2"><a href="datioggetti.html#cb117-2" tabindex="-1"></a><span class="fu">class</span>(a)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="datioggetti.html#cb119-1" tabindex="-1"></a><span class="co"># il tipo o modo (che è il modo con cui R conserva in memoria l&#39;oggetto)</span></span>
<span id="cb119-2"><a href="datioggetti.html#cb119-2" tabindex="-1"></a><span class="fu">typeof</span>(a)</span></code></pre></div>
<pre><code>## [1] &quot;double&quot;</code></pre>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="datioggetti.html#cb121-1" tabindex="-1"></a><span class="co"># la lunghezza</span></span>
<span id="cb121-2"><a href="datioggetti.html#cb121-2" tabindex="-1"></a><span class="fu">length</span>(a)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="datioggetti.html#cb123-1" tabindex="-1"></a><span class="co"># i nomi, se esistono (altrimenti restituisce NULL)</span></span>
<span id="cb123-2"><a href="datioggetti.html#cb123-2" tabindex="-1"></a><span class="fu">names</span>(a)</span></code></pre></div>
<pre><code>## NULL</code></pre>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="datioggetti.html#cb125-1" tabindex="-1"></a><span class="co"># proviamo con un altro</span></span>
<span id="cb125-2"><a href="datioggetti.html#cb125-2" tabindex="-1"></a>vettore_con_nomi</span></code></pre></div>
<pre><code>## d e f 
## 1 2 3</code></pre>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="datioggetti.html#cb127-1" tabindex="-1"></a><span class="fu">class</span>(vettore_con_nomi)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="datioggetti.html#cb129-1" tabindex="-1"></a><span class="fu">names</span>(vettore_con_nomi)</span></code></pre></div>
<pre><code>## [1] &quot;d&quot; &quot;e&quot; &quot;f&quot;</code></pre>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="datioggetti.html#cb131-1" tabindex="-1"></a><span class="co"># nota che il risultato di names() può essere assegnato</span></span>
<span id="cb131-2"><a href="datioggetti.html#cb131-2" tabindex="-1"></a>i_nomi <span class="ot">&lt;-</span> <span class="fu">names</span>(vettore_con_nomi)</span>
<span id="cb131-3"><a href="datioggetti.html#cb131-3" tabindex="-1"></a><span class="co"># che vettore abbiamo creato? di che classe, lunghezza, tipo?</span></span>
<span id="cb131-4"><a href="datioggetti.html#cb131-4" tabindex="-1"></a><span class="co"># un modo semplice per conoscere gli attributi</span></span>
<span id="cb131-5"><a href="datioggetti.html#cb131-5" tabindex="-1"></a><span class="fu">attributes</span>(vettore_con_nomi)</span></code></pre></div>
<pre><code>## $names
## [1] &quot;d&quot; &quot;e&quot; &quot;f&quot;</code></pre>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="datioggetti.html#cb133-1" tabindex="-1"></a><span class="co"># che tipo di oggetto restituisce attributes()? Prova ad usare l&#39;aiuto...</span></span>
<span id="cb133-2"><a href="datioggetti.html#cb133-2" tabindex="-1"></a><span class="co"># con la funzione c() possiamo anche concatenare vettori. Vediamo che succede:</span></span>
<span id="cb133-3"><a href="datioggetti.html#cb133-3" tabindex="-1"></a>vettori_concatenati <span class="ot">&lt;-</span> <span class="fu">c</span>(a,b)</span>
<span id="cb133-4"><a href="datioggetti.html#cb133-4" tabindex="-1"></a><span class="fu">class</span>(vettori_concatenati)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="datioggetti.html#cb135-1" tabindex="-1"></a><span class="fu">typeof</span>(vettori_concatenati)</span></code></pre></div>
<pre><code>## [1] &quot;double&quot;</code></pre>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="datioggetti.html#cb137-1" tabindex="-1"></a><span class="co"># nota come questo sia un vettore carattere; eccone altri</span></span>
<span id="cb137-2"><a href="datioggetti.html#cb137-2" tabindex="-1"></a>il_mio_TESTO <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>,<span class="st">&quot;B&quot;</span>,<span class="st">&quot;C&quot;</span>)</span>
<span id="cb137-3"><a href="datioggetti.html#cb137-3" tabindex="-1"></a>il_mio_testo <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>,<span class="st">&quot;c&quot;</span>) </span>
<span id="cb137-4"><a href="datioggetti.html#cb137-4" tabindex="-1"></a><span class="co"># nota che questo non è lo stesso oggetto e che anche i nomi sono diversi</span></span>
<span id="cb137-5"><a href="datioggetti.html#cb137-5" tabindex="-1"></a></span>
<span id="cb137-6"><a href="datioggetti.html#cb137-6" tabindex="-1"></a></span>
<span id="cb137-7"><a href="datioggetti.html#cb137-7" tabindex="-1"></a><span class="co"># naturalmente è possibile creare un vettore logico direttamente</span></span>
<span id="cb137-8"><a href="datioggetti.html#cb137-8" tabindex="-1"></a></span>
<span id="cb137-9"><a href="datioggetti.html#cb137-9" tabindex="-1"></a>logico <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>)</span>
<span id="cb137-10"><a href="datioggetti.html#cb137-10" tabindex="-1"></a></span>
<span id="cb137-11"><a href="datioggetti.html#cb137-11" tabindex="-1"></a><span class="co"># ma anche </span></span>
<span id="cb137-12"><a href="datioggetti.html#cb137-12" tabindex="-1"></a></span>
<span id="cb137-13"><a href="datioggetti.html#cb137-13" tabindex="-1"></a>logico <span class="ot">&lt;-</span> <span class="fu">c</span>(T, F, F)</span>
<span id="cb137-14"><a href="datioggetti.html#cb137-14" tabindex="-1"></a></span>
<span id="cb137-15"><a href="datioggetti.html#cb137-15" tabindex="-1"></a><span class="co"># alcune funzioni usate per interrogare oggetti restituiscono valori logici</span></span>
<span id="cb137-16"><a href="datioggetti.html#cb137-16" tabindex="-1"></a></span>
<span id="cb137-17"><a href="datioggetti.html#cb137-17" tabindex="-1"></a><span class="fu">is.numeric</span>(a)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="datioggetti.html#cb139-1" tabindex="-1"></a><span class="fu">is.logical</span>(logico)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="datioggetti.html#cb141-1" tabindex="-1"></a><span class="fu">is.logical</span>(a)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="datioggetti.html#cb143-1" tabindex="-1"></a><span class="co"># i fattori sono molto importanti, sia per ragioni storiche, sia perché sono il </span></span>
<span id="cb143-2"><a href="datioggetti.html#cb143-2" tabindex="-1"></a><span class="co"># prototipo delle variabili categoriche</span></span>
<span id="cb143-3"><a href="datioggetti.html#cb143-3" tabindex="-1"></a></span>
<span id="cb143-4"><a href="datioggetti.html#cb143-4" tabindex="-1"></a><span class="co"># creiamo un fattore non ordinato (il default)</span></span>
<span id="cb143-5"><a href="datioggetti.html#cb143-5" tabindex="-1"></a>fattore_non_o <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">&quot;vowel&quot;</span>,<span class="st">&quot;consonant&quot;</span>,<span class="st">&quot;consonant&quot;</span>))</span>
<span id="cb143-6"><a href="datioggetti.html#cb143-6" tabindex="-1"></a><span class="co"># la funzione str() ci dice qualcosa sulla struttura di quest&#39;oggetto</span></span>
<span id="cb143-7"><a href="datioggetti.html#cb143-7" tabindex="-1"></a><span class="fu">str</span>(fattore_non_o)</span></code></pre></div>
<pre><code>##  Factor w/ 2 levels &quot;consonant&quot;,&quot;vowel&quot;: 2 1 1</code></pre>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="datioggetti.html#cb145-1" tabindex="-1"></a><span class="co"># come vedi, di default R ha assegnato il livello in ordine alfabetico</span></span>
<span id="cb145-2"><a href="datioggetti.html#cb145-2" tabindex="-1"></a><span class="co"># nota anche come, in realtà, i valori siano conservati come interi (1, 2)</span></span>
<span id="cb145-3"><a href="datioggetti.html#cb145-3" tabindex="-1"></a><span class="co"># mentre i nomi dei livelli sono attributi</span></span>
<span id="cb145-4"><a href="datioggetti.html#cb145-4" tabindex="-1"></a><span class="co"># prova a leggere l&#39;aiuto di factor() e as-factor()</span></span>
<span id="cb145-5"><a href="datioggetti.html#cb145-5" tabindex="-1"></a><span class="co"># guarda cosa succede con una variabile ordinale, se non stiamo attenti</span></span>
<span id="cb145-6"><a href="datioggetti.html#cb145-6" tabindex="-1"></a>quanto <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">&quot;molto&quot;</span>, <span class="st">&quot;molto&quot;</span>, <span class="st">&quot;poco&quot;</span>, <span class="st">&quot;moltissimo&quot;</span>, <span class="st">&quot;abbastanza&quot;</span>))</span>
<span id="cb145-7"><a href="datioggetti.html#cb145-7" tabindex="-1"></a>quanto</span></code></pre></div>
<pre><code>## [1] molto      molto      poco       moltissimo abbastanza
## Levels: abbastanza moltissimo molto poco</code></pre>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="datioggetti.html#cb147-1" tabindex="-1"></a><span class="fu">str</span>(quanto)</span></code></pre></div>
<pre><code>##  Factor w/ 4 levels &quot;abbastanza&quot;,&quot;moltissimo&quot;,..: 3 3 4 2 1</code></pre>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="datioggetti.html#cb149-1" tabindex="-1"></a><span class="co"># sarebbe ovviamente desiderabile che ci fosse un ordine logico:</span></span>
<span id="cb149-2"><a href="datioggetti.html#cb149-2" tabindex="-1"></a><span class="co"># in fondo poco è meno abbastanza, che è meno di molto che è meno di moltissimo</span></span>
<span id="cb149-3"><a href="datioggetti.html#cb149-3" tabindex="-1"></a><span class="co"># a questo punto i default della funzione factor() non bastano, e dobbiamo essere</span></span>
<span id="cb149-4"><a href="datioggetti.html#cb149-4" tabindex="-1"></a><span class="co"># più specifici, indicando i livelli:</span></span>
<span id="cb149-5"><a href="datioggetti.html#cb149-5" tabindex="-1"></a>quanto_ord <span class="ot">&lt;-</span><span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">&quot;molto&quot;</span>, <span class="st">&quot;molto&quot;</span>, <span class="st">&quot;poco&quot;</span>, <span class="st">&quot;moltissimo&quot;</span>, <span class="st">&quot;abbastanza&quot;</span>),</span>
<span id="cb149-6"><a href="datioggetti.html#cb149-6" tabindex="-1"></a>                    <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;poco&quot;</span>, <span class="st">&quot;abbastanza&quot;</span>, <span class="st">&quot;molto&quot;</span>, <span class="st">&quot;moltissimo&quot;</span>),</span>
<span id="cb149-7"><a href="datioggetti.html#cb149-7" tabindex="-1"></a>                    <span class="at">ordered =</span> T)</span>
<span id="cb149-8"><a href="datioggetti.html#cb149-8" tabindex="-1"></a>quanto_ord</span></code></pre></div>
<pre><code>## [1] molto      molto      poco       moltissimo abbastanza
## Levels: poco &lt; abbastanza &lt; molto &lt; moltissimo</code></pre>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="datioggetti.html#cb151-1" tabindex="-1"></a><span class="fu">str</span>(quanto_ord)</span></code></pre></div>
<pre><code>##  Ord.factor w/ 4 levels &quot;poco&quot;&lt;&quot;abbastanza&quot;&lt;..: 3 3 1 4 2</code></pre>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="datioggetti.html#cb153-1" tabindex="-1"></a><span class="co"># nota che i fattori sono conservati in memoria come interi, con attributi</span></span>
<span id="cb153-2"><a href="datioggetti.html#cb153-2" tabindex="-1"></a><span class="fu">typeof</span>(quanto_ord)</span></code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="datioggetti.html#cb155-1" tabindex="-1"></a><span class="fu">attributes</span>(quanto_ord)</span></code></pre></div>
<pre><code>## $levels
## [1] &quot;poco&quot;       &quot;abbastanza&quot; &quot;molto&quot;      &quot;moltissimo&quot;
## 
## $class
## [1] &quot;ordered&quot; &quot;factor&quot;</code></pre>
<p>Vedremo più avanti come lavorare con i fattori non sia sempre semplicissimo e che, ancora una volta per ragioni storiche, possa capitare che un vettore di caratteri venga convertito in un fattore in maniera esplicita o “dietro le quinte”.<br />
Nota che è buona pratica di programmazione dividere in maniera logica su più linee un singolo comando molto lungo; se non sei cert* come farlo, prova a selezionare il comando o la parte di codice che vuoi formattare correttamente e poi usa il menu <Code->Reformat Code&gt; (in alcuni casi può essere utile <Reindent lines>) per quanto il codice diventi più lungo è più facile leggerlo.</p>
<p>L’esempio successivo illustra alcuni aspetti dell’uso di caratteri speciali nei vettori a carattere e fornisce qualche dettaglio in più sulla coercizione. Potrebbe essere utile in diverse situazioni ma, se vuoi, <strong>puoi saltarlo</strong>.</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="datioggetti.html#cb157-1" tabindex="-1"></a><span class="co"># caratteri speciali</span></span>
<span id="cb157-2"><a href="datioggetti.html#cb157-2" tabindex="-1"></a><span class="co"># in alcuni casi potrebbe essere necessario aggiungere caratteri speciali al testo</span></span>
<span id="cb157-3"><a href="datioggetti.html#cb157-3" tabindex="-1"></a><span class="co"># aggiungere esplicitamente delle virgolette</span></span>
<span id="cb157-4"><a href="datioggetti.html#cb157-4" tabindex="-1"></a>virgolettato <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;&#39;A&#39;&quot;</span>, <span class="st">&quot;&#39;B&#39;&quot;</span>, <span class="st">&quot;&#39;C&#39;&quot;</span>)</span>
<span id="cb157-5"><a href="datioggetti.html#cb157-5" tabindex="-1"></a>virgolettato</span></code></pre></div>
<pre><code>## [1] &quot;&#39;A&#39;&quot; &quot;&#39;B&#39;&quot; &quot;&#39;C&#39;&quot;</code></pre>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="datioggetti.html#cb159-1" tabindex="-1"></a>(virgolettato_doppio <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;&quot;A&quot;&#39;</span>, <span class="st">&#39;&quot;B&quot;&#39;</span>, <span class="st">&#39;&quot;C&quot;&#39;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;\&quot;A\&quot;&quot; &quot;\&quot;B\&quot;&quot; &quot;\&quot;C\&quot;&quot;</code></pre>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="datioggetti.html#cb161-1" tabindex="-1"></a><span class="co"># degli a capo (per inserire tabulazioni puoi usare \t)</span></span>
<span id="cb161-2"><a href="datioggetti.html#cb161-2" tabindex="-1"></a>a_capo <span class="ot">&lt;-</span> <span class="st">&quot;A</span><span class="sc">\n</span><span class="st">B</span><span class="sc">\n</span><span class="st">C&quot;</span></span>
<span id="cb161-3"><a href="datioggetti.html#cb161-3" tabindex="-1"></a></span>
<span id="cb161-4"><a href="datioggetti.html#cb161-4" tabindex="-1"></a><span class="co"># altri modi di stampare </span></span>
<span id="cb161-5"><a href="datioggetti.html#cb161-5" tabindex="-1"></a></span>
<span id="cb161-6"><a href="datioggetti.html#cb161-6" tabindex="-1"></a><span class="co"># nota come diversi comandi possano stampare contenuto o contenuto &quot;grezzo&quot;</span></span>
<span id="cb161-7"><a href="datioggetti.html#cb161-7" tabindex="-1"></a><span class="fu">print</span>(virgolettato)</span></code></pre></div>
<pre><code>## [1] &quot;&#39;A&#39;&quot; &quot;&#39;B&#39;&quot; &quot;&#39;C&#39;&quot;</code></pre>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="datioggetti.html#cb163-1" tabindex="-1"></a><span class="fu">cat</span>(virgolettato)</span></code></pre></div>
<pre><code>## &#39;A&#39; &#39;B&#39; &#39;C&#39;</code></pre>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="datioggetti.html#cb165-1" tabindex="-1"></a><span class="fu">writeLines</span>(a_capo)</span></code></pre></div>
<pre><code>## A
## B
## C</code></pre>
<p><code>cat()</code> e <code>writelines()</code> possono anche inviare il risultato a altre “connessioni”, cioé ad un file piuttosto che alla console; è in qualche maniera un residuo dei bei vecchi tempi, non credo che valga la pena parlarne, ma, se vuoi leggi <a href="https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/connections">qui</a> o <a href="https://stackoverflow.com/questions/30445875/what-exactly-is-a-connection-in-r">qui</a>.</p>
<p>Vediamo ora qualche esempio di coercizione. Che succede se provo a concatenare oggetti di tipo diverso (uno numerocio e uno a caratteri)?</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="datioggetti.html#cb167-1" tabindex="-1"></a>due_vettori <span class="ot">&lt;-</span> <span class="fu">c</span>(vettori_concatenati, i_nomi)</span>
<span id="cb167-2"><a href="datioggetti.html#cb167-2" tabindex="-1"></a>due_vettori</span></code></pre></div>
<pre><code>## [1] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;d&quot; &quot;e&quot; &quot;f&quot;</code></pre>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="datioggetti.html#cb169-1" tabindex="-1"></a><span class="fu">class</span>(due_vettori)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="datioggetti.html#cb171-1" tabindex="-1"></a><span class="fu">typeof</span>(due_vettori)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>Il risultato è un vettore di tipo carattere: R ha esercitato quella che si chiama coercizione; è possibile convertire praticamente tutto in caratteri, ma non viceversa.</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="datioggetti.html#cb173-1" tabindex="-1"></a><span class="fu">as.character</span>(vettori_concatenati)</span></code></pre></div>
<pre><code>## [1] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;1&quot; &quot;2&quot; &quot;3&quot;</code></pre>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="datioggetti.html#cb175-1" tabindex="-1"></a><span class="fu">typeof</span>(<span class="fu">as.character</span>(vettori_concatenati))</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>Nota come posso annidare due funzioni una dentro l’altra; il risultato del comando<br />
<code>typeof(as.character(vettori_concatenati))</code></p>
<p>É trasformare un vettore numerico in un vettore carattere (senza assegnarlo a un nome) e, contemporaneamente, leggerne il tipo. Nota che questa non è buona pratica di programmazione perché il codice potrebbe essere poco leggibile. Prova a scrivere a console il seguente comando</p>
<pre><code>as.numeric(i_nomi)</code></pre>
<p>La coercizione può avvenire anche come risultato di operazioni, guarda che succede qui sotto:</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="datioggetti.html#cb178-1" tabindex="-1"></a><span class="co"># controlliamo se il contenuto dei due oggetti è identico, elemento per elemento, con la funzione ==</span></span>
<span id="cb178-2"><a href="datioggetti.html#cb178-2" tabindex="-1"></a>il_mio_TESTO <span class="sc">==</span> il_mio_testo</span></code></pre></div>
<pre><code>## [1] FALSE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="datioggetti.html#cb180-1" tabindex="-1"></a><span class="co"># cosa restituisce quest&#39;operazione? Che lunghezza ha il risultato?</span></span>
<span id="cb180-2"><a href="datioggetti.html#cb180-2" tabindex="-1"></a><span class="co"># Controlliamo, assegnando il risultato ad un vettore</span></span>
<span id="cb180-3"><a href="datioggetti.html#cb180-3" tabindex="-1"></a></span>
<span id="cb180-4"><a href="datioggetti.html#cb180-4" tabindex="-1"></a>risultato <span class="ot">&lt;-</span> (il_mio_TESTO <span class="sc">==</span> il_mio_testo)</span>
<span id="cb180-5"><a href="datioggetti.html#cb180-5" tabindex="-1"></a><span class="fu">class</span>(risultato)</span></code></pre></div>
<pre><code>## [1] &quot;logical&quot;</code></pre>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="datioggetti.html#cb182-1" tabindex="-1"></a><span class="fu">typeof</span>(risultato)</span></code></pre></div>
<pre><code>## [1] &quot;logical&quot;</code></pre>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="datioggetti.html#cb184-1" tabindex="-1"></a><span class="fu">length</span>(risultato)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="datioggetti.html#cb186-1" tabindex="-1"></a><span class="co"># il risultato è un vettore logico di lunghezza 3, perché sono stati fatti 3 confronti</span></span>
<span id="cb186-2"><a href="datioggetti.html#cb186-2" tabindex="-1"></a></span>
<span id="cb186-3"><a href="datioggetti.html#cb186-3" tabindex="-1"></a><span class="co"># oppure possiamo usare le funzioni as.xxxx()</span></span>
<span id="cb186-4"><a href="datioggetti.html#cb186-4" tabindex="-1"></a><span class="fu">as.factor</span>(il_mio_testo)</span></code></pre></div>
<pre><code>## [1] a b c
## Levels: a b c</code></pre>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="datioggetti.html#cb188-1" tabindex="-1"></a><span class="fu">as.numeric</span>(logico)</span></code></pre></div>
<pre><code>## [1] 1 0 0</code></pre>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="datioggetti.html#cb190-1" tabindex="-1"></a><span class="fu">as.character</span>(b)</span></code></pre></div>
<pre><code>## [1] &quot;1&quot; &quot;2&quot; &quot;3&quot;</code></pre>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="datioggetti.html#cb192-1" tabindex="-1"></a><span class="fu">as.character</span>(quanto)</span></code></pre></div>
<pre><code>## [1] &quot;molto&quot;      &quot;molto&quot;      &quot;poco&quot;       &quot;moltissimo&quot; &quot;abbastanza&quot;</code></pre>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="datioggetti.html#cb194-1" tabindex="-1"></a><span class="fu">as.logical</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>))</span></code></pre></div>
<pre><code>## [1]  TRUE FALSE  TRUE FALSE</code></pre>
</div>
<div id="vettori-atomici-a-2-o-più-dimensioni-matrici-e-array." class="section level3 hasAnchor" number="4.5.2">
<h3><span class="header-section-number">4.5.2</span> Vettori atomici a 2 o più dimensioni: matrici e array.<a href="datioggetti.html#vettori-atomici-a-2-o-più-dimensioni-matrici-e-array." class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Nella pratica incontrerai prevalentemente strutture di dati a 2 (righe = osservazioni, colonne = variabili) o più (per esempio, righe = osservazioni, colonne = variabili, strati = tempo o luogo nel quale sono state eseguite le misure, identità del soggetto su cui sono state eseguite le misure). Vedrai in seguito come gli oggetti a più di due dimensioni possano essere facilmente trasformati, usando una o più variabili indice per individuare le sottotabelle, in oggetti a 2 dimensioni corrispondenti agli strati degli oggetti a più dimensioni. In R i vettori atomici a due dimensioni sono chiamati matrici e vengono creati:</p>
<ul>
<li><p>con il comando <code>matrix()</code></p></li>
<li><p>estraendo colonne dello stesso tipo da un data frame e usando <code>as.matrix()</code><a href="#fn92" class="footnote-ref" id="fnref92"><sup>92</sup></a></p></li>
<li><p>come risultato di analisi statistiche: per esempio la funzione <code>cor()</code> accetta una matrice numerica e restituisce una matrice di correlazione sempre numerica</p></li>
</ul>
<p>Il comando <code>matrix()</code> prende come input un insieme di dati della dimensione opportuna e lo trasforma in una matrice con un numero di righe e colonne specificato, riempiendo la matrice per colonne (il default) o per righe, e assegna opzionalmente i nomi di righe e colonne. Il comando <code>array()</code> fa lo stesso per gli array.<br />
Prova a esplorare l’aiuto scrivendo nella console:</p>
<pre><code>&gt;?matrix
&gt;?array</code></pre>
<p>Oppure studia con attenzione questo esempio (anche se sei pigr*).<br />
Introduco rapidamente il comando <code>seq()</code>, che crea una sequenza numerica. Il comando ha molte opzioni ed è molto flessibile. Nella versione più semplice # crea una sequenza di uno in 1.</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="datioggetti.html#cb197-1" tabindex="-1"></a><span class="co"># Questi comandi sono equivalenti, e creano una sequenza da 1 a 9</span></span>
<span id="cb197-2"><a href="datioggetti.html#cb197-2" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">9</span></span></code></pre></div>
<pre><code>## [1] 1 2 3 4 5 6 7 8 9</code></pre>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="datioggetti.html#cb199-1" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">9</span>)</span></code></pre></div>
<pre><code>## [1] 1 2 3 4 5 6 7 8 9</code></pre>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="datioggetti.html#cb201-1" tabindex="-1"></a><span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, <span class="at">to =</span> <span class="dv">9</span>, <span class="at">by =</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] 1 2 3 4 5 6 7 8 9</code></pre>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="datioggetti.html#cb203-1" tabindex="-1"></a><span class="co"># una matrice 3x3 riempita per colonne</span></span>
<span id="cb203-2"><a href="datioggetti.html#cb203-2" tabindex="-1"></a>per_colonne <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">9</span>), <span class="at">nrow =</span><span class="dv">3</span>, <span class="at">ncol=</span> <span class="dv">3</span>, </span>
<span id="cb203-3"><a href="datioggetti.html#cb203-3" tabindex="-1"></a>                      <span class="at">dimnames =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="st">&quot;A&quot;</span>,<span class="st">&quot;B&quot;</span>,<span class="st">&quot;C&quot;</span>),<span class="fu">c</span>(<span class="st">&quot;D&quot;</span>,<span class="st">&quot;E&quot;</span>,<span class="st">&quot;F&quot;</span>)))</span>
<span id="cb203-4"><a href="datioggetti.html#cb203-4" tabindex="-1"></a>per_colonne</span></code></pre></div>
<pre><code>##   D E F
## A 1 4 7
## B 2 5 8
## C 3 6 9</code></pre>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="datioggetti.html#cb205-1" tabindex="-1"></a><span class="co"># che succede se il vettore ha la dimensione sbagliata?</span></span>
<span id="cb205-2"><a href="datioggetti.html#cb205-2" tabindex="-1"></a>per_colonne_sbagliato <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">10</span>), <span class="at">nrow =</span><span class="dv">3</span>, <span class="at">ncol=</span> <span class="dv">3</span>, </span>
<span id="cb205-3"><a href="datioggetti.html#cb205-3" tabindex="-1"></a>                      <span class="at">dimnames =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="st">&quot;A&quot;</span>,<span class="st">&quot;B&quot;</span>,<span class="st">&quot;C&quot;</span>),<span class="fu">c</span>(<span class="st">&quot;D&quot;</span>,<span class="st">&quot;E&quot;</span>,<span class="st">&quot;F&quot;</span>)))</span></code></pre></div>
<pre><code>## Warning in matrix(seq(1, 10), nrow = 3, ncol = 3, dimnames = list(c(&quot;A&quot;, : data
## length [10] is not a sub-multiple or multiple of the number of rows [3]</code></pre>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="datioggetti.html#cb207-1" tabindex="-1"></a>per_colonne_sbagliato_2 <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">8</span>), <span class="at">nrow =</span><span class="dv">3</span>, <span class="at">ncol=</span> <span class="dv">3</span>, </span>
<span id="cb207-2"><a href="datioggetti.html#cb207-2" tabindex="-1"></a>                      <span class="at">dimnames =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="st">&quot;A&quot;</span>,<span class="st">&quot;B&quot;</span>,<span class="st">&quot;C&quot;</span>),<span class="fu">c</span>(<span class="st">&quot;D&quot;</span>,<span class="st">&quot;E&quot;</span>,<span class="st">&quot;F&quot;</span>)))</span></code></pre></div>
<pre><code>## Warning in matrix(seq(1, 8), nrow = 3, ncol = 3, dimnames = list(c(&quot;A&quot;, : data
## length [8] is not a sub-multiple or multiple of the number of rows [3]</code></pre>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="datioggetti.html#cb209-1" tabindex="-1"></a><span class="fu">warnings</span>()</span></code></pre></div>
<p>Nota come nel primo caso un valore è rimasto fuori e nel secondo il primo valore della sequenza è stato riciclato: questo è un comportamento frequente di R, che cerca di effettuare, per quanto possibile, le operazioni richieste, anche se gli argomenti sono errati o incompleti: quando comunque è possibile restituire un valore, viene restituito anche un <code>warning</code> che non arresta l’eventuale esecuzione di un programma, altrimenti viene restituito un errore.</p>
<p>Ora proviamo a riempire la stessa matrice per righe:</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="datioggetti.html#cb210-1" tabindex="-1"></a>per_righe <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>), </span>
<span id="cb210-2"><a href="datioggetti.html#cb210-2" tabindex="-1"></a>                    <span class="at">nrow =</span><span class="dv">3</span>, <span class="at">ncol=</span> <span class="dv">3</span>, <span class="at">byrow =</span> T, </span>
<span id="cb210-3"><a href="datioggetti.html#cb210-3" tabindex="-1"></a>                    <span class="at">dimnames =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="st">&quot;A&quot;</span>,<span class="st">&quot;B&quot;</span>,<span class="st">&quot;C&quot;</span>),<span class="fu">c</span>(<span class="st">&quot;D&quot;</span>,<span class="st">&quot;E&quot;</span>,<span class="st">&quot;F&quot;</span>)))</span>
<span id="cb210-4"><a href="datioggetti.html#cb210-4" tabindex="-1"></a>per_righe</span></code></pre></div>
<pre><code>##   D E F
## A 1 2 3
## B 4 5 6
## C 7 8 9</code></pre>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="datioggetti.html#cb212-1" tabindex="-1"></a><span class="co"># ovviamente è possibile creare matrici di valori carattere o logici o interi</span></span>
<span id="cb212-2"><a href="datioggetti.html#cb212-2" tabindex="-1"></a>matrice_logica <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(logico, logico, logico),</span>
<span id="cb212-3"><a href="datioggetti.html#cb212-3" tabindex="-1"></a>                         <span class="at">nrow =</span><span class="dv">3</span>, <span class="at">ncol=</span> <span class="dv">3</span>, <span class="at">byrow =</span> T, </span>
<span id="cb212-4"><a href="datioggetti.html#cb212-4" tabindex="-1"></a>                         <span class="at">dimnames =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="st">&quot;A&quot;</span>,<span class="st">&quot;B&quot;</span>,<span class="st">&quot;C&quot;</span>),<span class="fu">c</span>(<span class="st">&quot;D&quot;</span>,<span class="st">&quot;E&quot;</span>,<span class="st">&quot;F&quot;</span>)))</span>
<span id="cb212-5"><a href="datioggetti.html#cb212-5" tabindex="-1"></a>matrice_logica</span></code></pre></div>
<pre><code>##      D     E     F
## A TRUE FALSE FALSE
## B TRUE FALSE FALSE
## C TRUE FALSE FALSE</code></pre>
<p>L’argomento <code>data</code> della funzione <code>matrix()</code> può essere anche un vettore definito in precedenza o estratto dall’ambiente di lavoro. Nota l’uso della funzione <code>rep()</code>, che crea ripetizioni con pattern anche complessi.</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="datioggetti.html#cb214-1" tabindex="-1"></a>si9 <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">&quot;Yes&quot;</span>,<span class="dv">9</span>)</span>
<span id="cb214-2"><a href="datioggetti.html#cb214-2" tabindex="-1"></a>dimmi_di_si <span class="ot">&lt;-</span> <span class="fu">matrix</span>(si9, <span class="at">nrow=</span> <span class="dv">3</span>, <span class="at">ncol =</span> <span class="dv">3</span>)</span>
<span id="cb214-3"><a href="datioggetti.html#cb214-3" tabindex="-1"></a></span>
<span id="cb214-4"><a href="datioggetti.html#cb214-4" tabindex="-1"></a>mantra <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;amore&quot;</span>,<span class="st">&quot;pace&quot;</span>),<span class="dv">6</span>)</span>
<span id="cb214-5"><a href="datioggetti.html#cb214-5" tabindex="-1"></a>matrice_carattere <span class="ot">&lt;-</span> <span class="fu">matrix</span>(mantra,</span>
<span id="cb214-6"><a href="datioggetti.html#cb214-6" tabindex="-1"></a>                         <span class="at">nrow =</span><span class="dv">3</span>, <span class="at">ncol=</span> <span class="dv">2</span>, <span class="at">byrow =</span> T, </span>
<span id="cb214-7"><a href="datioggetti.html#cb214-7" tabindex="-1"></a>                         <span class="at">dimnames =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="st">&quot;A&quot;</span>,<span class="st">&quot;B&quot;</span>,<span class="st">&quot;C&quot;</span>),<span class="fu">c</span>(<span class="st">&quot;A&quot;</span>,<span class="st">&quot;B&quot;</span>)))</span></code></pre></div>
<pre><code>## Warning in matrix(mantra, nrow = 3, ncol = 2, byrow = T, dimnames = list(c(&quot;A&quot;,
## : data length differs from size of matrix: [12 != 3 x 2]</code></pre>
<p>Nota in che modo vengono stampate le matrici:</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="datioggetti.html#cb216-1" tabindex="-1"></a>per_colonne</span></code></pre></div>
<pre><code>##   D E F
## A 1 4 7
## B 2 5 8
## C 3 6 9</code></pre>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="datioggetti.html#cb218-1" tabindex="-1"></a>matrice_carattere</span></code></pre></div>
<pre><code>##   A       B     
## A &quot;amore&quot; &quot;pace&quot;
## B &quot;amore&quot; &quot;pace&quot;
## C &quot;amore&quot; &quot;pace&quot;</code></pre>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="datioggetti.html#cb220-1" tabindex="-1"></a>matrice_logica</span></code></pre></div>
<pre><code>##      D     E     F
## A TRUE FALSE FALSE
## B TRUE FALSE FALSE
## C TRUE FALSE FALSE</code></pre>
<p>Le matrici hanno come attributi importanti i nomi di riga e colonna (devono essere unici ma una colonna può avere lo stesso nome di una riga) e le dimensioni.</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="datioggetti.html#cb222-1" tabindex="-1"></a><span class="fu">class</span>(matrice_carattere)</span></code></pre></div>
<pre><code>## [1] &quot;matrix&quot; &quot;array&quot;</code></pre>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="datioggetti.html#cb224-1" tabindex="-1"></a><span class="fu">typeof</span>(matrice_carattere)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="datioggetti.html#cb226-1" tabindex="-1"></a><span class="fu">str</span>(matrice_carattere)</span></code></pre></div>
<pre><code>##  chr [1:3, 1:2] &quot;amore&quot; &quot;amore&quot; &quot;amore&quot; &quot;pace&quot; &quot;pace&quot; &quot;pace&quot;
##  - attr(*, &quot;dimnames&quot;)=List of 2
##   ..$ : chr [1:3] &quot;A&quot; &quot;B&quot; &quot;C&quot;
##   ..$ : chr [1:2] &quot;A&quot; &quot;B&quot;</code></pre>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="datioggetti.html#cb228-1" tabindex="-1"></a><span class="fu">dim</span>(matrice_carattere)</span></code></pre></div>
<pre><code>## [1] 3 2</code></pre>
<p>Cosa restituisce la funzione <code>dim()</code>? Anche se non lo sai, puoi determinarlo con una delle funzioni che abbiamo già usato?</p>
<p>Il funzionamento della funzione <code>array()</code> è simile:</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="datioggetti.html#cb230-1" tabindex="-1"></a><span class="co"># creo un array 3x4x3</span></span>
<span id="cb230-2"><a href="datioggetti.html#cb230-2" tabindex="-1"></a>array_per_colonne <span class="ot">&lt;-</span> <span class="fu">array</span>(<span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">36</span>),</span>
<span id="cb230-3"><a href="datioggetti.html#cb230-3" tabindex="-1"></a>                     <span class="at">dim =</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">3</span>),</span>
<span id="cb230-4"><a href="datioggetti.html#cb230-4" tabindex="-1"></a>                     <span class="at">dimnames =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="st">&quot;A&quot;</span>,<span class="st">&quot;B&quot;</span>,<span class="st">&quot;C&quot;</span>),<span class="fu">c</span>(<span class="st">&quot;D&quot;</span>,<span class="st">&quot;E&quot;</span>,<span class="st">&quot;F&quot;</span>,<span class="st">&quot;G&quot;</span>),</span>
<span id="cb230-5"><a href="datioggetti.html#cb230-5" tabindex="-1"></a>                                      <span class="fu">c</span>(<span class="st">&quot;X&quot;</span>,<span class="st">&quot;Y&quot;</span>,<span class="st">&quot;Z&quot;</span>)))</span>
<span id="cb230-6"><a href="datioggetti.html#cb230-6" tabindex="-1"></a><span class="co"># nota come viene riempito e stampato:</span></span>
<span id="cb230-7"><a href="datioggetti.html#cb230-7" tabindex="-1"></a><span class="co"># strato 1, colonna 1, righe 1-n, etc.</span></span>
<span id="cb230-8"><a href="datioggetti.html#cb230-8" tabindex="-1"></a>array_per_colonne</span></code></pre></div>
<pre><code>## , , X
## 
##   D E F  G
## A 1 4 7 10
## B 2 5 8 11
## C 3 6 9 12
## 
## , , Y
## 
##    D  E  F  G
## A 13 16 19 22
## B 14 17 20 23
## C 15 18 21 24
## 
## , , Z
## 
##    D  E  F  G
## A 25 28 31 34
## B 26 29 32 35
## C 27 30 33 36</code></pre>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="datioggetti.html#cb232-1" tabindex="-1"></a><span class="co"># è anche possibile non specificare i nomi</span></span>
<span id="cb232-2"><a href="datioggetti.html#cb232-2" tabindex="-1"></a>array_senza_nomi <span class="ot">&lt;-</span> <span class="fu">array</span>(<span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="at">each =</span> <span class="dv">6</span>),</span>
<span id="cb232-3"><a href="datioggetti.html#cb232-3" tabindex="-1"></a>                          <span class="at">dim =</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">2</span>))</span>
<span id="cb232-4"><a href="datioggetti.html#cb232-4" tabindex="-1"></a>array_senza_nomi</span></code></pre></div>
<pre><code>## , , 1
## 
##      [,1] [,2] [,3]
## [1,]    1    1    2
## [2,]    1    1    2
## [3,]    1    1    2
## 
## , , 2
## 
##      [,1] [,2] [,3]
## [1,]    2    3    3
## [2,]    2    3    3
## [3,]    2    3    3</code></pre>
<p>Nota come sia le matrici che gli array sono vettori che sono conservati in memoria con attributi addizionali (dimensioni, nomi)</p>
<p><code>as.matrix()</code> e <code>as.array()</code> possono essere usati per trasformare altri oggetti in matrici o array (se possible).
Guarda che succede</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="datioggetti.html#cb234-1" tabindex="-1"></a><span class="co"># head() permette di stamparìe solo alcune righe</span></span>
<span id="cb234-2"><a href="datioggetti.html#cb234-2" tabindex="-1"></a><span class="fu">head</span>(Arthritis[,<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>)], <span class="dv">10</span>)</span></code></pre></div>
<pre><code>##    Treatment  Sex
## 1    Treated Male
## 2    Treated Male
## 3    Treated Male
## 4    Treated Male
## 5    Treated Male
## 6    Treated Male
## 7    Treated Male
## 8    Treated Male
## 9    Treated Male
## 10   Treated Male</code></pre>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="datioggetti.html#cb236-1" tabindex="-1"></a><span class="fu">class</span>(Arthritis[,<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>)])</span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="datioggetti.html#cb238-1" tabindex="-1"></a><span class="fu">class</span>(<span class="fu">as.matrix</span>(Arthritis[,<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>)]))</span></code></pre></div>
<pre><code>## [1] &quot;matrix&quot; &quot;array&quot;</code></pre>
<p><code>is.matrix()</code> e <code>is.array()</code> possono essere usati per determinare se un oggetto è una matrice o un array.</p>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb240-1"><a href="datioggetti.html#cb240-1" tabindex="-1"></a>df_a <span class="ot">&lt;-</span> Arthritis[,<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>)]</span>
<span id="cb240-2"><a href="datioggetti.html#cb240-2" tabindex="-1"></a><span class="fu">is.matrix</span>(df_a)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb242-1"><a href="datioggetti.html#cb242-1" tabindex="-1"></a>m_a <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(df_a)</span>
<span id="cb242-2"><a href="datioggetti.html#cb242-2" tabindex="-1"></a><span class="fu">is.matrix</span>(m_a)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb244-1"><a href="datioggetti.html#cb244-1" tabindex="-1"></a><span class="fu">is.array</span>(per_colonne)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Nota che, le matrici, in effetti, sono array.</p>
</div>
</div>
<div id="i-data-frame-e-le-liste." class="section level2 hasAnchor" number="4.6">
<h2><span class="header-section-number">4.6</span> I data frame e le liste.<a href="datioggetti.html#i-data-frame-e-le-liste." class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Matrici e array sono oggetti utili, ma il vincolo che debbano contenere valori dello stesso tipo è piuttosto stringente e la loro organizzazione in righe e colonne è, essa stessa, rigida.<br />
Come hai visto nella <strong>Premessa 2</strong> (paragrafo <a href="datioggetti.html#premessa2">4.1.2</a>) una tabella contiene normalmente variabili di tipo diverso: ogni colonna è, o dovrebbe essere, una variabile, e ogni riga è una singola osservazione; tutte le colonne hanno la stessa lunghezza. In R, questi tipi di oggetti sono chiamati <strong>data frame</strong> e ne abbiamo già visto diversi esempi (<code>Arthritis</code>, <code>Iris</code>, <code>Billboard</code>).</p>
<div id="dataframebenemale" class="section level3 hasAnchor" number="4.6.1">
<h3><span class="header-section-number">4.6.1</span> I data frame, nel bene e nel male.<a href="datioggetti.html#dataframebenemale" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>È possibile creare nuovi <code>data frame</code> in diversi modi:</p>
<ul>
<li><p>con il comando <code>data.frame()</code></p></li>
<li><p>convertendo oggetti a 2 dimensioni esistenti (p.es. una matrice) con <code>as.data.frame()</code></p></li>
<li><p>unendo colonne della stessa lunghezza con il comando <code>cbind()</code></p></li>
</ul>
<p>I pacchetti del <code>tidyverse</code> operano sui data frame e, spesso, operano su oggetti simili ai data frame, le <code>tibbles</code>, con default e proprietà sensibilmente migliorate.<a href="#fn93" class="footnote-ref" id="fnref93"><sup>93</sup></a>.<br />
I data frame sono oggetti molto flessibili (possono addirittura avere colonne che contengono altri data frame!) e, come vedrai, sono gli oggetti che usiamo più frequentemente per trattare tabelle di dati. In passato (versioni precedenti alla 4.0.0)<a href="#fn94" class="footnote-ref" id="fnref94"><sup>94</sup></a> avevano una noiosissima opzione di default che trasformava le colonne di variabili nominali in fattori. Il modo in cui vengono stampati è un tantino ridondante<a href="#fn95" class="footnote-ref" id="fnref95"><sup>95</sup></a> e poco informativo.
Le <code>tibbles</code> hanno proprietà migliori. Prova anche la funzione <code>pillar::glimpse()</code>, come modo alternativo per esplorare un data frame o una tibble.</p>
<p>Per saperne di più su <code>data frames</code> e <code>tibbles</code> scrivi nella console:</p>
<pre><code>?data.frame
?tibble::tibble</code></pre>
<p>Vediamo un po’ di creare dei <code>data frame</code>.</p>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="datioggetti.html#cb247-1" tabindex="-1"></a>data_frame_4 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>,<span class="dv">2</span>),</span>
<span id="cb247-2"><a href="datioggetti.html#cb247-2" tabindex="-1"></a>                           <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">each =</span> <span class="dv">2</span>),</span>
<span id="cb247-3"><a href="datioggetti.html#cb247-3" tabindex="-1"></a>                           mantra[<span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>])</span>
<span id="cb247-4"><a href="datioggetti.html#cb247-4" tabindex="-1"></a>data_frame_4</span></code></pre></div>
<pre><code>##   rep.1.4..2. rep.1.4..each...2. mantra.1.8.
## 1           1                  1       amore
## 2           2                  1        pace
## 3           3                  2       amore
## 4           4                  2        pace
## 5           1                  3       amore
## 6           2                  3        pace
## 7           3                  4       amore
## 8           4                  4        pace</code></pre>
<p>Approfitta per esplorare il comportamento della funzione <code>rep()</code>. Le colonne hanno nomi? Di che tipo è la terza colonna? Di che tipo era il vettore usato per crearla? Qual’è il default del parametro <code>stringsAsFactors</code> nel comando <code>data.frame()</code>?<br />
Puoi assegnare nomi a righe e colonne dopo la creazione del dataframe:</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="datioggetti.html#cb249-1" tabindex="-1"></a><span class="co"># assegno nomi alle colonne:</span></span>
<span id="cb249-2"><a href="datioggetti.html#cb249-2" tabindex="-1"></a><span class="fu">colnames</span>(data_frame_4) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;quattro&quot;</span>,<span class="st">&quot;quattro_coppie&quot;</span>,<span class="st">&quot;mantra&quot;</span>)</span>
<span id="cb249-3"><a href="datioggetti.html#cb249-3" tabindex="-1"></a>data_frame_4</span></code></pre></div>
<pre><code>##   quattro quattro_coppie mantra
## 1       1              1  amore
## 2       2              1   pace
## 3       3              2  amore
## 4       4              2   pace
## 5       1              3  amore
## 6       2              3   pace
## 7       3              4  amore
## 8       4              4   pace</code></pre>
<p>Nota come:</p>
<ul>
<li><p>ho usato un vettore per assegnare nomi;</p></li>
<li><p>se tu avessi fatto girare i comandi in R un oggetto di nome <code>mantra</code> esisterebbe ora come oggetto isolato e come colonna del data frame</p></li>
</ul>
<p>Quali sono i nomi delle righe? Possiamo assegnarli?</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="datioggetti.html#cb251-1" tabindex="-1"></a><span class="co"># i nomi di riga:</span></span>
<span id="cb251-2"><a href="datioggetti.html#cb251-2" tabindex="-1"></a><span class="fu">rownames</span>(data_frame_4)</span></code></pre></div>
<pre><code>## [1] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; &quot;5&quot; &quot;6&quot; &quot;7&quot; &quot;8&quot;</code></pre>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="datioggetti.html#cb253-1" tabindex="-1"></a><span class="co"># ora li assegno</span></span>
<span id="cb253-2"><a href="datioggetti.html#cb253-2" tabindex="-1"></a><span class="fu">rownames</span>(data_frame_4) <span class="ot">&lt;-</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(data_frame_4)]</span>
<span id="cb253-3"><a href="datioggetti.html#cb253-3" tabindex="-1"></a>data_frame_4</span></code></pre></div>
<pre><code>##   quattro quattro_coppie mantra
## a       1              1  amore
## b       2              1   pace
## c       3              2  amore
## d       4              2   pace
## e       1              3  amore
## f       2              3   pace
## g       3              4  amore
## h       4              4   pace</code></pre>
<p>Nota la costante <code>letters</code> e la funzione <code>nrow()</code>.
Puoi creare un data frame convertendo una matrice:</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="datioggetti.html#cb255-1" tabindex="-1"></a>tre_per_tre <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(per_colonne)</span></code></pre></div>
<p>O puoi usare <code>cbind</code>, che unisce per colonne</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb256-1"><a href="datioggetti.html#cb256-1" tabindex="-1"></a>tre_per_sei <span class="ot">&lt;-</span> <span class="fu">cbind</span>(tre_per_tre, per_colonne)</span>
<span id="cb256-2"><a href="datioggetti.html#cb256-2" tabindex="-1"></a>tre_per_sei</span></code></pre></div>
<pre><code>##   D E F D E F
## A 1 4 7 1 4 7
## B 2 5 8 2 5 8
## C 3 6 9 3 6 9</code></pre>
<p>O <code>rbind</code> che unisce per righe</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="datioggetti.html#cb258-1" tabindex="-1"></a>sei_per_tre <span class="ot">&lt;-</span> <span class="fu">rbind</span>(tre_per_tre, per_colonne)</span>
<span id="cb258-2"><a href="datioggetti.html#cb258-2" tabindex="-1"></a>sei_per_tre</span></code></pre></div>
<pre><code>##    D E F
## A  1 4 7
## B  2 5 8
## C  3 6 9
## A1 1 4 7
## B1 2 5 8
## C1 3 6 9</code></pre>
<p>Quando si uniscono molti data frame o data frame di grandi dimensioni si possono usare i comandi equivalenti di <code>dplyr.</code> Prova a eseguire i seguenti comandi nella console:</p>
<pre><code>molta_artrite &lt;- dplyr::bind_rows(Arthritis, Arthritis)
sei_per_tre &lt;- dplyr::bind_cols(tre_per_tre, tre_per_tre)</code></pre>
<p>Ricordati che puoi omettere <code>dplyr::</code> se non c’è ambiguità nel nome della funzione mentre non puoi farlo se una funzione con lo stesso nome lo ha “mascherato” durante il caricamento dei pacchetti; nota come i nomi delle due funzioni <code>bind_rows()</code> e <code>bind_cols()</code> siano più intuitivi di <code>rbind()</code> e <code>cbind()</code>: questa è una caratteristica di molte funzioni e parametri di funzioni del <code>tidyverse.</code></p>
<p>Le tibbles sono una versione “migliorata” dei data frame. Le puoi creare trasformando un data frame on con il comando <code>tibble()</code>:</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="datioggetti.html#cb261-1" tabindex="-1"></a><span class="co"># creare una tibble con as_tibble</span></span>
<span id="cb261-2"><a href="datioggetti.html#cb261-2" tabindex="-1"></a>tib_Arthritis <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(Arthritis)</span>
<span id="cb261-3"><a href="datioggetti.html#cb261-3" tabindex="-1"></a>tib_Arthritis</span></code></pre></div>
<pre><code>## # A tibble: 84 × 5
##       ID Treatment Sex     Age Improved
##    &lt;int&gt; &lt;fct&gt;     &lt;fct&gt; &lt;int&gt; &lt;ord&gt;   
##  1    57 Treated   Male     27 Some    
##  2    46 Treated   Male     29 None    
##  3    77 Treated   Male     30 None    
##  4    17 Treated   Male     32 Marked  
##  5    36 Treated   Male     46 Marked  
##  6    23 Treated   Male     58 Marked  
##  7    75 Treated   Male     59 None    
##  8    39 Treated   Male     59 Marked  
##  9    33 Treated   Male     63 None    
## 10    55 Treated   Male     63 None    
## # ℹ 74 more rows</code></pre>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="datioggetti.html#cb263-1" tabindex="-1"></a><span class="fu">class</span>(tib_Arthritis)</span></code></pre></div>
<pre><code>## [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</code></pre>
<p>Nota che il modo in cui viene stampata una tibble è diverso e prende meno spazio in console. Le <code>tibbles</code> mantengono la classe <code>data.frame</code>.
Puoi anche creare una tibble da 0 con il comando tibble, del pacchetto tibble</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="datioggetti.html#cb265-1" tabindex="-1"></a>la_mia_tibble <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tibble</span>(<span class="at">B =</span> b,</span>
<span id="cb265-2"><a href="datioggetti.html#cb265-2" tabindex="-1"></a>                                <span class="at">F =</span> fattore_non_o)</span></code></pre></div>
<p>Se ti va, puoi esplorare il comando <code>tribble()</code> del pacchetto <code>tibble</code>: è un modo semplice per creare piccolissimi data frame scrivendoli in modo più naturale, per righe invece che per colonne.<br />
Un’ultima cosa: in genere è una pessima idea inserire direttamente in formato interattivo un data frame in R. Tecnicamente puoi farlo creando un data frame nullo e invocando l’editor (che è piattaforma-specifico e molto, molto lento).
Prova ad eseguire questo script:</p>
<pre><code>df &lt;- data.frame(NULL)
# ci vuole un po&#39; per aprire l&#39;editor
df &lt;- edit(df)</code></pre>
<p>Sostituendo <code>df</code> con un nome di un data frame esistente puoi editarlo manualmente.</p>
</div>
<div id="le-liste." class="section level3 hasAnchor" number="4.6.2">
<h3><span class="header-section-number">4.6.2</span> Le liste.<a href="datioggetti.html#le-liste." class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Le liste sono gli oggetti più flessibili in R. Possono contenere tipi di oggetti diversi e non ci sono vincoli al tipo e alla lunghezza (tranne, suppongo, la memoria). Sono importanti perché sono gli oggetti che molte funzioni statistiche restituiscono come risultati.<a href="#fn96" class="footnote-ref" id="fnref96"><sup>96</sup></a><br />
Il comando per creare una lista è, abbastanza prevedibilmente, <code>list()</code>. Se hai tempo, esplora l’aiuto.</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="datioggetti.html#cb267-1" tabindex="-1"></a><span class="co"># creiamo la nostra prima lista</span></span>
<span id="cb267-2"><a href="datioggetti.html#cb267-2" tabindex="-1"></a>la_mia_prima_lista <span class="ot">&lt;-</span> <span class="fu">list</span>(b, due_vettori, mantra, per_colonne)</span>
<span id="cb267-3"><a href="datioggetti.html#cb267-3" tabindex="-1"></a><span class="co"># nota in che modo viene stampata;</span></span>
<span id="cb267-4"><a href="datioggetti.html#cb267-4" tabindex="-1"></a>la_mia_prima_lista</span></code></pre></div>
<pre><code>## [[1]]
## [1] 1 2 3
## 
## [[2]]
## [1] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;d&quot; &quot;e&quot; &quot;f&quot;
## 
## [[3]]
##  [1] &quot;amore&quot; &quot;pace&quot;  &quot;amore&quot; &quot;pace&quot;  &quot;amore&quot; &quot;pace&quot;  &quot;amore&quot; &quot;pace&quot;  &quot;amore&quot;
## [10] &quot;pace&quot;  &quot;amore&quot; &quot;pace&quot; 
## 
## [[4]]
##   D E F
## A 1 4 7
## B 2 5 8
## C 3 6 9</code></pre>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="datioggetti.html#cb269-1" tabindex="-1"></a><span class="fu">str</span>(la_mia_prima_lista)</span></code></pre></div>
<pre><code>## List of 4
##  $ : num [1:3] 1 2 3
##  $ : chr [1:9] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;1&quot; ...
##  $ : chr [1:12] &quot;amore&quot; &quot;pace&quot; &quot;amore&quot; &quot;pace&quot; ...
##  $ : int [1:3, 1:3] 1 2 3 4 5 6 7 8 9
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##   .. ..$ : chr [1:3] &quot;A&quot; &quot;B&quot; &quot;C&quot;
##   .. ..$ : chr [1:3] &quot;D&quot; &quot;E&quot; &quot;F&quot;</code></pre>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb271-1"><a href="datioggetti.html#cb271-1" tabindex="-1"></a><span class="fu">is.list</span>(la_mia_prima_lista)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb273-1"><a href="datioggetti.html#cb273-1" tabindex="-1"></a><span class="co"># i data frame sono liste!</span></span>
<span id="cb273-2"><a href="datioggetti.html#cb273-2" tabindex="-1"></a><span class="fu">is.list</span>(Arthritis)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb275-1"><a href="datioggetti.html#cb275-1" tabindex="-1"></a><span class="co"># le liste possono avere nomi, e possono essere annidate, cioé contenere altre liste</span></span>
<span id="cb275-2"><a href="datioggetti.html#cb275-2" tabindex="-1"></a>la_mia_prima_lista_con_nomi  <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">a =</span> b, </span>
<span id="cb275-3"><a href="datioggetti.html#cb275-3" tabindex="-1"></a>                                     <span class="at">b =</span> due_vettori, </span>
<span id="cb275-4"><a href="datioggetti.html#cb275-4" tabindex="-1"></a>                                     <span class="at">c =</span> mantra, </span>
<span id="cb275-5"><a href="datioggetti.html#cb275-5" tabindex="-1"></a>                                     <span class="at">d =</span> per_colonne,</span>
<span id="cb275-6"><a href="datioggetti.html#cb275-6" tabindex="-1"></a>                                     <span class="at">e =</span> la_mia_prima_lista)</span>
<span id="cb275-7"><a href="datioggetti.html#cb275-7" tabindex="-1"></a><span class="fu">str</span>(la_mia_prima_lista_con_nomi)</span></code></pre></div>
<pre><code>## List of 5
##  $ a: num [1:3] 1 2 3
##  $ b: chr [1:9] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;1&quot; ...
##  $ c: chr [1:12] &quot;amore&quot; &quot;pace&quot; &quot;amore&quot; &quot;pace&quot; ...
##  $ d: int [1:3, 1:3] 1 2 3 4 5 6 7 8 9
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##   .. ..$ : chr [1:3] &quot;A&quot; &quot;B&quot; &quot;C&quot;
##   .. ..$ : chr [1:3] &quot;D&quot; &quot;E&quot; &quot;F&quot;
##  $ e:List of 4
##   ..$ : num [1:3] 1 2 3
##   ..$ : chr [1:9] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;1&quot; ...
##   ..$ : chr [1:12] &quot;amore&quot; &quot;pace&quot; &quot;amore&quot; &quot;pace&quot; ...
##   ..$ : int [1:3, 1:3] 1 2 3 4 5 6 7 8 9
##   .. ..- attr(*, &quot;dimnames&quot;)=List of 2
##   .. .. ..$ : chr [1:3] &quot;A&quot; &quot;B&quot; &quot;C&quot;
##   .. .. ..$ : chr [1:3] &quot;D&quot; &quot;E&quot; &quot;F&quot;</code></pre>
<div class="sourceCode" id="cb277"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb277-1"><a href="datioggetti.html#cb277-1" tabindex="-1"></a><span class="co"># si può anche creare una lista e poi riempirla</span></span>
<span id="cb277-2"><a href="datioggetti.html#cb277-2" tabindex="-1"></a>la_mia_lista <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb277-3"><a href="datioggetti.html#cb277-3" tabindex="-1"></a>la_mia_lista[[<span class="dv">1</span>]] <span class="ot">&lt;-</span> i_nomi</span></code></pre></div>
<p>Vedremo dopo il significato di <code>[[]]</code>.
Imparare ad usare le liste è molto importante e dovresti esercitarti nella loro creazione e sul modo in cui si selezionano ed estraggono elementi dalle liste (<a href="datioggetti.html#indsel">4.8</a>).</p>
</div>
</div>
<div id="altre-cose-strane-tabelle-di-conte-serie-temporali-date-e-ore." class="section level2 hasAnchor" number="4.7">
<h2><span class="header-section-number">4.7</span> <em>Altre cose strane: tabelle di conte, serie temporali, date e ore.</em><a href="datioggetti.html#altre-cose-strane-tabelle-di-conte-serie-temporali-date-e-ore." class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Ci sono alcuni altre strutture di dati che hanno proprietà speciali: potrebbero servirti, ma, se hai fretta <strong>puoi saltare questo paragrafo</strong>.</p>
<p>In particolare, R ha classi particolari per:</p>
<ul>
<li><p>le tabelle di conte: si ottengono come risultato della funzione <code>table()</code>, che restituisce tabelle di frequenza o di contingenza (vettori, matrici e array) di numeri interi, derivati dalle conte dell’occorrenza di combinazioni di variabili quantitative</p></li>
<li><p>le serie temporali: si creano con la funzione <code>ts()</code> e contenogno solo i valori e l’indicazione della frequenza (annuale, mensile, etc.)</p></li>
<li><p>gli oggetti di tipo data (<code>date</code>) e data/tempo (<code>date-time</code>) sono particolarmente importanti, sia perché richiedono la possibilità di stampa in formati diversi, sia perché i fusi orari possono introdurre delle complicazioni nel confronto delle ore<a href="#fn97" class="footnote-ref" id="fnref97"><sup>97</sup></a></p></li>
</ul>
<p>Prova a esplorare l’aiuto sulle funzioni scrivendo (o copiando e incollando) nella tua console:</p>
<pre><code>?table
?ts
?DateTimeClasses
?as.Date</code></pre>
<p>Oppure studia questi semplici esempi:</p>
<div class="sourceCode" id="cb279"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb279-1"><a href="datioggetti.html#cb279-1" tabindex="-1"></a><span class="co"># Tabelle</span></span>
<span id="cb279-2"><a href="datioggetti.html#cb279-2" tabindex="-1"></a><span class="co"># ecco una tabella che conta il numero di casi con nessun miglioramento (None)</span></span>
<span id="cb279-3"><a href="datioggetti.html#cb279-3" tabindex="-1"></a><span class="co"># qualche miglioramento (Some) e un deciso miglioramento (Marked), </span></span>
<span id="cb279-4"><a href="datioggetti.html#cb279-4" tabindex="-1"></a><span class="co"># in funzione del trattamento (Placebo o Treated) e del sesso</span></span>
<span id="cb279-5"><a href="datioggetti.html#cb279-5" tabindex="-1"></a>tabella_artrite <span class="ot">&lt;-</span> <span class="fu">table</span>(Arthritis<span class="sc">$</span>Treatment, Arthritis<span class="sc">$</span>Improved, Arthritis<span class="sc">$</span>Sex)</span>
<span id="cb279-6"><a href="datioggetti.html#cb279-6" tabindex="-1"></a>tabella_artrite</span></code></pre></div>
<pre><code>## , ,  = Female
## 
##          
##           None Some Marked
##   Placebo   19    7      6
##   Treated    6    5     16
## 
## , ,  = Male
## 
##          
##           None Some Marked
##   Placebo   10    0      1
##   Treated    7    2      5</code></pre>
<div class="sourceCode" id="cb281"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb281-1"><a href="datioggetti.html#cb281-1" tabindex="-1"></a><span class="co"># ha classe tabella ma è anche un array di interi!</span></span>
<span id="cb281-2"><a href="datioggetti.html#cb281-2" tabindex="-1"></a><span class="fu">class</span>(tabella_artrite)</span></code></pre></div>
<pre><code>## [1] &quot;table&quot;</code></pre>
<div class="sourceCode" id="cb283"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb283-1"><a href="datioggetti.html#cb283-1" tabindex="-1"></a><span class="fu">is.array</span>(tabella_artrite)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb285"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb285-1"><a href="datioggetti.html#cb285-1" tabindex="-1"></a><span class="fu">is.integer</span>((tabella_artrite))</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Le serie temporali (time series) sono importanti in molti campi, ma specialmente in economia. R ha oggetti speciali per le serie temporali, che sono generati dalla funzione <code>ts()</code>.</p>
<div class="sourceCode" id="cb287"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb287-1"><a href="datioggetti.html#cb287-1" tabindex="-1"></a><span class="co"># un oggetto di classe time series:</span></span>
<span id="cb287-2"><a href="datioggetti.html#cb287-2" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;AirPassengers&quot;</span>)</span>
<span id="cb287-3"><a href="datioggetti.html#cb287-3" tabindex="-1"></a><span class="co"># sono i totali, in migliaia, dei passaggeri delle linee aeree mondiali dal 1949 al 1960, per mese</span></span>
<span id="cb287-4"><a href="datioggetti.html#cb287-4" tabindex="-1"></a>AirPassengers</span></code></pre></div>
<pre><code>##      Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
## 1949 112 118 132 129 121 135 148 148 136 119 104 118
## 1950 115 126 141 135 125 149 170 170 158 133 114 140
## 1951 145 150 178 163 172 178 199 199 184 162 146 166
## 1952 171 180 193 181 183 218 230 242 209 191 172 194
## 1953 196 196 236 235 229 243 264 272 237 211 180 201
## 1954 204 188 235 227 234 264 302 293 259 229 203 229
## 1955 242 233 267 269 270 315 364 347 312 274 237 278
## 1956 284 277 317 313 318 374 413 405 355 306 271 306
## 1957 315 301 356 348 355 422 465 467 404 347 305 336
## 1958 340 318 362 348 363 435 491 505 404 359 310 337
## 1959 360 342 406 396 420 472 548 559 463 407 362 405
## 1960 417 391 419 461 472 535 622 606 508 461 390 432</code></pre>
<div class="sourceCode" id="cb289"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb289-1"><a href="datioggetti.html#cb289-1" tabindex="-1"></a><span class="co"># nota come sia formattato come una matrice</span></span>
<span id="cb289-2"><a href="datioggetti.html#cb289-2" tabindex="-1"></a></span>
<span id="cb289-3"><a href="datioggetti.html#cb289-3" tabindex="-1"></a><span class="co"># creiamo una serie fittizia con frequenza annuale</span></span>
<span id="cb289-4"><a href="datioggetti.html#cb289-4" tabindex="-1"></a>i_miei_anni <span class="ot">&lt;-</span><span class="fu">ts</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">50</span>, <span class="at">start =</span> <span class="dv">1960</span>, <span class="at">frequency =</span> <span class="dv">1</span>)</span>
<span id="cb289-5"><a href="datioggetti.html#cb289-5" tabindex="-1"></a><span class="co"># per frequency 1 rappresenta gli anni, 4 i trimestri, 12 i mesi, </span></span>
<span id="cb289-6"><a href="datioggetti.html#cb289-6" tabindex="-1"></a><span class="co"># 6 groups di 10 minuti in un&#39;ora, 7 i giorni, 24 le ore in un giorno</span></span>
<span id="cb289-7"><a href="datioggetti.html#cb289-7" tabindex="-1"></a><span class="co"># 30 i mesi in un anno</span></span>
<span id="cb289-8"><a href="datioggetti.html#cb289-8" tabindex="-1"></a><span class="fu">print</span>(i_miei_anni)</span></code></pre></div>
<pre><code>## Time Series:
## Start = 1960 
## End = 2009 
## Frequency = 1 
##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25
## [26] 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50</code></pre>
<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb291-1"><a href="datioggetti.html#cb291-1" tabindex="-1"></a><span class="co"># ora una serie mensile, dal 1960 al 1968</span></span>
<span id="cb291-2"><a href="datioggetti.html#cb291-2" tabindex="-1"></a>(i_miei_mesi <span class="ot">&lt;-</span> <span class="fu">ts</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">50</span>,<span class="dv">50</span><span class="sc">:</span><span class="dv">1</span>), <span class="at">start =</span> <span class="fu">c</span>(<span class="dv">1960</span>,<span class="dv">2</span>), <span class="at">frequency =</span> <span class="dv">12</span>))</span></code></pre></div>
<pre><code>##      Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
## 1960       1   2   3   4   5   6   7   8   9  10  11
## 1961  12  13  14  15  16  17  18  19  20  21  22  23
## 1962  24  25  26  27  28  29  30  31  32  33  34  35
## 1963  36  37  38  39  40  41  42  43  44  45  46  47
## 1964  48  49  50  50  49  48  47  46  45  44  43  42
## 1965  41  40  39  38  37  36  35  34  33  32  31  30
## 1966  29  28  27  26  25  24  23  22  21  20  19  18
## 1967  17  16  15  14  13  12  11  10   9   8   7   6
## 1968   5   4   3   2   1</code></pre>
<div class="sourceCode" id="cb293"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb293-1"><a href="datioggetti.html#cb293-1" tabindex="-1"></a><span class="co"># un calendario settimanale, che parte dal 12° giorno della 12° settimana</span></span>
<span id="cb293-2"><a href="datioggetti.html#cb293-2" tabindex="-1"></a>i_miei_giorni <span class="ot">&lt;-</span> <span class="fu">ts</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>,<span class="dv">7</span><span class="sc">:</span><span class="dv">1</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>,<span class="dv">7</span><span class="sc">:</span><span class="dv">1</span>), <span class="at">start =</span> <span class="fu">c</span>(<span class="dv">12</span>,<span class="dv">2</span>), <span class="at">frequency =</span> <span class="dv">7</span>)</span>
<span id="cb293-3"><a href="datioggetti.html#cb293-3" tabindex="-1"></a><span class="fu">print</span>(i_miei_giorni, <span class="at">calendar =</span> T)</span></code></pre></div>
<pre><code>##    p1 p2 p3 p4 p5 p6 p7
## 12     1  2  3  4  5  6
## 13  7  7  6  5  4  3  2
## 14  1  1  2  3  4  5  6
## 15  7  7  6  5  4  3  2
## 16  1</code></pre>
<p>Anche gli oggetti di tempo e data hanno comandi dedicati. Ecco per esempio un vettore di variabili di tipo carattere, nel formato di default per le date: anno, mese, giorno</p>
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb295-1"><a href="datioggetti.html#cb295-1" tabindex="-1"></a>le_mie_date <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;1962/02/14&quot;</span>,<span class="st">&quot;1964/12/07&quot;</span>)</span>
<span id="cb295-2"><a href="datioggetti.html#cb295-2" tabindex="-1"></a><span class="fu">typeof</span>(le_mie_date)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="datioggetti.html#cb297-1" tabindex="-1"></a>le_mie_date_sbagliate <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;14/02/1962&quot;</span>,<span class="st">&quot;07/12/1964&quot;</span>)</span>
<span id="cb297-2"><a href="datioggetti.html#cb297-2" tabindex="-1"></a></span>
<span id="cb297-3"><a href="datioggetti.html#cb297-3" tabindex="-1"></a><span class="co"># convertiamo in date</span></span>
<span id="cb297-4"><a href="datioggetti.html#cb297-4" tabindex="-1"></a>le_mie_Date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(le_mie_date)</span>
<span id="cb297-5"><a href="datioggetti.html#cb297-5" tabindex="-1"></a><span class="fu">typeof</span>(le_mie_Date)</span></code></pre></div>
<pre><code>## [1] &quot;double&quot;</code></pre>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb299-1"><a href="datioggetti.html#cb299-1" tabindex="-1"></a><span class="co"># uso la coercizione per trasformare in numero</span></span>
<span id="cb299-2"><a href="datioggetti.html#cb299-2" tabindex="-1"></a><span class="fu">as.numeric</span>(le_mie_Date)</span></code></pre></div>
<pre><code>## [1] -2878 -1851</code></pre>
<p>Nota come si tratti di interi: il numero di giorni dal 1/1/1970 (negativi se la data è precedente). Fornendo a R la formattazione corretta è possibile convertire diversi formati</p>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb301-1"><a href="datioggetti.html#cb301-1" tabindex="-1"></a>le_mie_Date_formattate <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(le_mie_date_sbagliate, <span class="st">&quot;%d/%m/%Y&quot;</span>)</span>
<span id="cb301-2"><a href="datioggetti.html#cb301-2" tabindex="-1"></a>le_mie_Date_formattate</span></code></pre></div>
<pre><code>## [1] &quot;1962-02-14&quot; &quot;1964-12-07&quot;</code></pre>
<p>Esplora l’aiuto di <code>as.Date</code> per i diversi codici di formattazione. Ovviamente il formato si può cambiare:</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="datioggetti.html#cb303-1" tabindex="-1"></a>le_mie_Date_formattate <span class="ot">&lt;-</span> <span class="fu">format</span>(le_mie_Date_formattate, <span class="at">format =</span> <span class="st">&quot;%A %d %B %y&quot;</span>)</span>
<span id="cb303-2"><a href="datioggetti.html#cb303-2" tabindex="-1"></a>le_mie_Date_formattate</span></code></pre></div>
<pre><code>## [1] &quot;Wednesday 14 February 62&quot; &quot;Monday 07 December 64&quot;</code></pre>
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb305-1"><a href="datioggetti.html#cb305-1" tabindex="-1"></a><span class="fu">format</span>(le_mie_Date_formattate, <span class="at">format =</span> <span class="st">&quot;%a %d %b %y&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Wednesday 14 February 62&quot; &quot;Monday 07 December 64   &quot;</code></pre>
<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb307-1"><a href="datioggetti.html#cb307-1" tabindex="-1"></a>le_mie_Date_formattate</span></code></pre></div>
<pre><code>## [1] &quot;Wednesday 14 February 62&quot; &quot;Monday 07 December 64&quot;</code></pre>
<p>Ci sono funzioni speciali per ottenere l’ora e la data di sistema e si possono fare operazioni su date:</p>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb309-1"><a href="datioggetti.html#cb309-1" tabindex="-1"></a>oggi <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb309-2"><a href="datioggetti.html#cb309-2" tabindex="-1"></a>ora <span class="ot">&lt;-</span> <span class="fu">date</span>()</span></code></pre></div>
<p>Si possono calcolare differenze fra date, in diverse unità. Scrivi questo nella console:</p>
<pre><code>&gt;?difftime</code></pre>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="datioggetti.html#cb311-1" tabindex="-1"></a><span class="fu">difftime</span>(le_mie_Date[<span class="dv">2</span>], le_mie_Date[<span class="dv">1</span>], <span class="at">units =</span> <span class="st">&quot;weeks&quot;</span>)</span></code></pre></div>
<pre><code>## Time difference of 146.7143 weeks</code></pre>
<p>Se vuoi saperne di più sui formati di data e tempo leggi <a href="https://adv-r.hadley.nz/vectors-chap.html?q=date#dates">Advanced R</a> o la <a href="https://cran.r-project.org/web/packages/lubridate/vignettes/lubridate.html">vignetta</a> per il pacchetto <code>lubridate.</code></p>
</div>
<div id="indsel" class="section level2 hasAnchor" number="4.8">
<h2><span class="header-section-number">4.8</span> Indirizzare, selezionare.<a href="datioggetti.html#indsel" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Un’attività fondamentale in R è quella di selezionare singoli elementi o gruppi di elementi appartenenti ad oggetti più complessi, in modo da poterli visualizzare, utilizzare come input in altri comandi, o cambiarne il valore.<br />
Anche se nel capitolo <a href="wrangling.html#wrangling">9</a> vedremo alcuni comandi piuttosto intuitivi usati per estrarre colonne, righe o sottoinsiemi da un data frame o una tibble, è indispensabile conoscere gli operatori di base, come <code>[]</code>, <code>[[]]</code> e <code>$</code>.</p>
<div id="indirizzare-per-posizione." class="section level3 hasAnchor" number="4.8.1">
<h3><span class="header-section-number">4.8.1</span> Indirizzare per posizione.<a href="datioggetti.html#indirizzare-per-posizione." class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Per tutti i tipi di vettori di R è possibile indirizzare singoli elementi per posizione usando <code>[]</code>.<br />
Ogni elemento di un vettore ha un indice e in R gli indici partono da 1 (l’ho già detto?). Nei vettori a una dimensione sarà possibile indirizzare un singolo elemento indicandone la posizione, o gruppi di elementi usando una sequenza o un vettore di posizioni, adiacenti o non adiacenti. Nei vettori a 2 o più dimensioni (matrici, array, data frame) è possibile indirizzare singole posizioni (usando gli indici del singolo elemento per tutte le dimensioni) o gruppi di elementi appartenenti a diverse righe, colonne, strati.</p>
<div class="sourceCode" id="cb313"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb313-1"><a href="datioggetti.html#cb313-1" tabindex="-1"></a><span class="co"># partiamo da un singolo vettore ad una dimensione </span></span>
<span id="cb313-2"><a href="datioggetti.html#cb313-2" tabindex="-1"></a>due_vettori</span></code></pre></div>
<pre><code>## [1] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;d&quot; &quot;e&quot; &quot;f&quot;</code></pre>
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb315-1"><a href="datioggetti.html#cb315-1" tabindex="-1"></a><span class="co"># ed estraiamo il 3° elemento</span></span>
<span id="cb315-2"><a href="datioggetti.html#cb315-2" tabindex="-1"></a>due_vettori[<span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [1] &quot;3&quot;</code></pre>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="datioggetti.html#cb317-1" tabindex="-1"></a><span class="co"># i primi 3</span></span>
<span id="cb317-2"><a href="datioggetti.html#cb317-2" tabindex="-1"></a>due_vettori[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [1] &quot;1&quot; &quot;2&quot; &quot;3&quot;</code></pre>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="datioggetti.html#cb319-1" tabindex="-1"></a><span class="co"># i primi tre, ma in ordine inverso</span></span>
<span id="cb319-2"><a href="datioggetti.html#cb319-2" tabindex="-1"></a>due_vettori[<span class="dv">3</span><span class="sc">:</span><span class="dv">1</span>]</span></code></pre></div>
<pre><code>## [1] &quot;3&quot; &quot;2&quot; &quot;1&quot;</code></pre>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="datioggetti.html#cb321-1" tabindex="-1"></a><span class="co"># con un vettore di posizioni (adiacenti o meno)</span></span>
<span id="cb321-2"><a href="datioggetti.html#cb321-2" tabindex="-1"></a>due_vettori[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">7</span>)]</span></code></pre></div>
<pre><code>## [1] &quot;1&quot; &quot;2&quot; &quot;1&quot; &quot;d&quot;</code></pre>
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb323-1"><a href="datioggetti.html#cb323-1" tabindex="-1"></a><span class="co"># naturalmente possiamo usare queste espressioni per assegnare l&#39;oggetto </span></span>
<span id="cb323-2"><a href="datioggetti.html#cb323-2" tabindex="-1"></a><span class="co"># risultante a un nome</span></span>
<span id="cb323-3"><a href="datioggetti.html#cb323-3" tabindex="-1"></a>quattro_elementi <span class="ot">&lt;-</span> due_vettori[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">7</span>)]</span>
<span id="cb323-4"><a href="datioggetti.html#cb323-4" tabindex="-1"></a><span class="co"># ripetere l&#39;indice di una posizione è l&#39;equivalente di duplicare o </span></span>
<span id="cb323-5"><a href="datioggetti.html#cb323-5" tabindex="-1"></a><span class="co"># triplicare l&#39;elemento nel vettore che ne risulta</span></span>
<span id="cb323-6"><a href="datioggetti.html#cb323-6" tabindex="-1"></a>due_vettori[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>)]</span></code></pre></div>
<pre><code>## [1] &quot;1&quot; &quot;1&quot; &quot;1&quot; &quot;2&quot; &quot;2&quot; &quot;2&quot;</code></pre>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="datioggetti.html#cb325-1" tabindex="-1"></a><span class="co"># possiamo usare gli indici per cambiare singoli elementi o elementi multipli </span></span>
<span id="cb325-2"><a href="datioggetti.html#cb325-2" tabindex="-1"></a><span class="co"># di un vettore esistente</span></span>
<span id="cb325-3"><a href="datioggetti.html#cb325-3" tabindex="-1"></a>a</span></code></pre></div>
<pre><code>## [1] 1 2 3</code></pre>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb327-1"><a href="datioggetti.html#cb327-1" tabindex="-1"></a>a[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb327-2"><a href="datioggetti.html#cb327-2" tabindex="-1"></a>a</span></code></pre></div>
<pre><code>## [1] 1 2 4</code></pre>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="datioggetti.html#cb329-1" tabindex="-1"></a>a[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>)] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">1</span>)</span>
<span id="cb329-2"><a href="datioggetti.html#cb329-2" tabindex="-1"></a>a</span></code></pre></div>
<pre><code>## [1] 3 2 1</code></pre>
<p>Ovviamente, indirizzare e selezionare in oggetti a due o più dimensioni è più complesso, ma abbastanza intuitivo. In un oggetto a due dimensioni, come una matrice o un data frame, se usiamo un solo indice indirizziamo le colonne.</p>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="datioggetti.html#cb331-1" tabindex="-1"></a>tre_per_tre</span></code></pre></div>
<pre><code>##   D E F
## A 1 4 7
## B 2 5 8
## C 3 6 9</code></pre>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb333-1"><a href="datioggetti.html#cb333-1" tabindex="-1"></a>tre_per_tre[<span class="dv">2</span>]</span></code></pre></div>
<pre><code>##   E
## A 4
## B 5
## C 6</code></pre>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb335-1"><a href="datioggetti.html#cb335-1" tabindex="-1"></a>tre_per_tre[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)]</span></code></pre></div>
<pre><code>##   D E
## A 1 4
## B 2 5
## C 3 6</code></pre>
<p>Per indirizzare le righe possiamo usare la notazione [n,]: “,” seleziona tutte le colonne o, analogamente, tutte le righe:</p>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb337-1"><a href="datioggetti.html#cb337-1" tabindex="-1"></a>tre_per_tre[<span class="dv">2</span>,]</span></code></pre></div>
<pre><code>##   D E F
## B 2 5 8</code></pre>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="datioggetti.html#cb339-1" tabindex="-1"></a>tre_per_tre[,<span class="dv">2</span>]</span></code></pre></div>
<pre><code>## [1] 4 5 6</code></pre>
<p>Possiamo indirizzare un singolo elemento usando entrambi gli indici, di riga e colonna o indirizzare un gruppo di elementi, adiacenti o meno, usando vettori di posizioni:</p>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="datioggetti.html#cb341-1" tabindex="-1"></a><span class="co"># indici di riga e colonna</span></span>
<span id="cb341-2"><a href="datioggetti.html#cb341-2" tabindex="-1"></a>tre_per_tre[<span class="dv">1</span>,<span class="dv">1</span>]</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb343-1"><a href="datioggetti.html#cb343-1" tabindex="-1"></a><span class="co"># vettori di posizioni</span></span>
<span id="cb343-2"><a href="datioggetti.html#cb343-2" tabindex="-1"></a>tre_per_tre[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>),<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)]</span></code></pre></div>
<pre><code>##   D E
## A 1 4
## B 2 5</code></pre>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb345-1"><a href="datioggetti.html#cb345-1" tabindex="-1"></a>tre_per_tre[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>),<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>)]</span></code></pre></div>
<pre><code>##   D F
## A 1 7
## C 3 9</code></pre>
<p>Vale quanto detto in precedenza: possiamo usare questa procedura per attribuire gli oggetti risultanti ad altri nomi o per assegnare nuovi valori a elementi singoli o multipli:</p>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="datioggetti.html#cb347-1" tabindex="-1"></a><span class="co"># usare indici per assegnare</span></span>
<span id="cb347-2"><a href="datioggetti.html#cb347-2" tabindex="-1"></a>due_per_due <span class="ot">&lt;-</span> tre_per_tre[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>),<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>)]</span>
<span id="cb347-3"><a href="datioggetti.html#cb347-3" tabindex="-1"></a>due_per_due</span></code></pre></div>
<pre><code>##   D F
## A 1 7
## C 3 9</code></pre>
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb349-1"><a href="datioggetti.html#cb349-1" tabindex="-1"></a>due_per_due[<span class="dv">1</span>,<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb349-2"><a href="datioggetti.html#cb349-2" tabindex="-1"></a>due_per_due</span></code></pre></div>
<pre><code>##   D F
## A 2 7
## C 3 9</code></pre>
<div class="sourceCode" id="cb351"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb351-1"><a href="datioggetti.html#cb351-1" tabindex="-1"></a><span class="co"># lo stesso vale per i data frame</span></span>
<span id="cb351-2"><a href="datioggetti.html#cb351-2" tabindex="-1"></a>iris[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa</code></pre>
<p>Principi analoghi valgono per gli array:</p>
<div class="sourceCode" id="cb353"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb353-1"><a href="datioggetti.html#cb353-1" tabindex="-1"></a>array_senza_nomi</span></code></pre></div>
<pre><code>## , , 1
## 
##      [,1] [,2] [,3]
## [1,]    1    1    2
## [2,]    1    1    2
## [3,]    1    1    2
## 
## , , 2
## 
##      [,1] [,2] [,3]
## [1,]    2    3    3
## [2,]    2    3    3
## [3,]    2    3    3</code></pre>
<div class="sourceCode" id="cb355"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb355-1"><a href="datioggetti.html#cb355-1" tabindex="-1"></a><span class="co"># un vettore di un elemento</span></span>
<span id="cb355-2"><a href="datioggetti.html#cb355-2" tabindex="-1"></a>array_senza_nomi[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">1</span>]</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb357"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb357-1"><a href="datioggetti.html#cb357-1" tabindex="-1"></a><span class="co"># un vettore composto dalle prime tre righe della 2° colonna del 2° strato</span></span>
<span id="cb357-2"><a href="datioggetti.html#cb357-2" tabindex="-1"></a>array_senza_nomi[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">2</span>]</span></code></pre></div>
<pre><code>## [1] 3 3 3</code></pre>
<div class="sourceCode" id="cb359"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb359-1"><a href="datioggetti.html#cb359-1" tabindex="-1"></a><span class="co"># la , può essere usata per intere righe o colonne</span></span>
<span id="cb359-2"><a href="datioggetti.html#cb359-2" tabindex="-1"></a>iris[<span class="dv">1</span>,]</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa</code></pre>
<div class="sourceCode" id="cb361"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb361-1"><a href="datioggetti.html#cb361-1" tabindex="-1"></a>array_senza_nomi[,<span class="dv">1</span>,<span class="dv">1</span>]</span></code></pre></div>
<pre><code>## [1] 1 1 1</code></pre>
<div class="sourceCode" id="cb363"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb363-1"><a href="datioggetti.html#cb363-1" tabindex="-1"></a>array_senza_nomi[<span class="dv">1</span>,<span class="dv">2</span>,]</span></code></pre></div>
<pre><code>## [1] 1 3</code></pre>
<p>Anche per le liste (e per le liste annidate) è possibile usare l’indirizzamento per posizione con <code>[]</code>, ma gli elementi vengono estratti come liste. Per estrarre un elemento di una lista con la sua classe di origine è necessario usare l’operatore <code>[[]]</code>. E’ importante ricordare bene l’uso di [] e [[]] per le liste, perché altrimenti si possono ottenere risultati erronei o inattesi.<br />
Infine, per i vettori atomici a più di una dimensione (matrici e array), bisogna fornire indici per tutte le dimensioni. Che succede se usi una sola dimensione? prova da solo con <code>array_senza_nomi</code>.</p>
<div class="sourceCode" id="cb365"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb365-1"><a href="datioggetti.html#cb365-1" tabindex="-1"></a><span class="co"># una lista annidata</span></span>
<span id="cb365-2"><a href="datioggetti.html#cb365-2" tabindex="-1"></a>la_mia_prima_lista_con_nomi</span></code></pre></div>
<pre><code>## $a
## [1] 1 2 3
## 
## $b
## [1] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;d&quot; &quot;e&quot; &quot;f&quot;
## 
## $c
##  [1] &quot;amore&quot; &quot;pace&quot;  &quot;amore&quot; &quot;pace&quot;  &quot;amore&quot; &quot;pace&quot;  &quot;amore&quot; &quot;pace&quot;  &quot;amore&quot;
## [10] &quot;pace&quot;  &quot;amore&quot; &quot;pace&quot; 
## 
## $d
##   D E F
## A 1 4 7
## B 2 5 8
## C 3 6 9
## 
## $e
## $e[[1]]
## [1] 1 2 3
## 
## $e[[2]]
## [1] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;d&quot; &quot;e&quot; &quot;f&quot;
## 
## $e[[3]]
##  [1] &quot;amore&quot; &quot;pace&quot;  &quot;amore&quot; &quot;pace&quot;  &quot;amore&quot; &quot;pace&quot;  &quot;amore&quot; &quot;pace&quot;  &quot;amore&quot;
## [10] &quot;pace&quot;  &quot;amore&quot; &quot;pace&quot; 
## 
## $e[[4]]
##   D E F
## A 1 4 7
## B 2 5 8
## C 3 6 9</code></pre>
<div class="sourceCode" id="cb367"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb367-1"><a href="datioggetti.html#cb367-1" tabindex="-1"></a><span class="co"># il primo elemento, come lista</span></span>
<span id="cb367-2"><a href="datioggetti.html#cb367-2" tabindex="-1"></a>la_mia_prima_lista_con_nomi[<span class="dv">1</span>]</span></code></pre></div>
<pre><code>## $a
## [1] 1 2 3</code></pre>
<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb369-1"><a href="datioggetti.html#cb369-1" tabindex="-1"></a><span class="fu">class</span>(la_mia_prima_lista_con_nomi[<span class="dv">1</span>])</span></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
<div class="sourceCode" id="cb371"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb371-1"><a href="datioggetti.html#cb371-1" tabindex="-1"></a><span class="co"># con la sua classe originale</span></span>
<span id="cb371-2"><a href="datioggetti.html#cb371-2" tabindex="-1"></a>la_mia_prima_lista_con_nomi[[<span class="dv">1</span>]]</span></code></pre></div>
<pre><code>## [1] 1 2 3</code></pre>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb373-1"><a href="datioggetti.html#cb373-1" tabindex="-1"></a><span class="fu">class</span>(la_mia_prima_lista_con_nomi[[<span class="dv">1</span>]])</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb375-1"><a href="datioggetti.html#cb375-1" tabindex="-1"></a><span class="co"># un elemento di un elemento</span></span>
<span id="cb375-2"><a href="datioggetti.html#cb375-2" tabindex="-1"></a><span class="co"># come lista</span></span>
<span id="cb375-3"><a href="datioggetti.html#cb375-3" tabindex="-1"></a><span class="co"># prima troviamo la lunghezza della lista</span></span>
<span id="cb375-4"><a href="datioggetti.html#cb375-4" tabindex="-1"></a><span class="fu">length</span>(la_mia_prima_lista_con_nomi)</span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb377-1"><a href="datioggetti.html#cb377-1" tabindex="-1"></a><span class="co"># il quinto elemento, oltre ad essere un bel film, è una lista, </span></span>
<span id="cb377-2"><a href="datioggetti.html#cb377-2" tabindex="-1"></a><span class="co"># il cui 4° elemento è una matrice</span></span>
<span id="cb377-3"><a href="datioggetti.html#cb377-3" tabindex="-1"></a>la_mia_prima_lista_con_nomi[[<span class="dv">5</span>]][[<span class="dv">4</span>]]</span></code></pre></div>
<pre><code>##   D E F
## A 1 4 7
## B 2 5 8
## C 3 6 9</code></pre>
<div class="sourceCode" id="cb379"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb379-1"><a href="datioggetti.html#cb379-1" tabindex="-1"></a><span class="co"># estraggo la prima colonna</span></span>
<span id="cb379-2"><a href="datioggetti.html#cb379-2" tabindex="-1"></a>la_mia_prima_lista_con_nomi[[<span class="dv">5</span>]][[<span class="dv">4</span>]][,<span class="dv">1</span>]</span></code></pre></div>
<pre><code>## A B C 
## 1 2 3</code></pre>
<div class="sourceCode" id="cb381"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb381-1"><a href="datioggetti.html#cb381-1" tabindex="-1"></a><span class="co"># questo funziona, e calcola la somma degli elementi del primo vettore</span></span>
<span id="cb381-2"><a href="datioggetti.html#cb381-2" tabindex="-1"></a><span class="fu">sum</span>(la_mia_prima_lista_con_nomi[[<span class="dv">1</span>]])</span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<p>Questo invece non funzionerebbe, prova a scrivrlo nella console:</p>
<pre><code>&gt;sum(la_mia_prima_lista_con_nomi[1])</code></pre>
</div>
<div id="usare-i-nomi." class="section level3 hasAnchor" number="4.8.2">
<h3><span class="header-section-number">4.8.2</span> Usare i nomi.<a href="datioggetti.html#usare-i-nomi." class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>I nomi<a href="#fn98" class="footnote-ref" id="fnref98"><sup>98</sup></a> sono attributi particolarmente importanti per le operazioni di indirizzamento e di filtraggio.<br />
L’operatore <code>$</code> permette di indirizzare per nome le colonne (in data frame e tibble<a href="#fn99" class="footnote-ref" id="fnref99"><sup>99</sup></a>) o gli elementi (nelle liste)<a href="#fn100" class="footnote-ref" id="fnref100"><sup>100</sup></a>. E’ importante ricordare due proprietà di questo operatore:</p>
<ul>
<li><p>se usato per le colonne di data frame o tibble <code>$</code>, se non c’è ambiguità funziona anche con corrispondenze parziali<a href="#fn101" class="footnote-ref" id="fnref101"><sup>101</sup></a></p></li>
<li><p>nelle liste estrae gli elementi con la loro classe originale</p></li>
</ul>
<p>E’ possibile combinare l’indirizzamento con <code>$</code> con quello con <code>[]</code>.</p>
<div class="sourceCode" id="cb384"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb384-1"><a href="datioggetti.html#cb384-1" tabindex="-1"></a><span class="co"># i primi 5 elementi della colonna Improved in Arthritis</span></span>
<span id="cb384-2"><a href="datioggetti.html#cb384-2" tabindex="-1"></a>Arthritis<span class="sc">$</span>Improved[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span></code></pre></div>
<pre><code>## [1] Some   None   None   Marked Marked
## Levels: None &lt; Some &lt; Marked</code></pre>
<div class="sourceCode" id="cb386"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb386-1"><a href="datioggetti.html#cb386-1" tabindex="-1"></a><span class="co"># gli stessi elementi, riordinati usando un vettore di posizioni</span></span>
<span id="cb386-2"><a href="datioggetti.html#cb386-2" tabindex="-1"></a>Arthritis<span class="sc">$</span>Improved[<span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">1</span>)]</span></code></pre></div>
<pre><code>## [1] Marked Marked None   None   Some  
## Levels: None &lt; Some &lt; Marked</code></pre>
<div class="sourceCode" id="cb388"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb388-1"><a href="datioggetti.html#cb388-1" tabindex="-1"></a><span class="co"># i nomi delle variabili in Arthritis</span></span>
<span id="cb388-2"><a href="datioggetti.html#cb388-2" tabindex="-1"></a><span class="fu">colnames</span>(Arthritis)</span></code></pre></div>
<pre><code>## [1] &quot;ID&quot;        &quot;Treatment&quot; &quot;Sex&quot;       &quot;Age&quot;       &quot;Improved&quot;</code></pre>
<p>Che succede se uso solo la A? Dal momento che viene trovata anche una corrispondenza parziale, restituirà Age (per brevità uso <code>head()</code> per ottenere solo i primi elementi):</p>
<div class="sourceCode" id="cb390"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb390-1"><a href="datioggetti.html#cb390-1" tabindex="-1"></a><span class="fu">head</span>(Arthritis<span class="sc">$</span>A)</span></code></pre></div>
<pre><code>## [1] 27 29 30 32 46 58</code></pre>
<div class="sourceCode" id="cb392"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb392-1"><a href="datioggetti.html#cb392-1" tabindex="-1"></a><span class="co"># non funziona con iris</span></span>
<span id="cb392-2"><a href="datioggetti.html#cb392-2" tabindex="-1"></a><span class="co"># questo funziona</span></span>
<span id="cb392-3"><a href="datioggetti.html#cb392-3" tabindex="-1"></a><span class="fu">head</span>(iris<span class="sc">$</span>Petal.Length,<span class="dv">10</span>)</span></code></pre></div>
<pre><code>##  [1] 1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5</code></pre>
<div class="sourceCode" id="cb394"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb394-1"><a href="datioggetti.html#cb394-1" tabindex="-1"></a><span class="co"># questo no</span></span>
<span id="cb394-2"><a href="datioggetti.html#cb394-2" tabindex="-1"></a><span class="fu">head</span>(iris<span class="sc">$</span>P,<span class="dv">10</span>)</span></code></pre></div>
<pre><code>## NULL</code></pre>
<p>Nelle liste <code>$</code> estrae l’elemento con la sua classe originale. Proviamo innanzitutto a dare nomi a elementi dell’elemento e della lista <code>la_mia_prima_lista_con_nomi</code></p>
<div class="sourceCode" id="cb396"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb396-1"><a href="datioggetti.html#cb396-1" tabindex="-1"></a><span class="fu">names</span>(la_mia_prima_lista_con_nomi<span class="sc">$</span>e) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;aa&quot;</span>, <span class="st">&quot;ab&quot;</span>, <span class="st">&quot;ac&quot;</span>, <span class="st">&quot;ad&quot;</span>)</span>
<span id="cb396-2"><a href="datioggetti.html#cb396-2" tabindex="-1"></a><span class="co"># e ora vediamo che succede</span></span>
<span id="cb396-3"><a href="datioggetti.html#cb396-3" tabindex="-1"></a>la_mia_prima_lista_con_nomi<span class="sc">$</span>a</span></code></pre></div>
<pre><code>## [1] 1 2 3</code></pre>
<div class="sourceCode" id="cb398"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb398-1"><a href="datioggetti.html#cb398-1" tabindex="-1"></a><span class="fu">class</span>(la_mia_prima_lista_con_nomi<span class="sc">$</span>a)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb400-1"><a href="datioggetti.html#cb400-1" tabindex="-1"></a>la_mia_prima_lista_con_nomi<span class="sc">$</span>e</span></code></pre></div>
<pre><code>## $aa
## [1] 1 2 3
## 
## $ab
## [1] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;d&quot; &quot;e&quot; &quot;f&quot;
## 
## $ac
##  [1] &quot;amore&quot; &quot;pace&quot;  &quot;amore&quot; &quot;pace&quot;  &quot;amore&quot; &quot;pace&quot;  &quot;amore&quot; &quot;pace&quot;  &quot;amore&quot;
## [10] &quot;pace&quot;  &quot;amore&quot; &quot;pace&quot; 
## 
## $ad
##   D E F
## A 1 4 7
## B 2 5 8
## C 3 6 9</code></pre>
<div class="sourceCode" id="cb402"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb402-1"><a href="datioggetti.html#cb402-1" tabindex="-1"></a><span class="fu">class</span>(la_mia_prima_lista_con_nomi<span class="sc">$</span>e)</span></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
<div class="sourceCode" id="cb404"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb404-1"><a href="datioggetti.html#cb404-1" tabindex="-1"></a>la_mia_prima_lista_con_nomi<span class="sc">$</span>e<span class="sc">$</span>aa</span></code></pre></div>
<pre><code>## [1] 1 2 3</code></pre>
</div>
<div id="usare-valori-logici." class="section level3 hasAnchor" number="4.8.3">
<h3><span class="header-section-number">4.8.3</span> Usare valori logici.<a href="datioggetti.html#usare-valori-logici." class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Infine, il modo forse più flessibile per indirizzare elementi è quello di usare valori logici, sia come il risultato di operazioni e confronti, che come vettori o matrici logiche.<br />
Alcuni esempi chiariranno meglio il concetto. Per queste operazioni sono molto utili:</p>
<ul>
<li><p>l’operatore <code>%in%</code> che permettono di trovare corrispondenze di un vettore in un altro, restituendo un vettore logico</p></li>
<li><p>la funzione <code>which()</code> che restituisce un vettore delle posizioni con valore <code>T</code> in un vettore logico</p></li>
<li><p>la funzione <code>subset()</code> che permette di estrarre elementi da vettori, matrici o data frame sulla base di condizioni logiche</p></li>
</ul>
<p>Per selezionare, attribuire o sostituire elementi è possibile usare vettori logici creati per l’occasione o ottenuti come risultato di altre funzioni:</p>
<div class="sourceCode" id="cb406"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb406-1"><a href="datioggetti.html#cb406-1" tabindex="-1"></a>tre_selezioni <span class="ot">&lt;-</span> <span class="fu">c</span>(T,F,T)</span>
<span id="cb406-2"><a href="datioggetti.html#cb406-2" tabindex="-1"></a><span class="co"># estrae il 1° e terzo elemento da vettore_con_nomi e li </span></span>
<span id="cb406-3"><a href="datioggetti.html#cb406-3" tabindex="-1"></a><span class="co"># attribuisce a un altro vettore</span></span>
<span id="cb406-4"><a href="datioggetti.html#cb406-4" tabindex="-1"></a>due_elementi <span class="ot">&lt;-</span> vettore_con_nomi[tre_selezioni]</span></code></pre></div>
<p>Naturalmente è possibile fare lo stesso con matrici: prova a capire cosa succede negli esempi successivi.</p>
<div class="sourceCode" id="cb407"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb407-1"><a href="datioggetti.html#cb407-1" tabindex="-1"></a>tre_per_tre_logica <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">rep</span>(<span class="fu">c</span>(T,T,F),<span class="dv">3</span>), <span class="at">nrow =</span> <span class="dv">3</span>, <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">byrow =</span> F)</span>
<span id="cb407-2"><a href="datioggetti.html#cb407-2" tabindex="-1"></a>per_colonne</span></code></pre></div>
<pre><code>##   D E F
## A 1 4 7
## B 2 5 8
## C 3 6 9</code></pre>
<div class="sourceCode" id="cb409"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb409-1"><a href="datioggetti.html#cb409-1" tabindex="-1"></a>per_colonne[tre_per_tre_logica]</span></code></pre></div>
<pre><code>## [1] 1 2 4 5 7 8</code></pre>
<div class="sourceCode" id="cb411"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb411-1"><a href="datioggetti.html#cb411-1" tabindex="-1"></a>per_colonne<span class="sc">&gt;</span><span class="dv">3</span></span></code></pre></div>
<pre><code>##       D    E    F
## A FALSE TRUE TRUE
## B FALSE TRUE TRUE
## C FALSE TRUE TRUE</code></pre>
<div class="sourceCode" id="cb413"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb413-1"><a href="datioggetti.html#cb413-1" tabindex="-1"></a>maggiore_di_tre <span class="ot">&lt;-</span> per_colonne<span class="sc">&gt;</span><span class="dv">3</span></span>
<span id="cb413-2"><a href="datioggetti.html#cb413-2" tabindex="-1"></a>per_colonne[per_colonne<span class="sc">&gt;</span><span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [1] 4 5 6 7 8 9</code></pre>
<div class="sourceCode" id="cb415"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb415-1"><a href="datioggetti.html#cb415-1" tabindex="-1"></a>per_colonne[maggiore_di_tre]</span></code></pre></div>
<pre><code>## [1] 4 5 6 7 8 9</code></pre>
<div class="sourceCode" id="cb417"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb417-1"><a href="datioggetti.html#cb417-1" tabindex="-1"></a><span class="fu">which</span>(per_colonne<span class="sc">&gt;</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] 4 5 6 7 8 9</code></pre>
<div class="sourceCode" id="cb419"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb419-1"><a href="datioggetti.html#cb419-1" tabindex="-1"></a><span class="co"># cosa restituiscono?</span></span>
<span id="cb419-2"><a href="datioggetti.html#cb419-2" tabindex="-1"></a></span>
<span id="cb419-3"><a href="datioggetti.html#cb419-3" tabindex="-1"></a><span class="co"># cosa succede qui?</span></span>
<span id="cb419-4"><a href="datioggetti.html#cb419-4" tabindex="-1"></a><span class="fu">colnames</span>(Arthritis)</span></code></pre></div>
<pre><code>## [1] &quot;ID&quot;        &quot;Treatment&quot; &quot;Sex&quot;       &quot;Age&quot;       &quot;Improved&quot;</code></pre>
<div class="sourceCode" id="cb421"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb421-1"><a href="datioggetti.html#cb421-1" tabindex="-1"></a><span class="fu">colnames</span>(Arthritis) <span class="sc">==</span> <span class="st">&quot;ID&quot;</span></span></code></pre></div>
<pre><code>## [1]  TRUE FALSE FALSE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb423"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb423-1"><a href="datioggetti.html#cb423-1" tabindex="-1"></a><span class="co"># che vettore restituisce l&#39;espressione precedente?</span></span>
<span id="cb423-2"><a href="datioggetti.html#cb423-2" tabindex="-1"></a><span class="co"># individuare le posizioni di due colonne in Arthritis sulla base dei nomi</span></span>
<span id="cb423-3"><a href="datioggetti.html#cb423-3" tabindex="-1"></a><span class="co"># nota l&#39;uso dell&#39;operatore |, che rappresenta un OR logico,</span></span>
<span id="cb423-4"><a href="datioggetti.html#cb423-4" tabindex="-1"></a><span class="co"># sono selezionate le condizioni per cui è vera l&#39;una o l&#39;altra espressione</span></span>
<span id="cb423-5"><a href="datioggetti.html#cb423-5" tabindex="-1"></a><span class="fu">colnames</span>(Arthritis) <span class="sc">==</span> <span class="st">&quot;ID&quot;</span> <span class="sc">|</span> <span class="fu">colnames</span>(Arthritis) <span class="sc">==</span> <span class="st">&quot;Age&quot;</span> </span></code></pre></div>
<pre><code>## [1]  TRUE FALSE FALSE  TRUE FALSE</code></pre>
<div class="sourceCode" id="cb425"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb425-1"><a href="datioggetti.html#cb425-1" tabindex="-1"></a><span class="co"># oppure potrei usare %in%</span></span>
<span id="cb425-2"><a href="datioggetti.html#cb425-2" tabindex="-1"></a><span class="co"># creo un vettore dei nomi che voglio cercare</span></span>
<span id="cb425-3"><a href="datioggetti.html#cb425-3" tabindex="-1"></a>i_nomi <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;ID&quot;</span>,<span class="st">&quot;Age&quot;</span>)</span>
<span id="cb425-4"><a href="datioggetti.html#cb425-4" tabindex="-1"></a><span class="fu">colnames</span>(Arthritis) <span class="sc">%in%</span> i_nomi </span></code></pre></div>
<pre><code>## [1]  TRUE FALSE FALSE  TRUE FALSE</code></pre>
<div class="sourceCode" id="cb427"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb427-1"><a href="datioggetti.html#cb427-1" tabindex="-1"></a><span class="co"># e ne estraggo le posizioni con which()</span></span>
<span id="cb427-2"><a href="datioggetti.html#cb427-2" tabindex="-1"></a><span class="fu">which</span>(<span class="fu">colnames</span>(Arthritis) <span class="sc">%in%</span> i_nomi)</span></code></pre></div>
<pre><code>## [1] 1 4</code></pre>
<div class="sourceCode" id="cb429"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb429-1"><a href="datioggetti.html#cb429-1" tabindex="-1"></a><span class="fu">head</span>(Arthritis[<span class="fu">which</span>(<span class="fu">colnames</span>(Arthritis) <span class="sc">%in%</span> i_nomi)])</span></code></pre></div>
<pre><code>##   ID Age
## 1 57  27
## 2 46  29
## 3 77  30
## 4 17  32
## 5 36  46
## 6 23  58</code></pre>
<p>La funzione <code>subset()</code> consente invece di filtrare righe sulla base di condizioni logiche e di selezionare opzionalmente solo alcune variabili</p>
<div class="sourceCode" id="cb431"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb431-1"><a href="datioggetti.html#cb431-1" tabindex="-1"></a><span class="fu">subset</span>(Arthritis, Age <span class="sc">&gt;</span> <span class="dv">67</span>, <span class="at">select =</span> Sex<span class="sc">:</span>Improved)</span></code></pre></div>
<pre><code>##       Sex Age Improved
## 13   Male  69     None
## 14   Male  70   Marked
## 37 Female  68     Some
## 38 Female  68   Marked
## 39 Female  69     None
## 40 Female  69     Some
## 41 Female  70     Some
## 83 Female  68     Some
## 84 Female  74   Marked</code></pre>
<p>Gli stessi risultati possono essere ottenuti con gli operatori e i metodi descritti prima, ma in maniera decisamente più complessa. Vuoi provarci?</p>
<p>Molte altre utili funzioni per selezionare e estrarre elementi con una sintassi molto più intuitiva sono disponibili in pacchetti del <code>tidyverse</code>, come <code>dplyr</code>, ed avremo modo di parlarne nei capitoli successivi per poi descriverle in maniera più sistematica nel capitolo <a href="wrangling.html#wrangling">9</a>.</p>
</div>
</div>
<div id="attach-with-within." class="section level2 hasAnchor" number="4.9">
<h2><span class="header-section-number">4.9</span> <code>attach()</code>, <code>with()</code>, <code>within()</code>.<a href="datioggetti.html#attach-with-within." class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>R è piuttosto pignolo come linguaggio: bisogna indicare specificamente dove cercare l’oggetto su cui eseguire una operazione. Nell’esempio seguente, la colonna <code>Age</code> compare in più di un data frame e, se vogliamo utilizzarla in una funzione, dobbiamo indicare esplicitamente dove si trova. Questo rende molto verbosi i comandi. Alcune funzioni del pacchetto base permettono di aggirare questo problema, che, a dire la verità, è gestito molto meglio nell’insieme dei pacchetti del <code>tidyverse</code> (vedi capitolo <a href="wrangling.html#wrangling">9</a>).<br />
Anche se lo abbiamo già fatto, apriamo il data set Arthritis e creiamone una copia (bisogna aver caricato il pacchetto <code>vcd</code>):</p>
<div class="sourceCode" id="cb433"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb433-1"><a href="datioggetti.html#cb433-1" tabindex="-1"></a><span class="co"># library(vcd)</span></span>
<span id="cb433-2"><a href="datioggetti.html#cb433-2" tabindex="-1"></a><span class="fu">data</span>(Arthritis)</span>
<span id="cb433-3"><a href="datioggetti.html#cb433-3" tabindex="-1"></a>Arthr1 <span class="ot">&lt;-</span> Arthritis[<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>,]</span>
<span id="cb433-4"><a href="datioggetti.html#cb433-4" tabindex="-1"></a>Arthr2 <span class="ot">&lt;-</span> Arthritis[<span class="dv">21</span><span class="sc">:</span><span class="dv">40</span>,]</span></code></pre></div>
<p>La variabile <code>Age</code> è in entrambi; usare solo il nome di colonna non funzionerebbe, prova tu a inserire nella console:</p>
<pre><code>&gt; head(Age)</code></pre>
<p>Per permettere a R di “trovare” Age dobbiamo dire dove cercare:</p>
<div class="sourceCode" id="cb435"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb435-1"><a href="datioggetti.html#cb435-1" tabindex="-1"></a><span class="fu">head</span>(Arthr1<span class="sc">$</span>Age, <span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 27 29 30 32 46</code></pre>
<div class="sourceCode" id="cb437"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb437-1"><a href="datioggetti.html#cb437-1" tabindex="-1"></a><span class="fu">head</span>(Arthr2<span class="sc">$</span>Age, <span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 48 55 55 56 57</code></pre>
<p>Questo rende i comandi “verbosi”. Qui cerco i valori di Age per Sex == “Female”</p>
<div class="sourceCode" id="cb439"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb439-1"><a href="datioggetti.html#cb439-1" tabindex="-1"></a>Arthr1<span class="sc">$</span>Age[Arthr1<span class="sc">$</span>Sex <span class="sc">==</span> <span class="st">&quot;Female&quot;</span>]</span></code></pre></div>
<pre><code>## [1] 23 32 37 41 41 48</code></pre>
<p>Naturalmente questi valori sarebbero diversi per Arthr2</p>
<div class="sourceCode" id="cb441"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb441-1"><a href="datioggetti.html#cb441-1" tabindex="-1"></a>Arthr2<span class="sc">$</span>Age[Arthr2<span class="sc">$</span>Sex <span class="sc">==</span> <span class="st">&quot;Female&quot;</span>]</span></code></pre></div>
<pre><code>##  [1] 48 55 55 56 57 57 57 58 59 59 60 61 62 62 66 67 68 68 69 69</code></pre>
<p><code>attach()</code> semplifica alcune di queste operazioni; tuttavia, per evitare ambiguità, è sempre opportuno usare <code>detach()</code> per “staccare” l’oggetto dal percorso di ricerca:</p>
<div class="sourceCode" id="cb443"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb443-1"><a href="datioggetti.html#cb443-1" tabindex="-1"></a><span class="fu">attach</span>(Arthr1)</span>
<span id="cb443-2"><a href="datioggetti.html#cb443-2" tabindex="-1"></a>  <span class="fu">head</span>(Treatment,<span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] Treated Treated Treated Treated Treated
## Levels: Placebo Treated</code></pre>
<div class="sourceCode" id="cb445"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb445-1"><a href="datioggetti.html#cb445-1" tabindex="-1"></a>  <span class="fu">summary</span>(Treatment)</span></code></pre></div>
<pre><code>## Placebo Treated 
##       0      20</code></pre>
<div class="sourceCode" id="cb447"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb447-1"><a href="datioggetti.html#cb447-1" tabindex="-1"></a><span class="fu">detach</span>(Arthr1)</span>
<span id="cb447-2"><a href="datioggetti.html#cb447-2" tabindex="-1"></a>Arthr2<span class="sc">$</span>Age[Arthr2<span class="sc">$</span>Sex <span class="sc">==</span> <span class="st">&quot;Female&quot;</span>]</span></code></pre></div>
<pre><code>##  [1] 48 55 55 56 57 57 57 58 59 59 60 61 62 62 66 67 68 68 69 69</code></pre>
<p>La funzione summary() fornisce alcune statistiche riassuntive per un oggetto; le statistiche variano con il tipo di variabile.
In alternativa è possibile usare <code>with()</code></p>
<div class="sourceCode" id="cb449"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb449-1"><a href="datioggetti.html#cb449-1" tabindex="-1"></a><span class="fu">with</span>(Arthr1, <span class="fu">sum</span>(Age))</span></code></pre></div>
<pre><code>## [1] 955</code></pre>
<p>Gli oggetti creati all’interno di with() non sono disponibili nel global environment; per questo bisogna usare il comando <code>&lt;&lt;-</code> per l’assegnazione</p>
<div class="sourceCode" id="cb451"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb451-1"><a href="datioggetti.html#cb451-1" tabindex="-1"></a><span class="fu">with</span>(Arthr1, somma_età <span class="ot">&lt;-</span> <span class="fu">sum</span>(Age))</span></code></pre></div>
<p><code>print(somma_età)</code> restituirebbe un errore mentre questi due comandi funzionano:</p>
<div class="sourceCode" id="cb452"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb452-1"><a href="datioggetti.html#cb452-1" tabindex="-1"></a><span class="fu">with</span>(Arthr1, somma_età_2 <span class="ot">&lt;&lt;-</span> <span class="fu">sum</span>(Age))</span>
<span id="cb452-2"><a href="datioggetti.html#cb452-2" tabindex="-1"></a>somma_età_2</span></code></pre></div>
<pre><code>## [1] 955</code></pre>
</div>
<div id="funzioni-built-in-e-funzioni-definite-dallutente." class="section level2 hasAnchor" number="4.10">
<h2><span class="header-section-number">4.10</span> <em>Funzioni “built-in” e funzioni definite dall’utente.</em><a href="datioggetti.html#funzioni-built-in-e-funzioni-definite-dallutente." class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In R tutto quello che accade, accade perché hai invocato una funzione: lo ho già detto, no? Abbiamo già visto moltissime funzioni e moltissime altre ne incontrerai nella tua carriera di programmatore.<br />
<strong>Se vuoi puoi saltare questo paragrafo</strong>: in fondo, puoi imparare le funzioni “sul campo”, usandole man mano che ti servono. Tuttavia, è bene mettere alcuni punti fermi.</p>
<div id="operatorisemplici" class="section level3 hasAnchor" number="4.10.1">
<h3><span class="header-section-number">4.10.1</span> Semplici funzioni matematiche, trigonometriche, statistiche, logiche, etc.<a href="datioggetti.html#operatorisemplici" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>R base ha moltissime funzioni matematiche, statistiche, logiche e molte altre sono aggiunte dai pacchetti contribuiti da utenti. Qui ne richiamerò solo alcune, aggiungendo qualche altro piccolo elemento sulla priorità delle operazioni, etc., giusto nel caso tu non abbia mai avuto nessuna esperienza di programmazione. Per maggiori informazioni sugli operatori puoi visitare <a href="https://www.statmethods.net/management/operators.html">questa pagina</a>, mentre per le funzioni più comuni puoi visitare <a href="https://www.statmethods.net/management/functions.html">questa</a>.</p>
</div>
<div id="operatori." class="section level3 hasAnchor" number="4.10.2">
<h3><span class="header-section-number">4.10.2</span> Operatori.<a href="datioggetti.html#operatori." class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Gli operatori matematici e logici in R non sono molto diversi da quelli che si usano in altri linguaggi, o, se per questo, nelle formule dei più comuni fogli di calcolo.</p>
<p><strong>Operatori matematici</strong></p>
<table>
<thead>
<tr class="header">
<th>Operatore</th>
<th>Cosa fa?</th>
<th>Uso</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>+</td>
<td>addizione</td>
<td>1 + 2</td>
</tr>
<tr class="even">
<td>-</td>
<td>sottrazione</td>
<td>2 - 1</td>
</tr>
<tr class="odd">
<td>*</td>
<td>moltiplicazione</td>
<td>3 * 1</td>
</tr>
<tr class="even">
<td>/</td>
<td>divisione</td>
<td>4 / 2</td>
</tr>
<tr class="odd">
<td>^ o **</td>
<td>elevazione a potenza</td>
<td>2^2</td>
</tr>
<tr class="even">
<td>x%%y</td>
<td>modulo</td>
<td>7%%3 (=1)</td>
</tr>
<tr class="odd">
<td>x%/%y</td>
<td>divisione intera</td>
<td>7%/%3 (=2)</td>
</tr>
</tbody>
</table>
<p>Gli operatori matematici sono, a tutti gli effetti, delle funzioni<a href="#fn102" class="footnote-ref" id="fnref102"><sup>102</sup></a>.
Ricorda che puoi usare la console come se fosse una calcolatrice: prova a scrivere nella console il seguente codice (ricorda di rimuovere il prompt e premere invio alla fine di ogni riga):</p>
<pre><code>&gt;1+2
&gt;2^5
&gt;7%%2
&gt;5/0
&gt;0/0</code></pre>
<p>La priorità delle operazioni è quella solita (^,/ e *, + e -) e, per modificarla, occorre usare le parentesi tonde. Inoltre in R le operazioni sono vettorializzate. Guarda questi semplici esempi per capire meglio il funzionamento degli operatori matematici.</p>
<div class="sourceCode" id="cb455"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb455-1"><a href="datioggetti.html#cb455-1" tabindex="-1"></a><span class="co"># attenzione alla priorità nelle operazioni</span></span>
<span id="cb455-2"><a href="datioggetti.html#cb455-2" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">+</span><span class="dv">4</span><span class="sc">/</span><span class="dv">2</span></span>
<span id="cb455-3"><a href="datioggetti.html#cb455-3" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb457"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb457-1"><a href="datioggetti.html#cb457-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> (<span class="dv">1</span><span class="sc">+</span><span class="dv">4</span>)<span class="sc">/</span><span class="dv">2</span></span>
<span id="cb457-2"><a href="datioggetti.html#cb457-2" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1] 2.5</code></pre>
<div class="sourceCode" id="cb459"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb459-1"><a href="datioggetti.html#cb459-1" tabindex="-1"></a><span class="co"># le operazioni sono vettorializzate; guarda che succede se aggiungo </span></span>
<span id="cb459-2"><a href="datioggetti.html#cb459-2" tabindex="-1"></a><span class="co"># uno scalare a un vettore o se moltiplico uno scalare per un vettore</span></span>
<span id="cb459-3"><a href="datioggetti.html#cb459-3" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)</span>
<span id="cb459-4"><a href="datioggetti.html#cb459-4" tabindex="-1"></a>(y<span class="sc">+</span><span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] 2 3 4 5</code></pre>
<div class="sourceCode" id="cb461"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb461-1"><a href="datioggetti.html#cb461-1" tabindex="-1"></a>(y<span class="sc">*</span><span class="fl">1.1</span>)</span></code></pre></div>
<pre><code>## [1] 1.1 2.2 3.3 4.4</code></pre>
<div class="sourceCode" id="cb463"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb463-1"><a href="datioggetti.html#cb463-1" tabindex="-1"></a><span class="co"># attenzione all&#39;effetto degli NA</span></span>
<span id="cb463-2"><a href="datioggetti.html#cb463-2" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="cn">NA</span>)</span>
<span id="cb463-3"><a href="datioggetti.html#cb463-3" tabindex="-1"></a>(z<span class="sc">/</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 0.5 1.0 1.5 2.0  NA</code></pre>
<div class="sourceCode" id="cb465"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb465-1"><a href="datioggetti.html#cb465-1" tabindex="-1"></a><span class="co"># nelle operazioni fra vettori, il vettore più corto viene riciclato,</span></span>
<span id="cb465-2"><a href="datioggetti.html#cb465-2" tabindex="-1"></a><span class="co"># se necessario con un warning</span></span>
<span id="cb465-3"><a href="datioggetti.html#cb465-3" tabindex="-1"></a></span>
<span id="cb465-4"><a href="datioggetti.html#cb465-4" tabindex="-1"></a>w <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>) <span class="co"># è un vettore di lunghezza inferiore a y</span></span>
<span id="cb465-5"><a href="datioggetti.html#cb465-5" tabindex="-1"></a></span>
<span id="cb465-6"><a href="datioggetti.html#cb465-6" tabindex="-1"></a><span class="fu">length</span>(w) <span class="sc">&lt;</span> <span class="fu">length</span>(y)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb467"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb467-1"><a href="datioggetti.html#cb467-1" tabindex="-1"></a>w</span></code></pre></div>
<pre><code>## [1] 1 2</code></pre>
<div class="sourceCode" id="cb469"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb469-1"><a href="datioggetti.html#cb469-1" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>## [1] 1 2 3 4</code></pre>
<div class="sourceCode" id="cb471"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb471-1"><a href="datioggetti.html#cb471-1" tabindex="-1"></a>(w<span class="sc">+</span>y)</span></code></pre></div>
<pre><code>## [1] 2 4 4 6</code></pre>
<div class="sourceCode" id="cb473"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb473-1"><a href="datioggetti.html#cb473-1" tabindex="-1"></a>k<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb473-2"><a href="datioggetti.html#cb473-2" tabindex="-1"></a>(y<span class="sc">+</span>k)</span></code></pre></div>
<pre><code>## Warning in y + k: longer object length is not a multiple of shorter object
## length</code></pre>
<pre><code>## [1] 2 4 6 5</code></pre>
<div class="sourceCode" id="cb476"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb476-1"><a href="datioggetti.html#cb476-1" tabindex="-1"></a><span class="co"># qui solo i primo elemento viene riciclato</span></span></code></pre></div>
<p><strong>Nota</strong> che le operazioni a virgola mobile potrebbero dare risultati sorprendenti: quindi <code>(sqrt(2))^2==2</code> è falso; la funzione <code>near()</code>di <code>dplyr</code>serve proprio per affrontare questo problema: <code>dplyr::near((sqrt(2)^2),2)</code>.<br />
<strong>Nota</strong> inoltre che la moltiplicazione fra matrici è un’operazione diversa da quella condotta con l’operatore <code>*</code>: <code>x %*% y</code>. Come probabilmente ricorderai dai corsi di matematica e algebra lineare che hai frequentato perché l’operazione sia possibile il numero di colonne di x deve essere uguale al numero di righe di y; se x è una matrice <em>nxm</em> e y è <em>mxp</em> il risultato è una matrice <em>nxp</em>.</p>
<div class="sourceCode" id="cb477"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb477-1"><a href="datioggetti.html#cb477-1" tabindex="-1"></a>una_matrice <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="fl">1.1</span>,<span class="fl">1.2</span>,<span class="fl">1.3</span>,<span class="fl">2.1</span>,<span class="fl">2.2</span>,<span class="fl">2.3</span>), <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">ncol=</span><span class="dv">3</span>, <span class="at">byrow =</span> T)</span>
<span id="cb477-2"><a href="datioggetti.html#cb477-2" tabindex="-1"></a>una_matrice</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]  1.1  1.2  1.3
## [2,]  2.1  2.2  2.3</code></pre>
<div class="sourceCode" id="cb479"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb479-1"><a href="datioggetti.html#cb479-1" tabindex="-1"></a><span class="co"># guarda quello che succede con operazioni con vettori di diversa</span></span>
<span id="cb479-2"><a href="datioggetti.html#cb479-2" tabindex="-1"></a><span class="co"># lunghezza</span></span>
<span id="cb479-3"><a href="datioggetti.html#cb479-3" tabindex="-1"></a>una_matrice<span class="fl">+0.05</span></span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,] 1.15 1.25 1.35
## [2,] 2.15 2.25 2.35</code></pre>
<div class="sourceCode" id="cb481"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb481-1"><a href="datioggetti.html#cb481-1" tabindex="-1"></a>una_matrice<span class="sc">*</span><span class="fl">0.5</span></span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,] 0.55  0.6 0.65
## [2,] 1.05  1.1 1.15</code></pre>
<div class="sourceCode" id="cb483"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb483-1"><a href="datioggetti.html#cb483-1" tabindex="-1"></a>(una_nuova_matrice <span class="ot">&lt;-</span> una_matrice<span class="sc">+</span><span class="fu">c</span>(<span class="fl">0.01</span>,<span class="fl">0.02</span>,<span class="fl">0.03</span>))</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,] 1.11 1.23 1.32
## [2,] 2.12 2.21 2.33</code></pre>
<div class="sourceCode" id="cb485"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb485-1"><a href="datioggetti.html#cb485-1" tabindex="-1"></a>(una_matrice <span class="sc">+</span> <span class="fu">c</span>(<span class="fl">0.1</span>,<span class="fl">0.05</span>))</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,] 1.20 1.30 1.40
## [2,] 2.15 2.25 2.35</code></pre>
<div class="sourceCode" id="cb487"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb487-1"><a href="datioggetti.html#cb487-1" tabindex="-1"></a><span class="co"># le operazioni avvengono per colonna e i vettori più corti vengono</span></span>
<span id="cb487-2"><a href="datioggetti.html#cb487-2" tabindex="-1"></a><span class="co"># riciclati</span></span></code></pre></div>
<p>La coercizione può dare risultati interessanti. Prova ad eseguire le seguenti operazioni nella console:</p>
<pre><code>&gt;un_logico &lt;- c(T,T,F)
&gt;3*un_logico
&gt;un_fattore &lt;- factor(c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;b&quot;))
&gt;3*un_fattore
&gt;3*as.numeric(un_fattore)</code></pre>
<p>Come ti spieghi i risultati?</p>
<p><strong>Operatori logici.</strong></p>
<p>L’uso di operatori logici è molto frequente in R. Gli operatori logici, prevedibilmente, restituiscono vettori di valori logici (che sono equivalenti agli interi 1 per TRUE e 0 per FALSE).</p>
<table>
<thead>
<tr class="header">
<th>Operatore</th>
<th>Description</th>
<th>Esempio</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>&lt;</td>
<td>minore di</td>
<td>5 &lt; 4 è FALSE</td>
</tr>
<tr class="even">
<td>&gt;</td>
<td>maggiore di</td>
<td>5 &gt; 4 è TRUE</td>
</tr>
<tr class="odd">
<td>&lt;=</td>
<td>minore o uguale a</td>
<td>5 &lt;= 5 è TRUE</td>
</tr>
<tr class="even">
<td>&gt;=</td>
<td>maggiore o uguale a</td>
<td>5 &gt;= 4 è TRUE</td>
</tr>
<tr class="odd">
<td>==</td>
<td>esattamente uguale a</td>
<td>2 == 2 è TRUE</td>
</tr>
<tr class="even">
<td>!=</td>
<td>diverso da</td>
<td>2 != 2 è FALSE</td>
</tr>
<tr class="odd">
<td>!x</td>
<td>non x</td>
<td>!(2 != 2) è TRUE</td>
</tr>
<tr class="even">
<td>x</td>
<td>y</td>
<td>x OR y</td>
</tr>
<tr class="odd">
<td>x &amp; y</td>
<td>x AND y</td>
<td>(5&lt;4)</td>
</tr>
<tr class="even">
<td>isTRUE(x)</td>
<td>verifica se X è TRUE</td>
<td>isTRUE(5&lt;=5) è TRUE</td>
</tr>
</tbody>
</table>
<p>Gli operatori logici sono abbastanza semplici da usare e da comprendere e possono essere combinati in vari modi soprattutto per filtrare i dati (vedi capitolo <a href="wrangling.html#wrangling">9</a>). Se vuoi vedere una rappresentazione grafica del loro funzionamento guarda <a href="https://it.r4ds.hadley.nz/transform.html#operatori-logici">qui</a>.</p>
</div>
<div id="funzioni-built-in." class="section level3 hasAnchor" number="4.10.3">
<h3><span class="header-section-number">4.10.3</span> Funzioni built-in.<a href="datioggetti.html#funzioni-built-in." class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>R base fornisce numerosissime funzioni matematiche, trigonometriche e statistiche, oltre a funzioni che operano su caratteri. La lista è decisamente troppo lunga per citarla qui. Mi limiterò a presentare alcuni semplici esempi.<br />
Per una lista (più o meno) completa guarda <a href="http://www.statmethods.net/management/functions.html">qui</a>.<br />
Ricorda che ogni funzione è caratterizzata da un nome e da una serie di argomenti, e può restituire un valore o avere un effetto collaterale (la stampa di qualcosa nella console, il salvataggio di un file).<br />
Molte funzioni prendono vettori o scalari come input; ecco come si calcola la radice quadrata</p>
<div class="sourceCode" id="cb489"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb489-1"><a href="datioggetti.html#cb489-1" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">9</span>))</span></code></pre></div>
<pre><code>## [1] 1 2 3</code></pre>
<p>Nota che l’argomento di una funzione può essere un’altra funzione, come in effetti accade nella riga precedente: <code>c()</code> è essa stessa una funzione.</p>
<p>Il calcolo del logaritmo neperiano (attent* agli errori!, possono bloccare il flusso di uno script):</p>
<div class="sourceCode" id="cb491"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb491-1"><a href="datioggetti.html#cb491-1" tabindex="-1"></a><span class="fu">log</span>(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] 2.302585</code></pre>
<p>Logaritmo in base 10 di e</p>
<div class="sourceCode" id="cb493"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb493-1"><a href="datioggetti.html#cb493-1" tabindex="-1"></a><span class="fu">log10</span>(<span class="fu">exp</span>(<span class="dv">1</span>))</span></code></pre></div>
<pre><code>## [1] 0.4342945</code></pre>
<p>Un modo per “intrappolare” un errore:</p>
<div class="sourceCode" id="cb495"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb495-1"><a href="datioggetti.html#cb495-1" tabindex="-1"></a><span class="fu">try</span>(<span class="fu">log</span>(<span class="sc">-</span><span class="dv">1</span>))</span></code></pre></div>
<pre><code>## Warning in log(-1): NaNs produced</code></pre>
<pre><code>## [1] NaN</code></pre>
<p>Cerca try() e tryCatch() nell’aiuto.<br />
Alcune funzioni che prendono vettori come input</p>
<div class="sourceCode" id="cb498"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb498-1"><a href="datioggetti.html#cb498-1" tabindex="-1"></a><span class="co"># calcola la somma della colonna Age in Arthritis</span></span>
<span id="cb498-2"><a href="datioggetti.html#cb498-2" tabindex="-1"></a><span class="fu">sum</span>(Arthritis<span class="sc">$</span>Age)</span></code></pre></div>
<pre><code>## [1] 4482</code></pre>
<div class="sourceCode" id="cb500"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb500-1"><a href="datioggetti.html#cb500-1" tabindex="-1"></a><span class="co"># calcola la media</span></span>
<span id="cb500-2"><a href="datioggetti.html#cb500-2" tabindex="-1"></a><span class="fu">mean</span>(Arthritis<span class="sc">$</span>Age)</span></code></pre></div>
<pre><code>## [1] 53.35714</code></pre>
<p>Alcune funzioni restituiscono un vettore di valori, come il calcolo del range, o la statistica a 5 numeri di Tukey (minimum, lower-hinge, median, upper-hinge, maximum: lower hing e upper hinge corrispondono al primo e terzo quartile)</p>
<div class="sourceCode" id="cb502"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb502-1"><a href="datioggetti.html#cb502-1" tabindex="-1"></a><span class="fu">range</span>(Arthritis<span class="sc">$</span>Age)</span></code></pre></div>
<pre><code>## [1] 23 74</code></pre>
<div class="sourceCode" id="cb504"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb504-1"><a href="datioggetti.html#cb504-1" tabindex="-1"></a><span class="fu">with</span>(Arthritis, <span class="fu">fivenum</span>(Age))</span></code></pre></div>
<pre><code>## [1] 23 46 57 63 74</code></pre>
<p>Ecco un po’ di esempi di funzioni che operano su caratteri:</p>
<div class="sourceCode" id="cb506"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb506-1"><a href="datioggetti.html#cb506-1" tabindex="-1"></a><span class="co"># incollare più valori di testo, con uno spaziatore</span></span>
<span id="cb506-2"><a href="datioggetti.html#cb506-2" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;questo&quot;</span>, <span class="st">&quot;capitolo&quot;</span>, <span class="st">&quot;è un po&#39; lungo&quot;</span>, <span class="at">sep =</span><span class="st">&quot; &quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;questo capitolo è un po&#39; lungo&quot;</code></pre>
<div class="sourceCode" id="cb508"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb508-1"><a href="datioggetti.html#cb508-1" tabindex="-1"></a><span class="co"># trovare gli elementi di un vettore che contengono una lettera</span></span>
<span id="cb508-2"><a href="datioggetti.html#cb508-2" tabindex="-1"></a><span class="co"># o un pattern di caratteri</span></span>
<span id="cb508-3"><a href="datioggetti.html#cb508-3" tabindex="-1"></a><span class="co"># la lettera e in qualsiasi posizione</span></span>
<span id="cb508-4"><a href="datioggetti.html#cb508-4" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;e&quot;</span>, <span class="fu">c</span>(<span class="st">&quot;Teresa&quot;</span>,<span class="st">&quot;Mario&quot;</span>,<span class="st">&quot;Adele&quot;</span>))</span></code></pre></div>
<pre><code>## [1] 1 3</code></pre>
<div class="sourceCode" id="cb510"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb510-1"><a href="datioggetti.html#cb510-1" tabindex="-1"></a><span class="co"># la lettera e alla fine</span></span>
<span id="cb510-2"><a href="datioggetti.html#cb510-2" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;e$&quot;</span>, <span class="fu">c</span>(<span class="st">&quot;Teresa&quot;</span>,<span class="st">&quot;Mario&quot;</span>,<span class="st">&quot;Adele&quot;</span>))</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb512"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb512-1"><a href="datioggetti.html#cb512-1" tabindex="-1"></a><span class="co"># restituire un valore logico che indica se un pattern è presente in</span></span>
<span id="cb512-2"><a href="datioggetti.html#cb512-2" tabindex="-1"></a><span class="co"># un vettore</span></span>
<span id="cb512-3"><a href="datioggetti.html#cb512-3" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">&quot;e&quot;</span>, <span class="fu">c</span>(<span class="st">&quot;Teresa&quot;</span>,<span class="st">&quot;Mario&quot;</span>,<span class="st">&quot;Adele&quot;</span>))</span></code></pre></div>
<pre><code>## [1]  TRUE FALSE  TRUE</code></pre>
<p>Le funzioni base di R che si applicano a vettori di caratteri sono decisamente scomode da ricordare e da usare. Il pacchetto <code>stringr</code> del <code>tidyverse</code> è decisamente migliore (vedi capitolo <a href="wrangling.html#wrangling">9</a>).<br />
Per lavorare bene con le stringhe è opportuno imparare almeno qualcosa delle “espressioni regolari” (regex, regular expression): sono un modo conciso e flessibile per individuare insiemi di caratteri in una stringa. Potete trovare delle buone introduzioni in <a href="http://it.r4ds.hadley.nz/stringhe.html#corrispondenza-di-schemi-con-le-espressioni-regolari">“R for data science”</a> e in <a href="https://cran.r-project.org/web/packages/stringr/vignettes/regular-expressions.html">questa vignetta</a>.<br />
Infine attent* a come scrivi il codice: R in effetti si legge dall’interno verso l’esterno e da destra a sinistra e questo può creare confusione. Guarda che succede in questo chunk di codice, che attribuisce ad un oggetto la media del logaritmo dei valori della variabile <code>Arthritis$Age</code>:</p>
<div class="sourceCode" id="cb514"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb514-1"><a href="datioggetti.html#cb514-1" tabindex="-1"></a><span class="co"># più sintetico, ma difficile da leggere</span></span>
<span id="cb514-2"><a href="datioggetti.html#cb514-2" tabindex="-1"></a>(media_log_age <span class="ot">&lt;-</span> <span class="fu">mean</span>(<span class="fu">log10</span>(Arthritis<span class="sc">$</span>Age)))</span></code></pre></div>
<pre><code>## [1] 1.712026</code></pre>
<div class="sourceCode" id="cb516"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb516-1"><a href="datioggetti.html#cb516-1" tabindex="-1"></a><span class="co"># meno sintetico ma più facile da leggere</span></span>
<span id="cb516-2"><a href="datioggetti.html#cb516-2" tabindex="-1"></a>logAge <span class="ot">&lt;-</span> <span class="fu">log10</span>(Arthritis<span class="sc">$</span>Age)</span>
<span id="cb516-3"><a href="datioggetti.html#cb516-3" tabindex="-1"></a>media_log_age <span class="ot">&lt;-</span> <span class="fu">mean</span>(logAge)</span>
<span id="cb516-4"><a href="datioggetti.html#cb516-4" tabindex="-1"></a>media_log_age</span></code></pre></div>
<pre><code>## [1] 1.712026</code></pre>
</div>
<div id="userdeffunc" class="section level3 hasAnchor" number="4.10.4">
<h3><span class="header-section-number">4.10.4</span> Funzioni definite dall’utente.<a href="datioggetti.html#userdeffunc" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Le funzioni definite dall’utente sono molto importanti nella scrittura di codice in R: permettono di semplificare operazioni, renderle più efficienti e flessibili e meno soggette ad errore.
Le funzioni vengono create con il comando <code>function()</code> ed è possibile assegnare (o meno) un nome ad una funzione. Come le funzioni di R e le funzioni disponibili nei pacchetti, le funzioni possono avere un certo numero di parametri opzionali, con dei valori di default.
Quello che segue è un semplice esempio di funzione che restituisce media (eventualmente una media sfrondata o trimmed mean) e deviazione standard o, in alternativa, mediana e deviazione assoluta mediana. Le prime due misure sono più adatte a variabili quantitative continue con una distribuzione che si approssima a quella normale, le altre due a distribuzioni che si discostano significativamente da quella normale e che presentano valori estremi. Se non ricordi cosa sono queste statistiche guarda l’aiuto delle funzioni e consulta un libro di statistica.</p>
<div class="sourceCode" id="cb518"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb518-1"><a href="datioggetti.html#cb518-1" tabindex="-1"></a>stat_descrittive <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">parametriche=</span><span class="cn">TRUE</span>, <span class="at">stampa=</span><span class="cn">FALSE</span>, <span class="at">trm =</span> <span class="fl">0.05</span>, <span class="at">narm =</span> T) {</span>
<span id="cb518-2"><a href="datioggetti.html#cb518-2" tabindex="-1"></a>  <span class="cf">if</span> (parametriche) {</span>
<span id="cb518-3"><a href="datioggetti.html#cb518-3" tabindex="-1"></a>    valore_centrale <span class="ot">&lt;-</span> <span class="fu">mean</span>(x, <span class="at">trim =</span> trm, <span class="at">na.rm =</span> narm)</span>
<span id="cb518-4"><a href="datioggetti.html#cb518-4" tabindex="-1"></a>    dispersione <span class="ot">&lt;-</span> <span class="fu">sd</span>(x, <span class="at">na.rm =</span> narm)</span>
<span id="cb518-5"><a href="datioggetti.html#cb518-5" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb518-6"><a href="datioggetti.html#cb518-6" tabindex="-1"></a>    valore_centrale <span class="ot">&lt;-</span> <span class="fu">median</span>(x, <span class="at">na.rm =</span> narm)</span>
<span id="cb518-7"><a href="datioggetti.html#cb518-7" tabindex="-1"></a>    dispersione <span class="ot">&lt;-</span> <span class="fu">mad</span>(x, <span class="at">na.rm =</span> narm)</span>
<span id="cb518-8"><a href="datioggetti.html#cb518-8" tabindex="-1"></a>  }</span>
<span id="cb518-9"><a href="datioggetti.html#cb518-9" tabindex="-1"></a>  <span class="cf">if</span> (stampa <span class="sc">&amp;</span> parametriche) {</span>
<span id="cb518-10"><a href="datioggetti.html#cb518-10" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">&quot;Media=&quot;</span>, valore_centrale, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>, <span class="st">&quot;SD=&quot;</span>, dispersione, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb518-11"><a href="datioggetti.html#cb518-11" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (stampa <span class="sc">&amp;</span> <span class="sc">!</span>parametriche) {</span>
<span id="cb518-12"><a href="datioggetti.html#cb518-12" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">&quot;Median=&quot;</span>, valore_centrale, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>, <span class="st">&quot;MAD=&quot;</span>, dispersione, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb518-13"><a href="datioggetti.html#cb518-13" tabindex="-1"></a>  }</span>
<span id="cb518-14"><a href="datioggetti.html#cb518-14" tabindex="-1"></a>  risultato <span class="ot">&lt;-</span> <span class="fu">c</span>(valore_centrale, dispersione)</span>
<span id="cb518-15"><a href="datioggetti.html#cb518-15" tabindex="-1"></a>  <span class="cf">if</span> (parametriche){</span>
<span id="cb518-16"><a href="datioggetti.html#cb518-16" tabindex="-1"></a>    <span class="fu">names</span>(risultato) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;media&quot;</span>,<span class="st">&quot;SD&quot;</span>)</span>
<span id="cb518-17"><a href="datioggetti.html#cb518-17" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb518-18"><a href="datioggetti.html#cb518-18" tabindex="-1"></a>    <span class="fu">names</span>(risultato) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;mediana&quot;</span>,<span class="st">&quot;MAD&quot;</span>)</span>
<span id="cb518-19"><a href="datioggetti.html#cb518-19" tabindex="-1"></a>  }</span>
<span id="cb518-20"><a href="datioggetti.html#cb518-20" tabindex="-1"></a>  <span class="fu">return</span>(risultato)</span>
<span id="cb518-21"><a href="datioggetti.html#cb518-21" tabindex="-1"></a>}</span>
<span id="cb518-22"><a href="datioggetti.html#cb518-22" tabindex="-1"></a></span>
<span id="cb518-23"><a href="datioggetti.html#cb518-23" tabindex="-1"></a>stat_età <span class="ot">&lt;-</span> <span class="fu">stat_descrittive</span>(Arthritis<span class="sc">$</span>Age)</span>
<span id="cb518-24"><a href="datioggetti.html#cb518-24" tabindex="-1"></a><span class="fu">print</span>(stat_età, <span class="at">digits =</span> <span class="dv">4</span>)</span></code></pre></div>
<pre><code>## media    SD 
## 53.91 12.77</code></pre>
<div class="sourceCode" id="cb520"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb520-1"><a href="datioggetti.html#cb520-1" tabindex="-1"></a><span class="co"># non parametriche, con stampa</span></span>
<span id="cb520-2"><a href="datioggetti.html#cb520-2" tabindex="-1"></a>stat_età <span class="ot">&lt;-</span> <span class="fu">stat_descrittive</span>(Arthritis<span class="sc">$</span>Age, <span class="at">parametriche =</span> F, <span class="at">stampa =</span> T)</span></code></pre></div>
<pre><code>## Median= 57 
##  MAD= 10.3782</code></pre>
<div class="sourceCode" id="cb522"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb522-1"><a href="datioggetti.html#cb522-1" tabindex="-1"></a><span class="co"># parametriche, media sfrondata (o trimmed mean, vengono eliminati il 10% dei valori estremi,</span></span>
<span id="cb522-2"><a href="datioggetti.html#cb522-2" tabindex="-1"></a><span class="co"># niente stampa)</span></span>
<span id="cb522-3"><a href="datioggetti.html#cb522-3" tabindex="-1"></a>stat_età <span class="ot">&lt;-</span> <span class="fu">stat_descrittive</span>(Arthritis<span class="sc">$</span>Age, <span class="at">parametriche =</span> T, <span class="at">trm =</span> <span class="fl">0.1</span>)</span>
<span id="cb522-4"><a href="datioggetti.html#cb522-4" tabindex="-1"></a><span class="fu">print</span>(stat_età, <span class="at">digits =</span> <span class="dv">4</span>)</span></code></pre></div>
<pre><code>## media    SD 
## 54.44 12.77</code></pre>
<p>Prenditi qualche minuto per capire come funziona la funzione prima di leggere il testo che segue il prossimo esempio, che mostra come il codice che sarebbe necessario scrivere senza la funzione sarebbe più verboso.</p>
<div class="sourceCode" id="cb524"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb524-1"><a href="datioggetti.html#cb524-1" tabindex="-1"></a><span class="co"># voglio calcolare media e deviazione standard su la stessa</span></span>
<span id="cb524-2"><a href="datioggetti.html#cb524-2" tabindex="-1"></a><span class="co"># variabile in tre data frame e creare un vettore con nomi con i risultati</span></span>
<span id="cb524-3"><a href="datioggetti.html#cb524-3" tabindex="-1"></a>stat_età_1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">media =</span> <span class="fu">mean</span>(Arthritis<span class="sc">$</span>Age, <span class="at">trm =</span> <span class="fl">0.1</span>), </span>
<span id="cb524-4"><a href="datioggetti.html#cb524-4" tabindex="-1"></a>                <span class="at">SD =</span> <span class="fu">sd</span>(Arthritis<span class="sc">$</span>Age))</span>
<span id="cb524-5"><a href="datioggetti.html#cb524-5" tabindex="-1"></a>stat_età_1</span></code></pre></div>
<pre><code>##    media       SD 
## 53.35714 12.76917</code></pre>
<div class="sourceCode" id="cb526"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb526-1"><a href="datioggetti.html#cb526-1" tabindex="-1"></a>stat_età_2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">media =</span> <span class="fu">mean</span>(Arthr1<span class="sc">$</span>Age, <span class="at">trm =</span> <span class="fl">0.1</span>), </span>
<span id="cb526-2"><a href="datioggetti.html#cb526-2" tabindex="-1"></a>                <span class="at">SD =</span> <span class="fu">sd</span>(Arthritis<span class="sc">$</span>Age))</span>
<span id="cb526-3"><a href="datioggetti.html#cb526-3" tabindex="-1"></a>stat_età_2</span></code></pre></div>
<pre><code>##    media       SD 
## 47.75000 12.76917</code></pre>
<div class="sourceCode" id="cb528"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb528-1"><a href="datioggetti.html#cb528-1" tabindex="-1"></a>stat_età_3 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">media =</span> <span class="fu">mean</span>(Arthr2<span class="sc">$</span>Age, <span class="at">trm =</span> <span class="fl">0.1</span>), </span>
<span id="cb528-2"><a href="datioggetti.html#cb528-2" tabindex="-1"></a>                <span class="at">SD =</span> <span class="fu">sd</span>(Arthritis<span class="sc">$</span>Age))</span>
<span id="cb528-3"><a href="datioggetti.html#cb528-3" tabindex="-1"></a>stat_età_3</span></code></pre></div>
<pre><code>##    media       SD 
## 60.65000 12.76917</code></pre>
<div class="sourceCode" id="cb530"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb530-1"><a href="datioggetti.html#cb530-1" tabindex="-1"></a><span class="co"># lo stesso con la funzione</span></span>
<span id="cb530-2"><a href="datioggetti.html#cb530-2" tabindex="-1"></a><span class="fu">stat_descrittive</span>(Arthritis<span class="sc">$</span>Age, <span class="at">trm =</span> <span class="fl">0.1</span>)</span></code></pre></div>
<pre><code>##    media       SD 
## 54.44118 12.76917</code></pre>
<div class="sourceCode" id="cb532"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb532-1"><a href="datioggetti.html#cb532-1" tabindex="-1"></a><span class="fu">stat_descrittive</span>(Arthr1<span class="sc">$</span>Age, <span class="at">trm =</span> <span class="fl">0.1</span>)</span></code></pre></div>
<pre><code>##    media       SD 
## 47.87500 15.75094</code></pre>
<div class="sourceCode" id="cb534"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb534-1"><a href="datioggetti.html#cb534-1" tabindex="-1"></a><span class="fu">stat_descrittive</span>(Arthr2<span class="sc">$</span>Age, <span class="at">trm =</span> <span class="fl">0.1</span>)</span></code></pre></div>
<pre><code>##     media        SD 
## 60.750000  5.705722</code></pre>
<p>Bene, la funzione, di default (<code>parametriche = TRUE</code> fra le opzioni), calcola media e deviazione standard per un vettore (che si spera sia numerico, altrimenti la funzione restituirebbe un errore), con una media sfrondata con una soglia di 0.05. Se cambiassimo <code>parametriche = FALSE</code> otterremmo invece mediana e MAD e se indicassimo <code>stampa = TRUE</code> il risultato verrebbe anche mandato in console come testo. La funzione restituisce come risultato un vettore con nomi (anche questi cambiano in funzione dell’opzione parametriche) che può essere assegnato ad un nome. Nota come la funzione faccia uso di strutture di controllo (if … else) che valutano una condizione per scegliere fra uno o più gruppi di comandi alternativi.<br />
E’ chiaramente possibile copiare e incollare il codice</p>
<pre><code>stat_età_1 &lt;- c(media = mean(Arthritis$Age, trm = 0.1), 
                SD = sd(Arthritis$Age))</code></pre>
<p>molte volte e modificarlo per ottenere lo stesso risultato. Questo tuttavia è poco efficiente e soggetto a errori.<br />
Discuteremo meglio dei vantaggi dell’uso delle funzioni nel Capitolo <a href="wrangling.html#wrangling">9</a>.</p>
</div>
</div>
<div id="programmare-con-stile." class="section level2 hasAnchor" number="4.11">
<h2><span class="header-section-number">4.11</span> Programmare, con stile.<a href="datioggetti.html#programmare-con-stile." class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Questo è un libro per pigri e per persone con poca esperienza di programmazione. Per questa ragione ho deciso, molto a malincuore, di spostare tutto il materiale che riguarda più strettamente la programmazione in R nel Capitolo <a href="wrangling.html#wrangling">9</a>. È in quel capitolo che insieme alle tecniche per manipolare (in senso buono, per selezionare, filtrare, trasformare, unire, etc.) i dati (in inglese: <em>data wrangling</em>) tratterò in maniera sistematica dell’uso di strutture come i loop (<code>for</code>, <code>while</code>, <code>repeat</code>), di altre strutture di controllo come <code>if</code> e <code>if ... else</code> e le alternative per “applicare” funzioni a vettori. Come hai già visto, è inevitabile introdurre alcune di queste strutture nel testo: alcune sono piuttosto intuitive, per le altre puoi fare riferimento, quando necessario, al capitolo <a href="wrangling.html#wrangling">9</a> o alle diverse fonti che ho citato alla fine di questo capitolo.<br />
Spero vivamente che alla fine ti renderai conto che ogni minuto speso a imparare a programmare bene, e soprattutto, a scrivere codice leggibile e riproducibile, è un minuto (o un’ora, o un giorno) ben speso, che ti farà risparmiare molto tempo in futuro.</p>
</div>
<div id="un-ambiente-affollato." class="section level2 hasAnchor" number="4.12">
<h2><span class="header-section-number">4.12</span> Un ambiente affollato.<a href="datioggetti.html#un-ambiente-affollato." class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Bene, in questo capitolo abbiamo creato parecchi oggetti, che sono finiti in quello che si chiama “Global environment”: se stai usando gli script creati per questo libro prova a vedere in quale pannello appaiono i vari oggetti in RStudio man mano che li crei e che succede cliccando sugli oggetti nel pannello Environment.
Oltre ad esaminare l’ambiente di lavoro in modo interattivo usando la GUI di RStudio è possibile “interrogare” l’ambiente con delle funzioni.</p>
<div class="sourceCode" id="cb537"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb537-1"><a href="datioggetti.html#cb537-1" tabindex="-1"></a><span class="co"># elencare gli oggetti nell&#39;ambiente di lavoro e assegnare </span></span>
<span id="cb537-2"><a href="datioggetti.html#cb537-2" tabindex="-1"></a><span class="co"># l&#39;elenco ad un oggetto</span></span>
<span id="cb537-3"><a href="datioggetti.html#cb537-3" tabindex="-1"></a>i_miei_oggetti <span class="ot">&lt;-</span> <span class="fu">ls</span>()</span>
<span id="cb537-4"><a href="datioggetti.html#cb537-4" tabindex="-1"></a><span class="fu">head</span>(i_miei_oggetti,<span class="dv">10</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;a&quot;                 &quot;a_capo&quot;            &quot;AirPassengers&quot;    
##  [4] &quot;array_per_colonne&quot; &quot;array_senza_nomi&quot;  &quot;Arthr&quot;            
##  [7] &quot;Arthr1&quot;            &quot;Arthr2&quot;            &quot;Arthritis&quot;        
## [10] &quot;b&quot;</code></pre>
<div class="sourceCode" id="cb539"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb539-1"><a href="datioggetti.html#cb539-1" tabindex="-1"></a><span class="co"># che tipo di oggetto ho creato?</span></span></code></pre></div>
<p>Per ottenere informazioni sulla struttura di tutti gli oggetti
scrivi nella console (l’output è molto lungo)</p>
<pre><code>&gt;ls.str()</code></pre>
<p>Il risultato può essere assegnato a una lista di classe ls_str
Per ottenere informazioni sugli oggetti che hanno nomi riconducibili ad un determinato pattern è possibile usare delle espressioni regolari:</p>
<div class="sourceCode" id="cb541"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb541-1"><a href="datioggetti.html#cb541-1" tabindex="-1"></a><span class="co"># in questo esempio quelli che hanno un nome che inizia per A maiuscola</span></span>
<span id="cb541-2"><a href="datioggetti.html#cb541-2" tabindex="-1"></a><span class="fu">ls.str</span>(<span class="at">pattern=</span><span class="st">&quot;^A&quot;</span>)</span></code></pre></div>
<pre><code>## AirPassengers :  Time-Series [1:144] from 1949 to 1961: 112 118 132 129 121 135 148 148 136 119 ...
## Arthr : &#39;data.frame&#39;:    84 obs. of  5 variables:
##  $ ID       : int  80 12 29 38 51 54 76 16 69 31 ...
##  $ Treatment: Factor w/ 2 levels &quot;Placebo&quot;,&quot;Treated&quot;: 1 1 1 1 1 1 1 1 1 1 ...
##  $ Sex      : Factor w/ 2 levels &quot;Female&quot;,&quot;Male&quot;: 1 1 1 1 1 1 1 1 1 1 ...
##  $ Age      : int  23 30 30 32 37 44 45 46 48 49 ...
##  $ Improved : Ord.factor w/ 3 levels &quot;None&quot;&lt;&quot;Some&quot;&lt;..: 1 1 1 1 1 1 1 1 1 1 ...
## Arthr1 : &#39;data.frame&#39;:   20 obs. of  5 variables:
##  $ ID       : int  57 46 77 17 36 23 75 39 33 55 ...
##  $ Treatment: Factor w/ 2 levels &quot;Placebo&quot;,&quot;Treated&quot;: 2 2 2 2 2 2 2 2 2 2 ...
##  $ Sex      : Factor w/ 2 levels &quot;Female&quot;,&quot;Male&quot;: 2 2 2 2 2 2 2 2 2 2 ...
##  $ Age      : int  27 29 30 32 46 58 59 59 63 63 ...
##  $ Improved : Ord.factor w/ 3 levels &quot;None&quot;&lt;&quot;Some&quot;&lt;..: 2 1 1 3 3 3 1 3 1 1 ...
## Arthr2 : &#39;data.frame&#39;:   20 obs. of  5 variables:
##  $ ID       : int  82 53 79 26 28 60 22 27 2 59 ...
##  $ Treatment: Factor w/ 2 levels &quot;Placebo&quot;,&quot;Treated&quot;: 2 2 2 2 2 2 2 2 2 2 ...
##  $ Sex      : Factor w/ 2 levels &quot;Female&quot;,&quot;Male&quot;: 1 1 1 1 1 1 1 1 1 1 ...
##  $ Age      : int  48 55 55 56 57 57 57 58 59 59 ...
##  $ Improved : Ord.factor w/ 3 levels &quot;None&quot;&lt;&quot;Some&quot;&lt;..: 3 3 3 3 3 3 3 1 3 3 ...
## Arthritis : &#39;data.frame&#39;:    84 obs. of  5 variables:
##  $ ID       : int  57 46 77 17 36 23 75 39 33 55 ...
##  $ Treatment: Factor w/ 2 levels &quot;Placebo&quot;,&quot;Treated&quot;: 2 2 2 2 2 2 2 2 2 2 ...
##  $ Sex      : Factor w/ 2 levels &quot;Female&quot;,&quot;Male&quot;: 2 2 2 2 2 2 2 2 2 2 ...
##  $ Age      : int  27 29 30 32 46 58 59 59 63 63 ...
##  $ Improved : Ord.factor w/ 3 levels &quot;None&quot;&lt;&quot;Some&quot;&lt;..: 2 1 1 3 3 3 1 3 1 1 ...</code></pre>
<div class="sourceCode" id="cb543"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb543-1"><a href="datioggetti.html#cb543-1" tabindex="-1"></a><span class="co"># o il cui nome contiene &quot;a&quot; o &quot;A&quot;, </span></span>
<span id="cb543-2"><a href="datioggetti.html#cb543-2" tabindex="-1"></a><span class="fu">ls.str</span>(<span class="at">pattern=</span><span class="st">&quot;A|a&quot;</span>)</span></code></pre></div>
<pre><code>## a :  num [1:3] 3 2 1
## a_capo :  chr &quot;A\nB\nC&quot;
## AirPassengers :  Time-Series [1:144] from 1949 to 1961: 112 118 132 129 121 135 148 148 136 119 ...
## array_per_colonne :  int [1:3, 1:4, 1:3] 1 2 3 4 5 6 7 8 9 10 ...
## array_senza_nomi :  num [1:3, 1:3, 1:2] 1 1 1 1 1 1 2 2 2 2 ...
## Arthr : &#39;data.frame&#39;:    84 obs. of  5 variables:
##  $ ID       : int  80 12 29 38 51 54 76 16 69 31 ...
##  $ Treatment: Factor w/ 2 levels &quot;Placebo&quot;,&quot;Treated&quot;: 1 1 1 1 1 1 1 1 1 1 ...
##  $ Sex      : Factor w/ 2 levels &quot;Female&quot;,&quot;Male&quot;: 1 1 1 1 1 1 1 1 1 1 ...
##  $ Age      : int  23 30 30 32 37 44 45 46 48 49 ...
##  $ Improved : Ord.factor w/ 3 levels &quot;None&quot;&lt;&quot;Some&quot;&lt;..: 1 1 1 1 1 1 1 1 1 1 ...
## Arthr1 : &#39;data.frame&#39;:   20 obs. of  5 variables:
##  $ ID       : int  57 46 77 17 36 23 75 39 33 55 ...
##  $ Treatment: Factor w/ 2 levels &quot;Placebo&quot;,&quot;Treated&quot;: 2 2 2 2 2 2 2 2 2 2 ...
##  $ Sex      : Factor w/ 2 levels &quot;Female&quot;,&quot;Male&quot;: 2 2 2 2 2 2 2 2 2 2 ...
##  $ Age      : int  27 29 30 32 46 58 59 59 63 63 ...
##  $ Improved : Ord.factor w/ 3 levels &quot;None&quot;&lt;&quot;Some&quot;&lt;..: 2 1 1 3 3 3 1 3 1 1 ...
## Arthr2 : &#39;data.frame&#39;:   20 obs. of  5 variables:
##  $ ID       : int  82 53 79 26 28 60 22 27 2 59 ...
##  $ Treatment: Factor w/ 2 levels &quot;Placebo&quot;,&quot;Treated&quot;: 2 2 2 2 2 2 2 2 2 2 ...
##  $ Sex      : Factor w/ 2 levels &quot;Female&quot;,&quot;Male&quot;: 1 1 1 1 1 1 1 1 1 1 ...
##  $ Age      : int  48 55 55 56 57 57 57 58 59 59 ...
##  $ Improved : Ord.factor w/ 3 levels &quot;None&quot;&lt;&quot;Some&quot;&lt;..: 3 3 3 3 3 3 3 1 3 3 ...
## Arthritis : &#39;data.frame&#39;:    84 obs. of  5 variables:
##  $ ID       : int  57 46 77 17 36 23 75 39 33 55 ...
##  $ Treatment: Factor w/ 2 levels &quot;Placebo&quot;,&quot;Treated&quot;: 2 2 2 2 2 2 2 2 2 2 ...
##  $ Sex      : Factor w/ 2 levels &quot;Female&quot;,&quot;Male&quot;: 2 2 2 2 2 2 2 2 2 2 ...
##  $ Age      : int  27 29 30 32 46 58 59 59 63 63 ...
##  $ Improved : Ord.factor w/ 3 levels &quot;None&quot;&lt;&quot;Some&quot;&lt;..: 2 1 1 3 3 3 1 3 1 1 ...
## billboard : tibble [317 × 79] (S3: tbl_df/tbl/data.frame)
## calcola_media : function (vettore_numerico)  
## chiamate_multiple :  &#39;difftime&#39; num 0.00333189964294434
## data_frame_4 : &#39;data.frame&#39;: 8 obs. of  3 variables:
##  $ quattro       : int  1 2 3 4 1 2 3 4
##  $ quattro_coppie: int  1 1 2 2 3 3 4 4
##  $ mantra        : chr  &quot;amore&quot; &quot;pace&quot; &quot;amore&quot; &quot;pace&quot; ...
## df_a : &#39;data.frame&#39;: 84 obs. of  2 variables:
##  $ Treatment: Factor w/ 2 levels &quot;Placebo&quot;,&quot;Treated&quot;: 2 2 2 2 2 2 2 2 2 2 ...
##  $ Sex      : Factor w/ 2 levels &quot;Female&quot;,&quot;Male&quot;: 2 2 2 2 2 2 2 2 2 2 ...
## fai_la_somma : function (a = 1, b = 2, c = 3)  
## fattore_non_o :  Factor w/ 2 levels &quot;consonant&quot;,&quot;vowel&quot;: 2 1 1
## i_miei_anni :  Time-Series [1:50] from 1960 to 2009: 1 2 3 4 5 6 7 8 9 10 ...
## la_mia_lista : List of 1
##  $ : chr [1:3] &quot;d&quot; &quot;e&quot; &quot;f&quot;
## la_mia_prima_lista : List of 4
##  $ : num [1:3] 1 2 3
##  $ : chr [1:9] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;1&quot; ...
##  $ : chr [1:12] &quot;amore&quot; &quot;pace&quot; &quot;amore&quot; &quot;pace&quot; ...
##  $ : int [1:3, 1:3] 1 2 3 4 5 6 7 8 9
## la_mia_prima_lista_con_nomi : List of 5
##  $ a: num [1:3] 1 2 3
##  $ b: chr [1:9] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;1&quot; ...
##  $ c: chr [1:12] &quot;amore&quot; &quot;pace&quot; &quot;amore&quot; &quot;pace&quot; ...
##  $ d: int [1:3, 1:3] 1 2 3 4 5 6 7 8 9
##  $ e:List of 4
## la_mia_tibble : tibble [3 × 2] (S3: tbl_df/tbl/data.frame)
## le_mie_date :  chr [1:2] &quot;1962/02/14&quot; &quot;1964/12/07&quot;
## le_mie_Date :  Date[1:2], format: &quot;1962-02-14&quot; &quot;1964-12-07&quot;
## le_mie_Date_formattate :  chr [1:2] &quot;Wednesday 14 February 62&quot; &quot;Monday 07 December 64&quot;
## le_mie_date_sbagliate :  chr [1:2] &quot;14/02/1962&quot; &quot;07/12/1964&quot;
## le_mie_mediane :  Named num [1:8] 0.01172 -0.00352 0.00874 0.02158 0.0077 ...
## logAge :  num [1:84] 1.43 1.46 1.48 1.51 1.66 ...
## m_a :  chr [1:84, 1:2] &quot;Treated&quot; &quot;Treated&quot; &quot;Treated&quot; &quot;Treated&quot; &quot;Treated&quot; ...
## maggiore_di_tre :  logi [1:3, 1:3] FALSE FALSE FALSE TRUE TRUE TRUE ...
## mantra :  chr [1:12] &quot;amore&quot; &quot;pace&quot; &quot;amore&quot; &quot;pace&quot; &quot;amore&quot; &quot;pace&quot; &quot;amore&quot; &quot;pace&quot; ...
## matrice_carattere :  chr [1:3, 1:2] &quot;amore&quot; &quot;amore&quot; &quot;amore&quot; &quot;pace&quot; &quot;pace&quot; &quot;pace&quot;
## matrice_logica :  logi [1:3, 1:3] TRUE TRUE TRUE FALSE FALSE FALSE ...
## media_log_age :  num 1.71
## mediane :  num [1:8] 0.01172 -0.00352 0.00874 0.02158 0.0077 ...
## mediane_apply :  Named num [1:8] 0.01172 -0.00352 0.00874 0.02158 0.0077 ...
## mtcars : &#39;data.frame&#39;:   32 obs. of  11 variables:
##  $ mpg : num  21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...
##  $ cyl : num  6 6 4 6 8 6 8 4 4 6 ...
##  $ disp: num  160 160 108 258 360 ...
##  $ hp  : num  110 110 93 110 175 105 245 62 95 123 ...
##  $ drat: num  3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...
##  $ wt  : num  2.62 2.88 2.32 3.21 3.44 ...
##  $ qsec: num  16.5 17 18.6 19.4 17 ...
##  $ vs  : num  0 0 1 1 0 1 0 1 1 1 ...
##  $ am  : num  1 1 1 0 0 0 0 0 0 0 ...
##  $ gear: num  4 4 4 3 3 3 3 4 4 4 ...
##  $ carb: num  4 4 1 1 2 1 4 2 2 4 ...
## n_casi :  num 10000
## opar : List of 66
##  $ xlog     : logi FALSE
##  $ ylog     : logi FALSE
##  $ adj      : num 0.5
##  $ ann      : logi TRUE
##  $ ask      : logi FALSE
##  $ bg       : chr &quot;white&quot;
##  $ bty      : chr &quot;o&quot;
##  $ cex      : num 1
##  $ cex.axis : num 1
##  $ cex.lab  : num 1
##  $ cex.main : num 1.2
##  $ cex.sub  : num 1
##  $ col      : chr &quot;black&quot;
##  $ col.axis : chr &quot;black&quot;
##  $ col.lab  : chr &quot;black&quot;
##  $ col.main : chr &quot;black&quot;
##  $ col.sub  : chr &quot;black&quot;
##  $ crt      : num 0
##  $ err      : int 0
##  $ family   : chr &quot;&quot;
##  $ fg       : chr &quot;black&quot;
##  $ fig      : num [1:4] 0 1 0 1
##  $ fin      : num [1:2] 7 5
##  $ font     : int 1
##  $ font.axis: int 1
##  $ font.lab : int 1
##  $ font.main: int 2
##  $ font.sub : int 1
##  $ lab      : int [1:3] 5 5 7
##  $ las      : int 0
##  $ lend     : chr &quot;round&quot;
##  $ lheight  : num 1
##  $ ljoin    : chr &quot;round&quot;
##  $ lmitre   : num 10
##  $ lty      : chr &quot;solid&quot;
##  $ lwd      : num 1
##  $ mai      : num [1:4] 1.02 0.82 0.82 0.42
##  $ mar      : num [1:4] 5.1 4.1 4.1 2.1
##  $ mex      : num 1
##  $ mfcol    : int [1:2] 1 1
##  $ mfg      : int [1:4] 1 1 1 1
##  $ mfrow    : int [1:2] 1 1
##  $ mgp      : num [1:3] 3 1 0
##  $ mkh      : num 0.001
##  $ new      : logi FALSE
##  $ oma      : num [1:4] 0 0 0 0
##  $ omd      : num [1:4] 0 1 0 1
##  $ omi      : num [1:4] 0 0 0 0
##  $ pch      : int 1
##  $ pin      : num [1:2] 5.76 3.16
##  $ plt      : num [1:4] 0.117 0.94 0.204 0.836
##  $ ps       : int 12
##  $ pty      : chr &quot;m&quot;
##  $ smo      : num 1
##  $ srt      : num 0
##  $ tck      : num NA
##  $ tcl      : num -0.5
##  $ usr      : num [1:4] 0 1 0 1
##  $ xaxp     : num [1:3] 0 1 5
##  $ xaxs     : chr &quot;r&quot;
##  $ xaxt     : chr &quot;s&quot;
##  $ xpd      : logi FALSE
##  $ yaxp     : num [1:3] 0 1 5
##  $ yaxs     : chr &quot;r&quot;
##  $ yaxt     : chr &quot;s&quot;
##  $ ylbias   : num 0.2
## ora :  chr &quot;Sat Nov 25 08:18:09 2023&quot;
## per_colonne_sbagliato :  int [1:3, 1:3] 1 2 3 4 5 6 7 8 9
## per_colonne_sbagliato_2 :  int [1:3, 1:3] 1 2 3 4 5 6 7 8 1
## play_audio :  logi TRUE
## quanto :  Factor w/ 4 levels &quot;abbastanza&quot;,&quot;moltissimo&quot;,..: 3 3 4 2 1
## quanto_ord :  Ord.factor w/ 4 levels &quot;poco&quot;&lt;&quot;abbastanza&quot;&lt;..: 3 3 1 4 2
## quattro_elementi :  chr [1:4] &quot;1&quot; &quot;2&quot; &quot;1&quot; &quot;d&quot;
## risultato :  logi [1:3] FALSE FALSE FALSE
## somma_età_2 :  int 955
## stat_descrittive : function (x, parametriche = TRUE, stampa = FALSE, trm = 0.05, narm = T)  
## stat_età :  Named num [1:2] 54.4 12.8
## stat_età_1 :  Named num [1:2] 53.4 12.8
## stat_età_2 :  Named num [1:2] 47.8 12.8
## stat_età_3 :  Named num [1:2] 60.6 12.8
## tabella_artrite :  &#39;table&#39; int [1:2, 1:3, 1:2] 19 6 7 5 6 16 10 7 0 2 ...
## tib_Arthritis : tibble [84 × 5] (S3: tbl_df/tbl/data.frame)
## tre_per_tre_logica :  logi [1:3, 1:3] TRUE TRUE FALSE TRUE TRUE FALSE ...
## una_matrice :  num [1:2, 1:3] 1.1 2.1 1.2 2.2 1.3 2.3
## una_nuova_matrice :  num [1:2, 1:3] 1.11 2.12 1.23 2.21 1.32 2.33
## uso_apply :  &#39;difftime&#39; num 0.0037989616394043
## vettori_concatenati :  num [1:6] 1 2 3 1 2 3
## virgolettato :  chr [1:3] &quot;&#39;A&#39;&quot; &quot;&#39;B&#39;&quot; &quot;&#39;C&#39;&quot;
## virgolettato_doppio :  chr [1:3] &quot;\&quot;A\&quot;&quot; &quot;\&quot;B\&quot;&quot; &quot;\&quot;C\&quot;&quot;</code></pre>
<div class="sourceCode" id="cb545"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb545-1"><a href="datioggetti.html#cb545-1" tabindex="-1"></a><span class="co"># o finisce per  &quot;i&quot;,</span></span>
<span id="cb545-2"><a href="datioggetti.html#cb545-2" tabindex="-1"></a><span class="fu">ls.str</span>(<span class="at">pattern=</span><span class="st">&quot;i$&quot;</span>)</span></code></pre></div>
<pre><code>## array_senza_nomi :  num [1:3, 1:3, 1:2] 1 1 1 1 1 1 2 2 2 2 ...
## dimmi_di_si :  chr [1:3, 1:3] &quot;Yes&quot; &quot;Yes&quot; &quot;Yes&quot; &quot;Yes&quot; &quot;Yes&quot; &quot;Yes&quot; &quot;Yes&quot; &quot;Yes&quot; &quot;Yes&quot;
## due_elementi :  Named num [1:2] 1 3
## due_vettori :  chr [1:9] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;d&quot; &quot;e&quot; &quot;f&quot;
## espliciti : &#39;data.frame&#39;:    4 obs. of  2 variables:
##  $ anno   : num  1999 2000 2001 2002
##  $ vendite: num  100 NA 101 102
## i :  int 8
## i_miei_anni :  Time-Series [1:50] from 1960 to 2009: 1 2 3 4 5 6 7 8 9 10 ...
## i_miei_giorni :  Time-Series [1:28] from 12.1 to 16: 1 2 3 4 5 6 7 7 6 5 ...
## i_miei_mesi :  Time-Series [1:100] from 1960 to 1968: 1 2 3 4 5 6 7 8 9 10 ...
## i_miei_oggetti :  chr [1:106] &quot;a&quot; &quot;a_capo&quot; &quot;AirPassengers&quot; &quot;array_per_colonne&quot; ...
## i_nomi :  chr [1:2] &quot;ID&quot; &quot;Age&quot;
## impliciti : &#39;data.frame&#39;:    3 obs. of  2 variables:
##  $ anno   : num  1999 2001 2002
##  $ vendite: num  100 101 102
## la_mia_prima_lista_con_nomi : List of 5
##  $ a: num [1:3] 1 2 3
##  $ b: chr [1:9] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;1&quot; ...
##  $ c: chr [1:12] &quot;amore&quot; &quot;pace&quot; &quot;amore&quot; &quot;pace&quot; ...
##  $ d: int [1:3, 1:3] 1 2 3 4 5 6 7 8 9
##  $ e:List of 4
## n_casi :  num 10000
## oggi :  POSIXct[1:1], format: &quot;2023-11-25 08:18:09&quot;
## quattro_elementi :  chr [1:4] &quot;1&quot; &quot;2&quot; &quot;1&quot; &quot;d&quot;
## tempi :  &#39;difftime&#39; Named num [1:4] 0.00333189964294434 0.00661516189575195 0.0037989616394043 0.00310111045837402
## tre_per_sei : &#39;data.frame&#39;:  3 obs. of  6 variables:
##  $ D: int  1 2 3
##  $ E: int  4 5 6
##  $ F: int  7 8 9
##  $ D: int  1 2 3
##  $ E: int  4 5 6
##  $ F: int  7 8 9
## tre_selezioni :  logi [1:3] TRUE FALSE TRUE
## vettore_con_nomi :  Named num [1:3] 1 2 3
## vettori_concatenati :  num [1:6] 1 2 3 1 2 3</code></pre>
<div class="sourceCode" id="cb547"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb547-1"><a href="datioggetti.html#cb547-1" tabindex="-1"></a><span class="co"># o inizia con &quot;per&quot;</span></span>
<span id="cb547-2"><a href="datioggetti.html#cb547-2" tabindex="-1"></a><span class="fu">ls.str</span>(<span class="at">pattern=</span><span class="st">&quot;^per&quot;</span>)</span></code></pre></div>
<pre><code>## per_colonne :  int [1:3, 1:3] 1 2 3 4 5 6 7 8 9
## per_colonne_sbagliato :  int [1:3, 1:3] 1 2 3 4 5 6 7 8 9
## per_colonne_sbagliato_2 :  int [1:3, 1:3] 1 2 3 4 5 6 7 8 1
## per_righe :  int [1:3, 1:3] 1 4 7 2 5 8 3 6 9</code></pre>
<div class="sourceCode" id="cb549"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb549-1"><a href="datioggetti.html#cb549-1" tabindex="-1"></a><span class="co"># contains &quot;tre&quot; 1 o più volte</span></span>
<span id="cb549-2"><a href="datioggetti.html#cb549-2" tabindex="-1"></a><span class="fu">ls.str</span>(<span class="at">pattern=</span><span class="st">&quot;tre+&quot;</span>)</span></code></pre></div>
<pre><code>## maggiore_di_tre :  logi [1:3, 1:3] FALSE FALSE FALSE TRUE TRUE TRUE ...
## sei_per_tre : &#39;data.frame&#39;:  6 obs. of  3 variables:
##  $ D: int  1 2 3 1 2 3
##  $ E: int  4 5 6 4 5 6
##  $ F: int  7 8 9 7 8 9
## tre_per_sei : &#39;data.frame&#39;:  3 obs. of  6 variables:
##  $ D: int  1 2 3
##  $ E: int  4 5 6
##  $ F: int  7 8 9
##  $ D: int  1 2 3
##  $ E: int  4 5 6
##  $ F: int  7 8 9
## tre_per_tre : &#39;data.frame&#39;:  3 obs. of  3 variables:
##  $ D: int  1 2 3
##  $ E: int  4 5 6
##  $ F: int  7 8 9
## tre_per_tre_logica :  logi [1:3, 1:3] TRUE TRUE FALSE TRUE TRUE FALSE ...
## tre_selezioni :  logi [1:3] TRUE FALSE TRUE</code></pre>
<p>Per fare un po’ di pulizia è possibile usare la funzione <code>rm()</code>.<br />
<code>rm()</code> prende come argomento i nomi degli oggetti da rimuovere come nomi (senza virgolette), come vettori di caratteri o come lista (per esempio generata da ls()). Prova nella console questi comandi:</p>
<pre><code>copia_Arthritis &lt;- Arthritis
rm(Arthritis)
# salvo l&#39;abiente come immagine (vedi capitolo 5)
save.image(file = &quot;lambiente.Rdata&quot;)
# gli oggetti che iniziano con la A
rm(ls(pattern = &quot;^A&quot;))
# tutti gli oggetti
rm(list = ls())
# ricarico tutto
load(file = &quot;lambiente.Rdata&quot;)</code></pre>
</div>
<div id="altrerisorsedati" class="section level2 hasAnchor" number="4.13">
<h2><span class="header-section-number">4.13</span> Altre risorse.<a href="datioggetti.html#altrerisorsedati" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Riporto, per comodità (tua), risorse già citate in altri capitoli.</p>
<div id="risorse-in-italiano.-2" class="section level3 hasAnchor" number="4.13.1">
<h3><span class="header-section-number">4.13.1</span> Risorse in italiano.<a href="datioggetti.html#risorse-in-italiano.-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Documenti e pagine web.</strong></p>
<p>Questa <a href="https://www.agnesevardanega.eu/wiki/r/start">wiki</a> di Agnese Vardanega mi pare la cosa migliore.</p>
</div>
<div id="risorse-in-inglese.-2" class="section level3 hasAnchor" number="4.13.2">
<h3><span class="header-section-number">4.13.2</span> Risorse in inglese.<a href="datioggetti.html#risorse-in-inglese.-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Documenti e pagine web.</strong></p>
<p>Riporto qui alcuni libri disponibili online nei quali potrai trovare capitoli rilevanti per il contenuto di questo capitolo:</p>
<ul>
<li><p>Libri: provate questi (il secondo è per utenti avanzati)</p>
<ul>
<li><p><a href="http://r4ds.had.co.nz">R for data science</a>: libro assolutamente fondamentale per introdurvi all’analisi dei dati (non necessariamente alla statistica) con R; disponibile on line gratuitamente ma anche come formato cartaceo e epub. Ne esiste anche una traduzione italiana, disponibile <a href="https://it.r4ds.hadley.nz">qui</a></p></li>
<li><p><a href="https://adv-r.hadley.nz">Advanced R</a> probabilmente la bibbia della programmazione con R, solo per avanzati</p></li>
<li><p><a href="https://rstudio-education.github.io/hopr/index.html">Hands-on programming with R</a>: anche questo un buon libro sulla programmazione in R, più semplice del precedente.</p></li>
<li><p><a href="https://bookdown.org/rdpeng/rprogdatascience/">R programming for data science</a>: anche questo bel libro dedicato alla programmazione, corredato da video efficaci</p></li>
</ul></li>
<li><p>documenti e siti web:</p>
<ul>
<li><p><a href="https://www.statmethods.net">Quick-R</a>: guida di riferimento rapido a strutture di dati e funzione di base</p></li>
<li><p><a href="http://www.cookbook-r.com">Cookbook for R</a>: un pochino disordinato, ma utile</p></li>
</ul></li>
</ul>

</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="66">
<li id="fn66"><p>che c’è di male, è quello che faccio io, fra le varie cose<a href="datioggetti.html#fnref66" class="footnote-back">↩︎</a></p></li>
<li id="fn67"><p>la terminologia utilizzata per descrivere i caratteri soggetti a variabilità varia molto da un ambito disciplinare all’altro. Se volete utilizzare la terminologia inglese e leggere un’interessante discussione sulle variabili e sulla variabilità in biologia leggete <a href="http://www.biostathandbook.com/variabletypes.html">qui</a><a href="datioggetti.html#fnref67" class="footnote-back">↩︎</a></p></li>
<li id="fn68"><p>si tratta di misure in centimetri, riportate con una sola cifra significativa dopo il separatore decimale; la scelta potrebbe essere dovuta sia a limitazioni dello strumento usato per la misura (per esempio un calibro a nonio, che può apprezzare, al meglio, differenze di 0,05 cm) sia a considerazioni di ripetibilità della singola misura. E’ da notare che per queste misure non sono, ovviamente, possibili valori negativi.<a href="datioggetti.html#fnref68" class="footnote-back">↩︎</a></p></li>
<li id="fn69"><p>nelle variabili per scala di rapporti la posizione dello 0 non è arbitraria e quindi ha senso usare confronti basati sia sulle differenze che sui rapporti: 4 cm è il doppio di 2 cm, e così via; di conseguenza è possibile per esempio usare statistiche basate sui rapporti, come il coefficiente di variazione<a href="datioggetti.html#fnref69" class="footnote-back">↩︎</a></p></li>
<li id="fn70"><p>questo non è sempre vero; in molti casi, specialmente nella statistica multivariata le tabelle, quando composte da un unico tipo di dati, possono essere trasposte, scambiando righe con colonne<a href="datioggetti.html#fnref70" class="footnote-back">↩︎</a></p></li>
<li id="fn71"><p>è importante il corretto uso di maiuscole e minuscole, come vedrai dopo R è un linguaggio “case sensitive”. <code>Arthritis</code> e ‘arthritis’ non sono la stessa cosa…<a href="datioggetti.html#fnref71" class="footnote-back">↩︎</a></p></li>
<li id="fn72"><p>e probabilmente con un sistema chiamato a doppio cieco, in cui né chi rileva lo stato del paziente né il paziente sanno a che gruppo il paziente appartiene<a href="datioggetti.html#fnref72" class="footnote-back">↩︎</a></p></li>
<li id="fn73"><p>in R, un fattore ordinato; i tre livelli (<code>None</code>, nessun miglioramento; <code>Some</code>: qualche miglioramento; <code>Marked</code>: evidenti miglioramenti) hanno un ordine. Tuttavia non è possibile usare una scala continua, ma solo una scala per ranghi: <code>Marked</code> è certamente “migliore” di <code>Some</code> etc.<a href="datioggetti.html#fnref73" class="footnote-back">↩︎</a></p></li>
<li id="fn74"><p>questa notazione indica che mpg appartiene alla libreria ggplot2, che a sua volta appartiene al gruppo di pacchetti del tidyverse<a href="datioggetti.html#fnref74" class="footnote-back">↩︎</a></p></li>
<li id="fn75"><p>mentre una tabella è un oggetto matrix-like, simile ad una matrice, un array può avere 3 o più dimensioni<a href="datioggetti.html#fnref75" class="footnote-back">↩︎</a></p></li>
<li id="fn76"><p>in un database relazionale diverse tabelle sono collegate da “relazioni”: per esempio la tabella flights è collegata alla tabella airlines tramite l’abbreviazione a due lettere carrier, che compare in entrambe le tabelle: è una cosiddetta variablile chiava (key variable), che può essere usata per unire i dati delle due tabelle in un’unica tabella.<a href="datioggetti.html#fnref76" class="footnote-back">↩︎</a></p></li>
<li id="fn77"><p>incidentalmente la temperatura, in questo caso in gradi °F, è un esempio di <strong>variabile continua per scala ad intervallo</strong>, nella quale la posizione dello 0 è arbitraria ed è possibile fare confronti per sottrazione ma non per rapporti: un oggetto a 212°F non è due volte più caldo di un oggetto a 106°F. Diverso è il caso della scala °K, che è una <strong>variabile continua per scala di rapporti</strong>, perché la posizione dello 0 non è arbitraria.<a href="datioggetti.html#fnref77" class="footnote-back">↩︎</a></p></li>
<li id="fn78"><p>ed è, incidentalmente, la ragione per cui R, con le sue potenti capacità di data wrangling, è probabilmente il miglior linguaggio per la data science. Come potrai facilmente constatare in brevissimo tempo, ci sono molti e fantasiosissimi modi di produrre tabelle sostanzialmente inutilizzabili per l’analisi dei dati.<a href="datioggetti.html#fnref78" class="footnote-back">↩︎</a></p></li>
<li id="fn79"><p>quelli mancanti in modo esplicito, vedi dopo<a href="datioggetti.html#fnref79" class="footnote-back">↩︎</a></p></li>
<li id="fn80"><p>con un numero di repliche diverso di repliche per ciascun trattamento<a href="datioggetti.html#fnref80" class="footnote-back">↩︎</a></p></li>
<li id="fn81"><p>anche se alcune operazioni di riarrangiamento dei dati, come il passagio da tabelle in formato “largo” o “wide” a tabelle in formato “lungo” o “long” potrebbe evidenziare il problema, vedi più avanti in questo libro<a href="datioggetti.html#fnref81" class="footnote-back">↩︎</a></p></li>
<li id="fn82"><p>può sembrare banale in una tabella piccola, ma immaginate di avere tabelle di milioni di osservazioni<a href="datioggetti.html#fnref82" class="footnote-back">↩︎</a></p></li>
<li id="fn83"><p>prova a leggere <a href="https://cran.r-project.org/web/packages/finalfit/vignettes/missing.html">questa vignette</a> <a href="datioggetti.html#fnref83" class="footnote-back">↩︎</a></p></li>
<li id="fn84"><p>not a number, può essere generato da operazioni come sqrt(-2)<a href="datioggetti.html#fnref84" class="footnote-back">↩︎</a></p></li>
<li id="fn85"><p>se vuoi sapere di più paradigma della programmazione orientata ad oggetti, che è supportata da linguaggi molto popolari come C++, Python e Java, leggi <a href="https://it.wikipedia.org/wiki/Programmazione_orientata_agli_oggetti">questo</a> articolo su Wikipedia o puoi studiare il libro <a href="http://adv-r.had.co.nz/">Advanced R</a><a href="datioggetti.html#fnref85" class="footnote-back">↩︎</a></p></li>
<li id="fn86"><p>che è una parafrasi di “To understand computations in R, two slogans are helpful: Everything that exists is an object. Everything that happens is a function call.” — John Chambers; anche le funzioni sono oggetti!<a href="datioggetti.html#fnref86" class="footnote-back">↩︎</a></p></li>
<li id="fn87"><p>in realtà è possibile violare queste limitazioni mettendo i nomi “proibiti” o meglio, <strong>non sintattici</strong>, fra virgolette singole<a href="datioggetti.html#fnref87" class="footnote-back">↩︎</a></p></li>
<li id="fn88"><p>esistono anche i tipi <code>complex</code> e <code>raw</code><a href="datioggetti.html#fnref88" class="footnote-back">↩︎</a></p></li>
<li id="fn89"><p>in realtà <code>NA</code> ha come tipo <code>logical</code>, provare per credere; per creare specificamente valori mancanti a carattere o numerici occorre usare <code>NA_character_</code> o, per i numerici, <code>NA_real_</code> o <code>NA_integer_</code><a href="datioggetti.html#fnref89" class="footnote-back">↩︎</a></p></li>
<li id="fn90"><p>più avanti vedrai che esiste un comando generico, <code>vector()</code> che permette di produrre un vettore di una data lunghezza e tipo<a href="datioggetti.html#fnref90" class="footnote-back">↩︎</a></p></li>
<li id="fn91"><p>lo vedrai quando parlerò di importazione di dati: non è sempre ovvio in che modo una colonna di dati verrà importata<a href="datioggetti.html#fnref91" class="footnote-back">↩︎</a></p></li>
<li id="fn92"><p>è importante capire che alcune funzioni restituiscono sempre un data frame, e non una matrice e che non sempre le funzioni che richiedono matrici come input accettano data frame assimilabili o trasformabili in matrici: per questo è necessario leggere bene la sezione <code>value</code> dell’aiuto di una funzione<a href="datioggetti.html#fnref92" class="footnote-back">↩︎</a></p></li>
<li id="fn93"><p>se tutti i data frame fossero <code>tibble</code> il mondo sarebbe più ordinato, <code>tidy</code>, e semplice; per quanto pigr* ti imbatterai presto nei tanti difettucci dei <code>data frame</code>. Se vuoi saperne di più su alcune proprietà speciali delle tibble, clicca <a href="https://cran.r-project.org/web/packages/tibble/vignettes/tibble.html">qui</a> <a href="datioggetti.html#fnref93" class="footnote-back">↩︎</a></p></li>
<li id="fn94"><p>nota che se il tuo sistema operativo è vecchiotto potresti dover installare R 3.2!<a href="datioggetti.html#fnref94" class="footnote-back">↩︎</a></p></li>
<li id="fn95"><p>mandare un data frame di 1.000.000 di righe in stampa in console può essere piuttosto dispersivo<a href="datioggetti.html#fnref95" class="footnote-back">↩︎</a></p></li>
<li id="fn96"><p>in realtà sono liste con classi particolari, che ne determinano il modo di stampa<a href="datioggetti.html#fnref96" class="footnote-back">↩︎</a></p></li>
<li id="fn97"><p>il pacchetto <code>lubridate</code> fornisce molte funzioni convenienti e facili da ricordare per questo tipo di oggetti<a href="datioggetti.html#fnref97" class="footnote-back">↩︎</a></p></li>
<li id="fn98"><p>dei singoli elementi in vettori con una dimensione o liste, delle righe o delle colonne o degli strati in elementi in 2 o più dimensioni<a href="datioggetti.html#fnref98" class="footnote-back">↩︎</a></p></li>
<li id="fn99"><p>non funziona con i vettori atomici, come matrici e array<a href="datioggetti.html#fnref99" class="footnote-back">↩︎</a></p></li>
<li id="fn100"><p>nota che in RStudio, quando si scrive nella console o in uno script, appariranno suggerimenti man mano che si scrive; per prova a scrivere <code>Arthritis$</code>: vedrai che apparirà una lista delle variabili del data frame, che si restringerà man mano che si scrivono altri caratteri, o nella quale si può navigare con i trasti freccia e accettare con tab, o invio)<a href="datioggetti.html#fnref100" class="footnote-back">↩︎</a></p></li>
<li id="fn101"><p>altrimenti restituisce <code>NULL</code><a href="datioggetti.html#fnref101" class="footnote-back">↩︎</a></p></li>
<li id="fn102"><p>in effetti si chiamano “infix functions”; puoi verificare facilmente che <code>+</code>(1,2) funziona (e domandarti perché ho dovuto usare quel particolare tipo di virgolette intorno al +)!<a href="datioggetti.html#fnref102" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="aiuto.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="dentroefuoriR.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
